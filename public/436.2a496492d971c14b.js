"use strict";(self.webpackChunkbase_platform=self.webpackChunkbase_platform||[]).push([[436],{9436:(Ai,G,c)=>{c.r(G),c.d(G,{ControlAccesoModule:()=>Pi});var d=c(6814),y=c(1896),S=c(7402),t=c(9212);let at=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-index"]],decls:2,vars:0,template:function(n,i){1&n&&(t.TgZ(0,"p"),t._uU(1,"index works!"),t.qZA())}})}return o})();var T=c(1476),I=c(3566),l=c(6223),f=c(7700),rt=c(2743);const H={1:{icon:"pending",key:"inactive",description:"Inactivo"},2:{icon:"done_outline",key:"active",description:"Activo"},3:{icon:"lock",key:"blocked",description:"Bloqueado"},4:{icon:"block",key:"banned",description:"Baneado"}};var b=c(5499),C=c(1088),R=c(8645),lt=c(9773),B=c(2487),A=c(9107),N=c(7921),g=c(7398),h=c(2296),v=c(617),U=c(2032),p=c(9157),M=c(9038),k=c(5195),O=c(3680),P=c(4630),ct=c(2599);function mt(o,s){1&o&&(t.TgZ(0,"mat-option",13),t._uU(1," No se encontraron Permisos "),t.qZA())}function ut(o,s){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"playlist_add_check"),t.qZA())}function dt(o,s){1&o&&(t.TgZ(0,"mat-icon",19),t._uU(1,"star"),t.qZA())}function pt(o,s){if(1&o&&(t.TgZ(0,"mat-option",14)(1,"div",15)(2,"span",16),t._uU(3),t.qZA(),t.YNc(4,ut,2,0,"mat-icon",17),t._uU(5),t.YNc(6,dt,2,0,"mat-icon",18),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw();t.Q6J("value",e)("disabled",n.ctrlSelPermissions[e.id]),t.xp6(3),t.Oqu(e.group),t.xp6(1),t.Q6J("ngIf",n.ctrlSelPermissions[e.id]),t.xp6(1),t.hij("\xa0",e.description,"\xa0"),t.xp6(1),t.Q6J("ngIf",e.is_super)}}function gt(o,s){1&o&&(t.TgZ(0,"mat-icon",19),t._uU(1,"star"),t.qZA())}function _t(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw();return t.KtG(a.removePermission(i))}),t.TgZ(1,"mat-icon"),t._uU(2,"do_not_disturb_on"),t.qZA()()}}function ft(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-slide-toggle",27),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.toggleActivePermission(a.id,i))}),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("checked",n.ctrlSelPermissions[e.id].active)}}function ht(o,s){if(1&o&&(t.TgZ(0,"mat-list-item",20)(1,"div",21)(2,"div",22)(3,"span",16),t._uU(4),t.qZA(),t._uU(5),t.YNc(6,gt,2,0,"mat-icon",18),t.qZA(),t.TgZ(7,"span",23),t.YNc(8,_t,3,0,"button",24)(9,ft,1,1,"mat-slide-toggle",25),t.qZA()()()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(4),t.Oqu(e.group),t.xp6(1),t.hij(" ",e.description,"\xa0"),t.xp6(1),t.Q6J("ngIf",e.is_super),t.xp6(2),t.Q6J("ngIf",0==n.ctrlSelPermissions[e.id].roles.length),t.xp6(1),t.Q6J("ngIf",n.ctrlSelPermissions[e.id].roles.length>0)}}let K=(()=>{class o{constructor(){this.changeDetected=new t.vpe}ngOnInit(){this.catalogPermissions=[],this.permissionControl=new l.NI,this.selectedPermissions=[],this.ctrlSelPermissions={}}initCatalogPermisssions(e){e&&(this.catalogPermissions=e),this.filteredPermissions=this.permissionControl.valueChanges.pipe((0,N.O)(""),(0,g.U)(n=>{const i="string"==typeof n?n:n?.description;return i?this._filter(i):this.catalogPermissions.slice()}))}insertRolePermissions(e){e.permissions.forEach(n=>{this.addPermission(n,e.id)})}removeRolePermissions(e){e.permissions.forEach(n=>{if(this.ctrlSelPermissions[n.id]){let i=this.ctrlSelPermissions[n.id].roles.findIndex(a=>a==e.id);if(i>=0&&this.ctrlSelPermissions[n.id].roles.splice(i,1),0==this.ctrlSelPermissions[n.id].roles.length){let a=this.selectedPermissions.findIndex(r=>r.id==n.id);a>=0&&this.removePermission(a)}}})}loadPermissions(e){this.selectedPermissions=[],this.ctrlSelPermissions={},e.forEach(n=>{this.addPermission(n)})}getSelectedPermissions(){return this.ctrlSelPermissions}toggleActivePermission(e,n){this.ctrlSelPermissions[e].active=n.checked,this.changeDetected.emit(!0)}addPermissionEvent(e){this.addPermission(e.option.value),e.option.deselect(),this.permissionControl.setValue("")}addPermission(e,n){if(!this.ctrlSelPermissions[e.id]){this.selectedPermissions.push(e);let i=!0;e.pivot&&e.pivot.user_id&&(i=1==e.pivot.status),this.ctrlSelPermissions[e.id]={roles:[],active:i},this.changeDetected.emit(!0)}n&&this.ctrlSelPermissions[e.id].roles.findIndex(a=>a==n)<0&&this.ctrlSelPermissions[e.id].roles.push(n)}removePermission(e){let n=this.selectedPermissions[e];n&&(this.selectedPermissions.splice(e,1),delete this.ctrlSelPermissions[n.id],this.changeDetected.emit(!0))}displayFn(e){return""}_filter(e){const n=e.toLowerCase();return this.catalogPermissions.filter(i=>i.description.toLowerCase().includes(n))}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["tab-permissions"]],outputs:{changeDetected:"changeDetected"},decls:18,vars:13,consts:[[1,"flex-column","flex-gap",2,"height","100%"],[2,"padding","5px"],["appearance","outline",1,"small-search-input"],["matInput","","type","text","placeholder","Permisos","autocomplete","off",3,"formControl","matAutocomplete"],["matPrefix",""],["matSuffix",""],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["autoPermissions","matAutocomplete"],["disabled","","class","no-results-found",4,"ngIf"],["class","permission-item",3,"value","disabled",4,"ngFor","ngForOf"],[1,"flex-fill","permissions-panel","mat-elevation-z2"],["role","list","dense",""],["role","listitem","class","permission-item",4,"ngFor","ngForOf"],["disabled","",1,"no-results-found"],[1,"permission-item",3,"value","disabled"],[1,"label"],[1,"permission-group"],[4,"ngIf"],["class","root-access",4,"ngIf"],[1,"root-access"],["role","listitem",1,"permission-item"],[1,"flex-row"],[1,"label","flex-fill"],[1,"action-button"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["color","primary",3,"checked","change",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["color","primary",3,"checked","change"]],template:function(n,i){if(1&n&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-form-field",2),t._UZ(3,"input",3),t.TgZ(4,"mat-icon",4),t._uU(5,"keyboard"),t.qZA(),t.TgZ(6,"span",5),t._uU(7),t.ALo(8,"number"),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(r){return i.addPermissionEvent(r)}),t.YNc(12,mt,2,0,"mat-option",8)(13,pt,7,6,"mat-option",9),t.ALo(14,"async"),t.qZA()()(),t.TgZ(15,"div",10)(16,"mat-list",11),t.YNc(17,ht,10,5,"mat-list-item",12),t.qZA()()()),2&n){const a=t.MAs(11);let r;t.xp6(3),t.Q6J("formControl",i.permissionControl)("matAutocomplete",a),t.xp6(4),t.hij("\xa0(",t.lcZ(8,7,null==(r=t.lcZ(9,9,i.filteredPermissions))?null:r.length),")\xa0"),t.xp6(3),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngIf",0==i.catalogPermissions.length),t.xp6(1),t.Q6J("ngForOf",t.lcZ(14,11,i.filteredPermissions)),t.xp6(4),t.Q6J("ngForOf",i.selectedPermissions)}},dependencies:[d.sg,d.O5,l.Fj,l.JJ,h.RK,v.Hw,U.Nt,p.KE,p.qo,p.R9,M.i$,M.Tg,k.a8,O.ey,P.XC,P.ZL,ct.Rr,l.oH,d.Ov,d.JJ],styles:[".permissions-panel[_ngcontent-%COMP%]{overflow:auto;padding:5px}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]{height:auto!important;min-height:48px;padding-right:0}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}.permission-group[_ngcontent-%COMP%]{display:block;font-size:small;color:#708090}.permission-item[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid darkgray}.permission-item[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{padding:5px;display:flex;align-items:center}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;white-space:normal!important;width:-moz-fit-content;width:fit-content}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0;line-height:normal;height:20px;width:20px;font-size:24px}.root-access[_ngcontent-%COMP%]{font-size:smaller!important;text-align:center;font-weight:600;color:gold!important}"]})}return o})();function xt(o,s){1&o&&(t.TgZ(0,"mat-option",13),t._uU(1," No se encontraron Roles "),t.qZA())}function Ct(o,s){if(1&o&&(t.TgZ(0,"span",18),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.nivel.descripcion)}}function bt(o,s){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"playlist_add_check"),t.qZA())}function Zt(o,s){if(1&o&&(t.TgZ(0,"mat-option",14)(1,"div",15),t.YNc(2,Ct,2,1,"span",16)(3,bt,2,0,"mat-icon",17),t._uU(4),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw();t.Q6J("value",e)("disabled",n.controlSelRoles[e.id]),t.xp6(2),t.Q6J("ngIf",e.nivel),t.xp6(1),t.Q6J("ngIf",n.controlSelRoles[e.id]),t.xp6(1),t.hij("\xa0",e.name," ")}}function Tt(o,s){if(1&o&&(t.TgZ(0,"span",18),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.nivel.descripcion)}}function vt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item",19)(1,"div",20)(2,"div",21),t.YNc(3,Tt,2,1,"span",16),t.TgZ(4,"span")(5,"mat-icon"),t._uU(6,"admin_panel_settings"),t.qZA(),t._uU(7),t.qZA()(),t.TgZ(8,"span",22)(9,"button",23),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.removeRole(a))}),t.TgZ(10,"mat-icon"),t._uU(11,"do_not_disturb_on"),t.qZA()()()()()}if(2&o){const e=s.$implicit;t.xp6(3),t.Q6J("ngIf",e.nivel),t.xp6(4),t.hij("\xa0",e.name,"")}}let W=(()=>{class o{constructor(){this.roleSelected=new t.vpe,this.roleRemoved=new t.vpe,this.changeDetected=new t.vpe}ngOnInit(){this.catalogRoles=[],this.roleControl=new l.NI,this.selectedRoles=[],this.controlSelRoles={}}initCatalogRoles(e){e&&(this.catalogRoles=e),this.filteredRoles=this.roleControl.valueChanges.pipe((0,N.O)(""),(0,g.U)(n=>{const i="string"==typeof n?n:n?.name;return i?this._filter(i):this.catalogRoles.slice()}))}loadRoles(e){e.forEach(n=>{this.addRole(n)})}getSelectedRolesIds(){return Object.keys(this.controlSelRoles)}addRoleEvent(e){let n=e.option.value;this.addRole(n),e.option.deselect(),this.roleControl.setValue(""),this.roleSelected.emit(n)}addRole(e){this.controlSelRoles[e.id]||(this.selectedRoles.push(e),this.controlSelRoles[e.id]=!0,this.changeDetected.emit(!0))}removeRole(e){let n=this.selectedRoles[e];n&&(this.selectedRoles.splice(e,1),delete this.controlSelRoles[n.id],this.roleRemoved.emit(n),this.changeDetected.emit(!0))}displayFn(e){return""}_filter(e){const n=e.toLowerCase();return this.catalogRoles.filter(i=>i.name.toLowerCase().includes(n))}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["tab-roles"]],outputs:{roleSelected:"roleSelected",roleRemoved:"roleRemoved",changeDetected:"changeDetected"},decls:18,vars:14,consts:[[1,"flex-column","flex-gap",2,"height","100%"],[2,"padding","5px"],["appearance","outline",1,"small-search-input"],["matInput","","type","text","placeholder","Roles","autocomplete","off",3,"formControl","matAutocomplete"],["matPrefix",""],["matSuffix",""],["autoActiveFirstOption","",1,"autocomplete-fix",3,"classList","displayWith","optionSelected"],["autoRoles","matAutocomplete"],["disabled","","class","no-results-found",4,"ngIf"],["class","role-item",3,"value","disabled",4,"ngFor","ngForOf"],[1,"flex-fill","roles-panel","mat-elevation-z2"],["role","list","dense",""],["role","listitem","class","role-item",4,"ngFor","ngForOf"],["disabled","",1,"no-results-found"],[1,"role-item",3,"value","disabled"],[1,"label"],["class","role-group",4,"ngIf"],[4,"ngIf"],[1,"role-group"],["role","listitem",1,"role-item"],[1,"flex-row"],[1,"flex-fill","label"],[1,"action-button"],["mat-icon-button","","color","warn",3,"click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-form-field",2),t._UZ(3,"input",3),t.TgZ(4,"mat-icon",4),t._uU(5,"keyboard"),t.qZA(),t.TgZ(6,"span",5),t._uU(7),t.ALo(8,"number"),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(r){return i.addRoleEvent(r)}),t.YNc(12,xt,2,0,"mat-option",8)(13,Zt,5,5,"mat-option",9),t.ALo(14,"async"),t.qZA()()(),t.TgZ(15,"div",10)(16,"mat-list",11),t.YNc(17,vt,12,2,"mat-list-item",12),t.qZA()()()),2&n){const a=t.MAs(11);let r;t.xp6(3),t.Q6J("formControl",i.roleControl)("matAutocomplete",a),t.xp6(4),t.hij("\xa0(",t.lcZ(8,8,null==(r=t.lcZ(9,10,i.filteredRoles))?null:r.length),")\xa0"),t.xp6(3),t.Q6J("classList","autocomplete-fix")("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngIf",0==i.catalogRoles.length),t.xp6(1),t.Q6J("ngForOf",t.lcZ(14,12,i.filteredRoles)),t.xp6(4),t.Q6J("ngForOf",i.selectedRoles)}},dependencies:[d.sg,d.O5,l.Fj,l.JJ,h.RK,v.Hw,U.Nt,p.KE,p.qo,p.R9,M.i$,M.Tg,k.a8,O.ey,P.XC,P.ZL,l.oH,d.Ov,d.JJ],styles:[".roles-panel[_ngcontent-%COMP%]{overflow:auto;padding:5px}.roles-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]{height:auto!important;min-height:48px;padding-right:0}.roles-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}.role-group[_ngcontent-%COMP%]{display:block;font-size:small;color:#708090}.role-item[_ngcontent-%COMP%]{width:100%}.role-item[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid darkgray}.role-item[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{padding:5px;display:flex;align-items:center}.role-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;align-items:center;white-space:normal!important;width:-moz-fit-content;width:fit-content;font-weight:500}.role-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0;line-height:normal;height:20px;width:20px;font-size:24px}"]})}return o})();var Z=c(553),L=c(1474);let j=(()=>{class o{constructor(e){this.http=e,this.url_usuarios=`${Z.N.base_url}/user`,this.url_usuarios_catalogos=`${Z.N.base_url}/user-catalogs`,this.url_grupo_unidades=`${Z.N.base_url}/grupo-cargar-unidades`,this.url_change_status=`${Z.N.base_url}/change-user-status/`}obtenerUsuarios(e){return this.http.get(this.url_usuarios,{params:e}).pipe((0,g.U)(n=>n))}verUsuario(e){return this.http.get(this.url_usuarios+"/"+e,{}).pipe((0,g.U)(n=>n))}guardarUsuario(e){return this.http.post(this.url_usuarios,e).pipe((0,g.U)(n=>n))}cambiarStatus(e,n){return this.http.put(this.url_change_status+e,n)}obtenerCatalogosUsuarios(){return this.http.get(this.url_usuarios_catalogos,{}).pipe((0,g.U)(e=>e))}obtenerUnidadesGrupo(e){return this.http.get(this.url_grupo_unidades+"/"+e,{})}enviarCorreoRestaurar(e){return this.http.post(`${Z.N.base_url}/send-reset-password`,e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(L.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Q=c(6385),E=c(4104),q=c(7988),$=c(3176),J=c(2596),V=c(2202),F=c(6007),Ut=c(2208);const wt=["inputPassword"];function Pt(o,s){if(1&o&&(t.TgZ(0,"div")(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"span",10),t._uU(4),t.qZA()()),2&o){const e=t.oxw();t.Gre("label-info status-label status-",e.statusDesc[e.statusUser].key,""),t.xp6(2),t.Oqu(e.statusDesc[e.statusUser].icon),t.xp6(2),t.hij("\xa0Usuario: ",e.statusDesc[e.statusUser].description,"")}}function At(o,s){1&o&&(t.TgZ(0,"div",45),t._uU(1," Nuevo Usuario "),t.qZA())}function kt(o,s){if(1&o&&(t.TgZ(0,"button",46)(1,"mat-icon"),t._uU(2,"settings"),t.qZA(),t.TgZ(3,"span",10),t._uU(4,"Opciones\xa0"),t.qZA(),t.TgZ(5,"mat-icon"),t._uU(6,"arrow_drop_down"),t.qZA()()),2&o){const e=t.oxw(),n=t.MAs(7);t.Q6J("matMenuTriggerFor",n)("disabled",e.isLoading||e.isSaving)}}function yt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.enviarCorreo())}),t.TgZ(1,"mat-icon"),t._uU(2,"outgoing_mail"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Cambio de Contrase\xf1a"),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.isSendingEmail||e.configPass)}}function Mt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cambiarStatus(2))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Activar Usuario"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.statusDesc[2].icon)}}function qt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cambiarStatus(4))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Banear Usuario"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.statusDesc[4].icon)}}function Dt(o,s){1&o&&(t.TgZ(0,"div",49),t._uU(1," \u27e8\u27e8 root \u27e9\u27e9 "),t.qZA())}function Ot(o,s){1&o&&(t.TgZ(0,"div",50)(1,"mat-icon"),t._uU(2,"phone_iphone"),t.qZA()())}function Ft(o,s){if(1&o&&(t.TgZ(0,"div",51)(1,"span",52),t._uU(2,"\xdaltimo Inicio de Sesi\xf3n:"),t.qZA(),t.TgZ(3,"span",53),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Oqu(e.lastLogin?t.xi3(5,1,e.lastLogin,"dd - MMM - y | h:mm a"):"Nunca")}}function St(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.resizeDialog())}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("matTooltip",e.dialogMaxSize?"Restaurar":"Maximizar")("matTooltipPosition","left"),t.xp6(2),t.Oqu(e.dialogMaxSize?"fit_screen":"fullscreen")}}function It(o,s){if(1&o&&t._UZ(0,"mat-progress-bar",55),2&o){const e=t.oxw();t.Q6J("mode",e.isSaving||e.isSendingEmail?"indeterminate":"query")("color",e.isSaving||e.isSendingEmail?"accent":"primary")}}function Lt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es obligatorio"),t.qZA())}function Jt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"El Correo Electr\xf3nico es obligatorio"),t.qZA())}function Rt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Formato incorrecto"),t.qZA())}function Nt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"El Correo Electr\xf3nico esta repetido"),t.qZA())}function Qt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"El Nombre de Usuario es obligatorio"),t.qZA())}function Et(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Debe contener al menos 4 caracteres"),t.qZA())}function Yt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"El Nombre de Usuario esta repetido"),t.qZA())}function zt(o,s){1&o&&(t.TgZ(0,"div",56)(1,"div",57),t._uU(2,"Se enviar\xe1 un correo de activaci\xf3n"),t.qZA()())}function Gt(o,s){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"check_circle"),t.qZA())}function Ht(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Debe contener al menos 8 caracteres"),t.qZA())}function Bt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"La Contrase\xf1a es obligatoria"),t.qZA())}function Kt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"La Contrase\xf1a no es segura"),t.qZA())}function Wt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"La Contrase\xf1a debe ser diferente"),t.qZA())}function jt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Confirmar Contrase\xf1a"),t.qZA())}function $t(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Las contrase\xf1as no coinciden"),t.qZA())}function Vt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",21)(1,"mat-form-field",22)(2,"mat-label"),t.YNc(3,Gt,2,0,"mat-icon",24),t._uU(4," Contrase\xf1a:"),t.qZA(),t._UZ(5,"input",58,59),t.TgZ(7,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hidePassword=!i.hidePassword)}),t.TgZ(8,"mat-icon"),t._uU(9),t.qZA()(),t.TgZ(10,"mat-autocomplete",61,62)(12,"mat-option",63)(13,"strength-checker",64),t.NdJ("passwordStrength",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.passwordValid(i))}),t.qZA()()(),t.TgZ(14,"mat-hint",29),t._uU(15),t.qZA(),t.YNc(16,Ht,2,0,"mat-error",24)(17,Bt,2,0,"mat-error",24)(18,Kt,2,0,"mat-error",24)(19,Wt,2,0,"mat-error",24),t.qZA(),t.TgZ(20,"mat-form-field",22)(21,"mat-label"),t._uU(22,"Confirmar Contrase\xf1a:"),t.qZA(),t._UZ(23,"input",65),t.TgZ(24,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideConfirmPassword=!i.hideConfirmPassword)}),t.TgZ(25,"mat-icon"),t._uU(26),t.qZA()(),t.TgZ(27,"mat-hint",29),t._uU(28),t.qZA(),t.YNc(29,jt,2,0,"mat-error",24)(30,$t,2,0,"mat-error",24),t.qZA()()}if(2&o){const e=t.MAs(11),n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.formUsuario.get("valid_password").value),t.xp6(2),t.Q6J("type",n.hidePassword?"password":"text")("matAutocomplete",e),t.xp6(2),t.uIk("aria-label","Hide password")("aria-pressed",n.hidePassword),t.xp6(2),t.Oqu(n.hidePassword?"visibility_off":"visibility"),t.xp6(1),t.Q6J("panelWidth","auto"),t.xp6(2),t.Q6J("value",!0),t.xp6(1),t.Q6J("passwordToVerify",n.formUsuario.get("password").value),t.xp6(2),t.Oqu(n.formUsuario.get("password").value.length||0),t.xp6(1),t.Q6J("ngIf",n.formUsuario.get("password").hasError("minlength")),t.xp6(1),t.Q6J("ngIf",n.formUsuario.get("password").hasError("required")),t.xp6(1),t.Q6J("ngIf",n.formUsuario.get("password").hasError("lowstrenght")),t.xp6(1),t.Q6J("ngIf",n.formUsuario.get("password").hasError("samepassword")),t.xp6(4),t.Q6J("type",n.hideConfirmPassword?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",n.hideConfirmPassword),t.xp6(2),t.Oqu(n.hideConfirmPassword?"visibility_off":"visibility"),t.xp6(2),t.Oqu(n.formUsuario.get("confirm_password").value.length||0),t.xp6(1),t.Q6J("ngIf",n.formUsuario.get("confirm_password").hasError("required")),t.xp6(1),t.Q6J("ngIf",n.formUsuario.get("confirm_password").hasError("fieldMatch"))}}function Xt(o,s){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"security"),t.qZA(),t.TgZ(2,"span",10),t._uU(3,"\xa0Acceso / Seguridad"),t.qZA())}function te(o,s){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"face"),t.qZA(),t.TgZ(2,"span",10),t._uU(3,"\xa0Avatar"),t.qZA())}const ee=o=>({selected:o});function oe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-grid-tile")(1,"div",69)(2,"div",70)(3,"div",71),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.selectAvatar(a.file))}),t._UZ(4,"mat-icon",72),t.qZA()()()()}if(2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.VKq(2,ee,n.selectedAvatar==e.file)),t.xp6(2),t.s9C("svgIcon",e.id)}}function ie(o,s){if(1&o&&(t.TgZ(0,"mat-card",66)(1,"mat-grid-list",67),t.YNc(2,oe,5,4,"mat-grid-tile",68),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.s9C("cols",e.avatarRowCount),t.xp6(1),t.Q6J("ngForOf",e.avatarsList)}}let ne=(()=>{class o{constructor(e,n,i,a,r,u){this.dialogRef=e,this.inData=n,this.formBuilder=i,this.usuariosService=a,this.breakpointObserver=r,this.dialog=u,this.destroyed=new R.x,this.displayNameMap=new Map([[C.u3.XSmall,"xs"],[C.u3.Small,"sm"],[C.u3.Medium,"md"],[C.u3.Large,"lg"],[C.u3.XLarge,"xl"]]),this.statusDesc=H,r.observe([C.u3.XSmall,C.u3.Small,C.u3.Medium,C.u3.Large,C.u3.XLarge]).pipe((0,lt.R)(this.destroyed)).subscribe(_=>{for(const x of Object.keys(_.breakpoints))_.breakpoints[x]&&(this.currentScreenSize=this.displayNameMap.get(x)??"Unknown")})}ngOnInit(){this.savedData=!1,this.isLoading=!0,this.dialogRef.addPanelClass("no-padding-dialog"),this.hidePassword=!0,this.hideConfirmPassword=!0,this.avatarsList=rt.H,this.selectedAvatar=this.avatarsList[0].file,this.avatarRowCount=10,this.changesDetected=!1,this.listaGrupos=[],this.formUsuario=this.formBuilder.group({id:[""],name:["",l.kI.required],email:["",[l.kI.required,l.kI.email]],username:["",[l.kI.required,l.kI.minLength(4)]],avatar:[this.selectedAvatar],status:[""],mail_password:[!0],roles:[[]],permissions:[{}],acceso_unidades:[{}]}),this.usuariosService.obtenerCatalogosUsuarios().subscribe({next:e=>{let n=e.data;this.listaGrupos=e.data.grupos,n.permisos&&this.tabPermissions.initCatalogPermisssions(n.permisos),n.roles&&this.tabRoles.initCatalogRoles(n.roles),this.inData.id?this.usuariosService.verUsuario(this.inData.id).subscribe({next:i=>{if(this.formUsuario.patchValue(i.data),this.isRoot=i.data.is_superuser,i.data.permissions.length>0&&this.tabPermissions.loadPermissions(i.data.permissions),i.data.roles.length>0){let a=[];i.data.roles.forEach(r=>{let u=n.roles.find(_=>_.id==r.id);a.push(u),this.tabPermissions.insertRolePermissions(u)}),this.tabRoles.loadRoles(a)}this.formUsuario.markAllAsTouched(),this.setConfigForm(),this.selectedAvatar=i.data.avatar,this.statusUser=i.data.status,this.lastLogin=i.data.last_login_at,this.isLoading=!1},error:i=>{this.alertPanel.showError(i.error.message),this.isLoading=!1}}):(this.setConfigForm(),this.isLoading=!1)},error:e=>{this.alertPanel.showError(e.error.message),this.isLoading=!1}})}ngAfterViewInit(){("sm"==this.currentScreenSize||"xs"==this.currentScreenSize)&&(this.resizeDialog(),this.avatarRowCount="xs"==this.currentScreenSize?4:8)}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}setConfigForm(){this.formUsuario.valueChanges.subscribe(e=>{this.changesDetected=!0})}toggleConfigPass(){this.configPass?(this.formUsuario.get("password")&&(this.formUsuario.removeControl("confirm_password"),this.formUsuario.removeControl("password"),this.formUsuario.removeControl("valid_password")),this.formUsuario.get("mail_password").patchValue(!0)):(this.formUsuario.get("password")||(this.hidePassword=!0,this.hideConfirmPassword=!0,this.formUsuario.addControl("password",new l.NI("",[l.kI.required,l.kI.minLength(8)])),this.formUsuario.addControl("confirm_password",new l.NI("",[l.kI.required,B.w.fieldMatchValidator("password")])),this.formUsuario.addControl("valid_password",new l.NI(!1,l.kI.requiredTrue)),setTimeout(()=>{this.inputPassword&&this.inputPassword.nativeElement.focus()},10)),this.formUsuario.get("mail_password").patchValue(!1)),this.configPass=!this.configPass}cambiarStatus(e){let n,i,a,r;4==e?(n="Esta seguro de Banear a este usuario?",a="Banear",i="block",r="warn"):(n="Esta seguro de Activar a este usuario?",a="Activar",i="done_outline",r="primary");const u=this.dialog.open(A.N,{width:"500px",data:{title:"Modificar Estatus",message:n,hasOKBtn:!0,btnColor:r,btnText:a,btnIcon:i}});let _={status:e};u.afterClosed().subscribe(x=>{x&&(this.isSaving=!0,this.usuariosService.cambiarStatus(this.inData.id,_).subscribe(D=>{this.isSaving=!1,this.statusUser=D.status,this.savedData=!0}))})}guardarUsuario(e){if(this.alertPanel.closePanel(),this.formUsuario.valid||e){this.isSaving=!0,e&&this.formUsuario.get("status").patchValue(e);let n=this.formUsuario.value,i=this.tabRoles.getSelectedRolesIds();n.roles=i;let a=this.tabPermissions.getSelectedPermissions(),r={};for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const _=a[u];0==_.roles.length?r[u]={status:!0}:_.active||(r[u]={status:!1})}n.permissions=r,this.usuariosService.guardarUsuario(n).subscribe({next:u=>{this.isSaving=!1,this.statusUser=u.data.status,this.inData.id=u.data.id,this.formUsuario.get("id").patchValue(u.data.id),this.formUsuario.get("status").patchValue(u.data.status),this.changesDetected=!1,u.hasOwnProperty("mail_sent")?u.mail_sent?this.alertPanel.showSuccess("Datos Guardados. Se envi\xf3 Correo de Confirmaci\xf3n de cuenta.",3):this.alertPanel.showWarning("Datos Guardados. Ocurrio un error al enviar el Correo de Confirmaci\xf3n de cuenta."):this.alertPanel.showSuccess("Datos guardados con \xe9xito",3),this.savedData=!0},error:u=>{if("form_validation"==u.error.error_type){for(const _ in u.error.data)if(Object.prototype.hasOwnProperty.call(u.error.data,_)){let D={};D[u.error.data[_]]=!0,this.formUsuario.get(_).setErrors(D)}this.alertPanel.showError(u.error.message)}else this.alertPanel.showError(u.error.message);this.isSaving=!1}})}}enviarCorreo(){this.formUsuario.get("email").valid&&this.dialog.open(A.N,{data:{message:"Se enviara un correo electronico para que el usuario pueda restaurar su contrase\xf1a",hasOKBtn:!0,btnText:"Enviar Correo",btnIcon:"send"}}).afterClosed().subscribe(i=>{if(i){this.isSendingEmail=!0;let a={user_email:this.formUsuario.get("email").value};this.usuariosService.enviarCorreoRestaurar(a).subscribe({next:r=>{console.log("mailto",r),this.isSendingEmail=!1,this.alertPanel.showInfo("Se envi\xf3 Correo Electr\xf3nico con \xe9xito",3)},error:r=>{this.alertPanel.showError(r.error.message?r.error.message:"Error al enviar Correo Electr\xf3nico"),this.isSendingEmail=!1}})}})}addFromRole(e){this.tabPermissions.insertRolePermissions(e)}removeFromRole(e){this.tabPermissions.removeRolePermissions(e)}selectAvatar(e){this.selectedAvatar=e,this.formUsuario.get("avatar").patchValue(e)}passwordValid(e){this.formUsuario.get("valid_password").patchValue(e),this.formUsuario.get("confirm_password").patchValue(""),e||this.formUsuario.get("password").setErrors({lowstrenght:!0})}resizeDialog(){this.dialogMaxSize?(this.dialogRef.updateSize("80%","60%"),this.dialogMaxSize=!1):(this.dialogRef.updateSize("100%","100%"),this.dialogMaxSize=!0)}cancelarAccion(){this.cerrar()}cerrar(){this.dialogRef.close(this.savedData)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(f.so),t.Y36(f.WI),t.Y36(l.qu),t.Y36(j),t.Y36(C.Yg),t.Y36(f.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dialogo-usuario"]],viewQuery:function(n,i){if(1&n&&(t.Gf(wt,5),t.Gf(b.G,5),t.Gf(K,5),t.Gf(W,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.inputPassword=a.first),t.iGM(a=t.CRH())&&(i.alertPanel=a.first),t.iGM(a=t.CRH())&&(i.tabPermissions=a.first),t.iGM(a=t.CRH())&&(i.tabRoles=a.first)}},decls:79,vars:36,consts:[[1,"flex-column",2,"height","100%","overflow","hidden","flex","1 1 0%",3,"keydown.escape"],[1,"dialog-toolbar"],[1,"flex-row"],[3,"class",4,"ngIf"],["class","label-info",4,"ngIf"],["mat-button","","aria-label","Menu de Usuarios",3,"matMenuTriggerFor","disabled",4,"ngIf"],["menuUsuario","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-button","",3,"disabled","click"],[1,"hide-xs"],[1,"flex-fill"],["class","root-access",4,"ngIf"],["class","label-info screen-size-icon",4,"ngIf"],["class","last-login hide-xs",4,"ngIf"],["mat-button","","class","boton-accion","tabindex","-1",3,"matTooltip","matTooltipPosition","click",4,"ngIf"],["mat-button","","tabindex","-1",1,"boton-accion","boton-cerrar",3,"click"],[3,"mode","color",4,"ngIf"],[1,"flex-fill","flex-column",2,"padding","8px","overflow","auto"],[1,"flex-fill","flex-column","flex-gap"],[1,"flex-column","flex-gap","xs-max-height-user-form",2,"padding","8px",3,"formGroup"],[1,"flex-row","flex-xs-column","flex-fill","flex-gap"],["appearance","fill",1,"flex-fill"],["type","text","matInput","","autocomplete","off","formControlName","name","placeholder","Nombre Completo","required","","cdkFocusInitial",""],[4,"ngIf"],["type","text","matInput","","autocomplete","off","id","email","formControlName","email","placeholder","Correo Electr\xf3nico","required",""],["appearance","fill"],["type","text","matInput","","autocomplete","off","id","username","formControlName","username","placeholder","Nombre de Usuario","required",""],["mat-icon-button","","matSuffix","","tabindex","-1",3,"matTooltip","click"],["align","end"],["class","config-pass flex-fill",4,"ngIf"],["class","flex-row  flex-xs-column flex-fill flex-gap",4,"ngIf"],["animationDuration","0ms",1,"flex-fill","full-height-tabs","user-tabs",3,"color"],["mat-tab-label",""],[1,"flex-row","flex-xs-column",2,"overflow","hidden","height","100%"],[1,"flex-fill","xs-height-50",2,"padding","5px"],[2,"height","100%",3,"roleSelected","roleRemoved","changeDetected"],[2,"height","auto",3,"changeDetected"],[1,"flex-row","flex-gap",2,"overflow-x","hidden","height","calc(100% - 10px)","padding","5px"],[1,"flex-column","flex-fill",2,"padding","3px"],[2,"display","flex","align-items","center"],[1,"avatar-row-count"],[1,"flex-fill",3,"max","min","step","showTickMarks"],["matSliderThumb","",3,"ngModel","ngModelChange"],["class","flex-fill","style","overflow: auto;",4,"ngIf"],[1,"label-info"],["mat-button","","aria-label","Menu de Usuarios",3,"matMenuTriggerFor","disabled"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],[1,"root-access"],[1,"label-info","screen-size-icon"],[1,"last-login","hide-xs"],[1,"label"],[1,"value"],["mat-button","","tabindex","-1",1,"boton-accion",3,"matTooltip","matTooltipPosition","click"],[3,"mode","color"],[1,"config-pass","flex-fill"],[1,"mensaje"],["matInput","","formControlName","password","placeholder","Contrase\xf1a","required","",3,"type","matAutocomplete"],["inputPassword",""],["mat-icon-button","","matSuffix","","tabindex","-1",3,"click"],[3,"panelWidth"],["autoPass","matAutocomplete"],["disabled","",2,"opacity","1 !important",3,"value"],["barLabel","Fortaleza: ",3,"passwordToVerify","passwordStrength"],["matInput","","formControlName","confirm_password","placeholder","ConfirmarContrase\xf1a","required","",3,"type"],[1,"flex-fill",2,"overflow","auto"],["rowHeight","1:1",2,"overflow","auto",3,"cols"],[4,"ngFor","ngForOf"],[1,"item-tile-wrapper"],[1,"flex-column","flex-fill","flex-gap","avatar-icon",3,"ngClass"],[1,"flex-fill",3,"click"],[2,"width","100%","height","100%",3,"svgIcon"]],template:function(n,i){1&n&&(t.TgZ(0,"section",0),t.NdJ("keydown.escape",function(){return i.cancelarAccion()},!1,t.evT),t.TgZ(1,"section",1)(2,"div",2),t.YNc(3,Pt,5,5,"div",3)(4,At,2,0,"div",4)(5,kt,7,2,"button",5),t.TgZ(6,"mat-menu",null,6),t.YNc(8,yt,5,1,"button",7),t._UZ(9,"mat-divider"),t.YNc(10,Mt,5,1,"button",8)(11,qt,5,1,"button",8),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return i.guardarUsuario()}),t.TgZ(13,"mat-icon"),t._uU(14),t.qZA(),t.TgZ(15,"span",10),t._uU(16,"\xa0Guardar"),t.qZA()(),t._UZ(17,"div",11),t.YNc(18,Dt,2,0,"div",12)(19,Ot,3,0,"div",13)(20,Ft,6,4,"div",14)(21,St,3,3,"button",15),t.TgZ(22,"button",16),t.NdJ("click",function(){return i.cerrar()}),t.TgZ(23,"mat-icon"),t._uU(24,"close"),t.qZA()()()(),t.YNc(25,It,1,2,"mat-progress-bar",17),t.TgZ(26,"section"),t._UZ(27,"alert-panel"),t.qZA(),t.TgZ(28,"section",18)(29,"div",19)(30,"mat-card",20)(31,"div",21)(32,"mat-form-field",22)(33,"mat-label"),t._uU(34,"Nombre Completo: "),t.qZA(),t._UZ(35,"input",23),t.YNc(36,Lt,2,0,"mat-error",24),t.qZA(),t.TgZ(37,"mat-form-field",22)(38,"mat-label"),t._uU(39,"Correo Electr\xf3nico: "),t.qZA(),t._UZ(40,"input",25),t.YNc(41,Jt,2,0,"mat-error",24)(42,Rt,2,0,"mat-error",24)(43,Nt,2,0,"mat-error",24),t.qZA()(),t.TgZ(44,"div",21)(45,"mat-form-field",26)(46,"mat-label"),t._uU(47,"Usuario: "),t.qZA(),t._UZ(48,"input",27),t.TgZ(49,"button",28),t.NdJ("click",function(){return i.toggleConfigPass()}),t.TgZ(50,"mat-icon"),t._uU(51),t.qZA()(),t.TgZ(52,"mat-hint",29),t._uU(53),t.qZA(),t.YNc(54,Qt,2,0,"mat-error",24)(55,Et,2,0,"mat-error",24)(56,Yt,2,0,"mat-error",24),t.qZA(),t.YNc(57,zt,3,0,"div",30)(58,Vt,31,21,"div",31),t.qZA()(),t.TgZ(59,"mat-tab-group",32)(60,"mat-tab"),t.YNc(61,Xt,4,0,"ng-template",33),t.TgZ(62,"div",34)(63,"div",35)(64,"tab-roles",36),t.NdJ("roleSelected",function(r){return i.addFromRole(r)})("roleRemoved",function(r){return i.removeFromRole(r)})("changeDetected",function(){return i.changesDetected=!0}),t.qZA()(),t.TgZ(65,"div",35)(66,"tab-permissions",37),t.NdJ("changeDetected",function(){return i.changesDetected=!0}),t.qZA()()()(),t.TgZ(67,"mat-tab"),t.YNc(68,te,4,0,"ng-template",33),t.TgZ(69,"div",38)(70,"div",39)(71,"div",2)(72,"div",40)(73,"span",41),t._uU(74),t.qZA()(),t.TgZ(75,"mat-slider",42)(76,"input",43),t.NdJ("ngModelChange",function(r){return i.avatarRowCount=r}),t.qZA()(),t._UZ(77,"div",11),t.qZA(),t.YNc(78,ie,3,2,"mat-card",44),t.qZA()()()()()()()),2&n&&(t.xp6(3),t.Q6J("ngIf",i.statusUser),t.xp6(1),t.Q6J("ngIf",!i.statusUser),t.xp6(1),t.Q6J("ngIf",i.statusUser),t.xp6(3),t.Q6J("ngIf",i.inData.id),t.xp6(2),t.Q6J("ngIf",3==i.statusUser||4==i.statusUser),t.xp6(1),t.Q6J("ngIf",4!=i.statusUser),t.xp6(1),t.Q6J("disabled",i.isLoading||i.isSaving||!i.formUsuario.valid||i.isSendingEmail),t.xp6(2),t.Oqu(i.changesDetected?"save_as":"save"),t.xp6(4),t.Q6J("ngIf",i.isRoot),t.xp6(1),t.Q6J("ngIf","xs"==i.currentScreenSize||"sm"==i.currentScreenSize),t.xp6(1),t.Q6J("ngIf",i.statusUser),t.xp6(1),t.Q6J("ngIf","xs"!=i.currentScreenSize&&"sm"!=i.currentScreenSize),t.xp6(4),t.Q6J("ngIf",i.isLoading||i.isSaving||i.isSendingEmail),t.xp6(5),t.Q6J("formGroup",i.formUsuario),t.xp6(6),t.Q6J("ngIf",i.formUsuario.get("name").hasError("required")),t.xp6(5),t.Q6J("ngIf",i.formUsuario.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.formUsuario.get("email").hasError("email")),t.xp6(1),t.Q6J("ngIf",i.formUsuario.get("email").hasError("duplicated")),t.xp6(6),t.Q6J("matTooltip",i.configPass?"":"Escribir Contrase\xf1a"),t.uIk("aria-label","Config Pass")("aria-pressed",i.configPass),t.xp6(2),t.Oqu(i.configPass?"lock_reset":"keyboard"),t.xp6(2),t.Oqu((null==i.formUsuario.get("username").value?null:i.formUsuario.get("username").value.length)||0),t.xp6(1),t.Q6J("ngIf",i.formUsuario.get("username").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.formUsuario.get("username").hasError("minlength")),t.xp6(1),t.Q6J("ngIf",i.formUsuario.get("username").hasError("duplicated")),t.xp6(1),t.Q6J("ngIf",!i.inData.id&&!i.configPass),t.xp6(1),t.Q6J("ngIf",i.configPass),t.xp6(1),t.Q6J("color","primary"),t.xp6(15),t.Oqu(i.avatarRowCount),t.xp6(1),t.Q6J("max",10)("min",3)("step",1)("showTickMarks",!0),t.xp6(1),t.Q6J("ngModel",i.avatarRowCount),t.xp6(2),t.Q6J("ngIf",i.avatarsList))},dependencies:[d.mk,d.sg,d.O5,l.Fj,l.JJ,l.JL,l.Q7,l.On,h.lW,h.RK,v.Hw,U.Nt,p.KE,p.hX,p.bx,p.TO,p.R9,Q.d,E.uD,E.uX,E.SP,k.a8,O.ey,q.VK,q.OP,q.p6,P.XC,P.ZL,$.Il,$.DX,J.gM,V.pH,V.$5,F.pW,l.sg,l.u,b.G,Ut.P,K,W,d.uU],styles:["@media (max-width: 599.98px){.xs-height-50[_ngcontent-%COMP%]{height:50%}.xs-max-height-user-form[_ngcontent-%COMP%]{max-height:20%;overflow:auto}}.root-access[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;font-weight:600;color:gold!important;display:flex;align-items:center;cursor:default}.user-tabs[_ngcontent-%COMP%]{background-color:#e6e6fa}.config-pass[_ngcontent-%COMP%]{padding:8px;border:1px solid lightgray;background-color:#87cefa80;display:flex;align-items:center}.config-pass[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{width:100%;font-weight:400;font-size:large;color:#515050;padding:8px;text-align:center;cursor:default}.item-tile-wrapper[_ngcontent-%COMP%]{padding:8px;position:absolute;inset:0}.avatar-icon[_ngcontent-%COMP%]{padding:5px;border:1px solid rgba(0,0,0,0);border-radius:3px;cursor:pointer}.avatar-icon[_ngcontent-%COMP%]:hover{border:1px solid rgba(0,0,0,.25);background-color:#f5f5f5}.avatar-icon.selected[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.4);background-color:#4053bf}.avatar-row-count[_ngcontent-%COMP%]{padding:8px;text-align:center;border:1px solid rgba(0,0,0,.4);border-radius:15%;margin:5px;width:35px;cursor:default}.last-login[_ngcontent-%COMP%]{padding-right:5px;padding-top:4px}.last-login[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:small}.last-login[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#d3d3d3}.status-label.status-inactive[_ngcontent-%COMP%]{color:#bdbdbd!important;background-color:#4f4f4f!important}.status-label.status-active[_ngcontent-%COMP%]{--color: 120}.status-label.status-blocked[_ngcontent-%COMP%]{--color: 52}.status-label.status-banned[_ngcontent-%COMP%]{--color: 6}.status-label[_ngcontent-%COMP%]{color:hsl(var(--color),100%,75%);background-color:hsl(var(--color),100%,25%)}"]})}return o})();class se{constructor(){if(this.onMessage=new R.x,this.onError=new R.x,!Worker)throw new Error("WebWorker is not enabled");this.worker=new Worker(c.tu(new URL(c.p+c.u(48),c.b))),this.worker.onmessage=e=>{this.onMessage.next(e)},this.worker.onerror=e=>{this.onError.next(e)}}postMessage(s){this.worker.postMessage(s)}onmessage(){return this.onMessage.asObservable()}onerror(){return this.onError.asObservable()}terminate(){this.worker&&this.worker.terminate()}}var ae=c(217),re=c(5148),m=c(5313),w=c(1346);function le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cleanSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}2&o&&t.uIk("aria-label","Clean Query")("aria-pressed","cleanQuery")}function ce(o,s){1&o&&t._UZ(0,"mat-progress-bar",40)}function me(o,s){1&o&&(t.TgZ(0,"th",41),t._uU(1,"Estatus"),t.qZA())}function ue(o,s){if(1&o&&(t.TgZ(0,"td",42)(1,"div",43),t._UZ(2,"img",44),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA()()()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.s9C("src",e.avatar,t.LSH),t.xp6(1),t.Gre("status-",n.statusDesc[e.status].key," status-icon"),t.xp6(1),t.Oqu(n.statusDesc[e.status].icon)}}function de(o,s){1&o&&(t.TgZ(0,"th",45),t._uU(1,"Usuario"),t.qZA())}function pe(o,s){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.TgZ(2,"span",47),t._uU(3),t.qZA()()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.username," "),t.xp6(2),t.Oqu(e.email)}}function ge(o,s){1&o&&(t.TgZ(0,"th",48),t._uU(1,"Nombre Completo"),t.qZA())}function _e(o,s){if(1&o&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e.name)}}function fe(o,s){1&o&&(t.TgZ(0,"th",50),t._uU(1,"Correo"),t.qZA())}function he(o,s){if(1&o&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e.email)}}function xe(o,s){1&o&&(t.TgZ(0,"th",52),t._uU(1,"Ultima Sesi\xf3n"),t.qZA())}function Ce(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Nunca"),t.qZA())}function be(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t._UZ(3,"br"),t._uU(4),t.ALo(5,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,2,e.last_login_at,"dd - MMM - y"),""),t.xp6(3),t.hij(" ",t.xi3(5,5,e.last_login_at,"h:mm a")," ")}}function Ze(o,s){if(1&o&&(t.TgZ(0,"td",53),t.YNc(1,Ce,2,0,"span",54)(2,be,6,8,"span",54),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",!e.last_login_at),t.xp6(1),t.Q6J("ngIf",e.last_login_at)}}function Te(o,s){1&o&&(t.TgZ(0,"th",55),t._uU(1," Actualizado "),t.qZA())}function ve(o,s){if(1&o&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.updated_at,"dd - MMM - y"))}}function Ue(o,s){if(1&o&&(t.TgZ(0,"td",57),t._uU(1," --| Cargando Registros |-- "),t._UZ(2,"mat-progress-bar",40),t.qZA()),2&o){const e=t.oxw();t.uIk("colspan",e.displayedColumns.length)}}function we(o,s){if(1&o&&(t.TgZ(0,"td",57),t._uU(1," No se encontraron registros "),t.qZA()),2&o){const e=t.oxw();t.uIk("colspan",e.displayedColumns.length)}}function Pe(o,s){1&o&&t._UZ(0,"tr",58)}const Ae=(o,s)=>({id:o,status:s});function ke(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr",59),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDialogUser(a.id))}),t.qZA()}if(2&o){const e=s.$implicit;t.oxw();const n=t.MAs(50);t.Q6J("cdkContextMenuTriggerFor",n)("cdkContextMenuTriggerData",t.WLB(2,Ae,e.id,e.status))}}const X=o=>({hide:o});function ye(o,s){if(1&o&&t._UZ(0,"tr",60),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,X,!e.isLoadingResults))}}function Me(o,s){if(1&o&&t._UZ(0,"tr",60),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,X,!(null!=e.data&&0==e.data.length&&!e.isLoadingResults)))}}function qe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().id,a=t.oxw();return t.KtG(a.changeStatusUser(i,2))}),t.TgZ(1,"mat-icon"),t._uU(2,"done_outline"),t.qZA(),t._uU(3,"\xa0Activar Usuario"),t.qZA()}}function De(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().id,a=t.oxw();return t.KtG(a.changeStatusUser(i,4))}),t.TgZ(1,"mat-icon"),t._uU(2,"block"),t.qZA(),t._uU(3,"\xa0Banear Usuario"),t.qZA()}}function Oe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",61)(1,"button",62),t.NdJ("click",function(){const a=t.CHM(e).id,r=t.oxw();return t.KtG(r.openDialogUser(a))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t._uU(4,"\xa0Editar"),t.qZA(),t.YNc(5,qe,4,0,"button",63)(6,De,4,0,"button",64),t.qZA()}if(2&o){const e=s.status;t.xp6(5),t.Q6J("ngIf",4==e),t.xp6(1),t.Q6J("ngIf",4!=e)}}const Fe=()=>["loadingResults"],Se=()=>["noResultsFound"],Ie=()=>[25,50,100],Je=[{path:"",component:at,canActivate:[S.a]},{path:"usuarios",component:(()=>{class o{constructor(e,n,i){this.usuariosService=e,this.authService=n,this.dialog=i,this.statusDesc=H,this.pageSize=50,this.displayedColumns=["status","username","name","email","last_login_at","updated_at"],this.resultsLength=0}ngOnInit(){this.data=[],this.searchQuery="",setTimeout(()=>{this.applySearch()},10)}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.applySearch()}),this.paginator.page.subscribe(()=>{this.pageSize!=this.paginator.pageSize&&(this.paginator.pageIndex=0,this.pageSize=this.paginator.pageSize),this.applySearch()})}cleanSearch(){this.searchQuery=""}applySearch(){this.isLoadingResults=!0;let e={sort:this.sort.active,direction:this.sort.direction,page:this.paginator.pageIndex+1,per_page:this.paginator.pageSize,query:this.searchQuery};return this.data=[],this.usuariosService.obtenerUsuarios(e).subscribe({next:n=>{this.isLoadingResults=!1,this.resultsLength=n.data.total,this.data=n.data.data},error:n=>{this.alertPanel.showError(n.error.message),this.isLoadingResults=!1}})}changeStatusUser(e,n){let i,a,r,u;4==n?(i="Esta seguro de Banear a este usuario?",r="Banear",a="block",u="warn"):(i="Esta seguro de Activar a este usuario?",r="Activar",a="done_outline",u="primary");const _=this.dialog.open(A.N,{width:"500px",data:{title:"Modificar Estatus",message:i,hasOKBtn:!0,btnColor:u,btnText:r,btnIcon:a}});let x={status:n};_.afterClosed().subscribe(D=>{D&&this.usuariosService.cambiarStatus(e,x).subscribe(Mi=>{this.applySearch()})})}openDialogUser(e){let n={maxWidth:"100%",width:"80%",height:"60%",disableClose:!0,data:{}};e&&(n.data.id=e),this.dialog.open(ne,n).afterClosed().subscribe(a=>{console.log(`Dialog result: ${a}`),a&&this.applySearch()})}exportPDF(){if(!this.isLoadingPDF)return this.isLoadingPDF=!0,this.usuariosService.obtenerUsuarios({sort:this.sort.active,direction:this.sort.direction,query:this.searchQuery}).subscribe({next:n=>{if(n.data.length>0){let i=new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date);const a=new se;a.onmessage().subscribe(x=>{ae.saveAs(x.data,"Reporte-Usuarios ("+i+")"),a.terminate(),this.isLoadingPDF=!1}),a.onerror().subscribe(x=>{this.alertPanel.showError(x.message),this.isLoadingPDF=!1,a.terminate()});let r={},u=this.authService.getUserData();r.firmas=[{etiqueta:"REALIZ\xd3",nombre:u.name,cargo:"Usuario del Sistema"},{etiqueta:"REVIS\xd3",nombre:"",cargo:"Responsable del Sistema"}],a.postMessage({data:{items:n.data,config:r},reporte:"control-acceso/usuarios"})}else this.alertPanel.showInfo("No se encontraron resultados"),this.isLoadingPDF=!1},error:n=>{this.alertPanel.showError(n.error.message),this.isLoadingPDF=!1}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(j),t.Y36(re.e),t.Y36(f.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-lista-usuarios"]],viewQuery:function(n,i){if(1&n&&(t.Gf(T.NW,5),t.Gf(I.YE,5),t.Gf(b.G,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first),t.iGM(a=t.CRH())&&(i.alertPanel=a.first)}},decls:51,vars:17,consts:[[1,"flex-row","flex-gap","module-search-bar"],["appearance","fill",1,"flex-fill"],["matInput","","placeholder","Buscar usuario","autocomplete","off",3,"ngModel","ngModelChange","keyup.escape","keyup.enter"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],["mat-icon-button","",3,"disabled","click"],["svgIcon","pdf-icon"],["mat-raised-button","","color","primary",3,"matTooltip","click"],["mode","query",4,"ngIf"],[1,"table-card","flex-fill"],[1,"flex-column",2,"height","100%"],[1,"main-list-table","left-click-open","flex-fill"],["mat-table","","matSort","","matSortActive","updated_at","matSortDirection","desc",3,"dataSource"],["matColumnDef","status"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","width","1","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","width","1",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","hide-xs",4,"matHeaderCellDef"],["mat-cell","","class","hide-xs",4,"matCellDef"],["matColumnDef","email"],["mat-header-cell","","width","1","class","hide-sm hide-xs",4,"matHeaderCellDef"],["mat-cell","","width","1","class","hide-sm hide-xs",4,"matCellDef"],["matColumnDef","last_login_at"],["width","1","style","white-space: nowrap;","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap; text-align: center;",4,"matCellDef"],["matColumnDef","updated_at"],["width","1","mat-header-cell","","mat-sort-header","","disableClear","","class","hide-sm hide-xs",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap; text-align: center;","class","hide-sm hide-xs",4,"matCellDef"],["matColumnDef","loadingResults"],["mat-footer-cell","","class","no-results-found",4,"matFooterCellDef"],["matColumnDef","noResultsFound"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","","aria-label","Selecciona una p\xe1gina",3,"length","pageSize","pageSizeOptions"],["rowMenu",""],["matSuffix","","mat-icon-button","",3,"click"],["mode","query"],["mat-header-cell","","width","1"],["mat-cell",""],[1,"avatar-with-status"],["alt","",2,"width","auto","margin","auto",3,"src"],["mat-header-cell","","width","1","mat-sort-header",""],["mat-cell","","width","1"],[1,"extra-data","hide-gt-sm",2,"white-space","nowrap"],["mat-header-cell","",1,"hide-xs"],["mat-cell","",1,"hide-xs"],["mat-header-cell","","width","1",1,"hide-sm","hide-xs"],["mat-cell","","width","1",1,"hide-sm","hide-xs"],["width","1","mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],["mat-cell","",2,"white-space","nowrap","text-align","center"],[4,"ngIf"],["width","1","mat-header-cell","","mat-sort-header","","disableClear","",1,"hide-sm","hide-xs"],["mat-cell","",1,"hide-sm","hide-xs",2,"white-space","nowrap","text-align","center"],["mat-footer-cell","",1,"no-results-found"],["mat-header-row",""],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click"],["mat-footer-row","",3,"ngClass"],["cdkMenu","",1,"context-menu","mat-elevation-z2"],["cdkMenuItem","",1,"context-menu-item",3,"click"],["class","context-menu-item","cdkMenuItem","","style","color: green;",3,"click",4,"ngIf"],["class","context-menu-item","cdkMenuItem","","style","color: red;",3,"click",4,"ngIf"],["cdkMenuItem","",1,"context-menu-item",2,"color","green",3,"click"],["cdkMenuItem","",1,"context-menu-item",2,"color","red",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Buscar"),t.qZA(),t.TgZ(4,"input",2),t.NdJ("ngModelChange",function(r){return i.searchQuery=r})("keyup.escape",function(){return i.cleanSearch()})("keyup.enter",function(){return i.applySearch()}),t.qZA(),t.YNc(5,le,3,2,"button",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return i.applySearch()}),t.TgZ(7,"mat-icon"),t._uU(8,"search"),t.qZA()()(),t.TgZ(9,"button",5),t.NdJ("click",function(){return i.exportPDF()}),t._UZ(10,"mat-icon",6),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){return i.openDialogUser()}),t.TgZ(12,"mat-icon"),t._uU(13,"add"),t.qZA()()(),t.TgZ(14,"div"),t._UZ(15,"alert-panel"),t.YNc(16,ce,1,0,"mat-progress-bar",8),t.qZA(),t.TgZ(17,"mat-card",9)(18,"div",10)(19,"div",11)(20,"table",12),t.ynx(21,13),t.YNc(22,me,2,0,"th",14)(23,ue,5,5,"td",15),t.BQk(),t.ynx(24,16),t.YNc(25,de,2,0,"th",17)(26,pe,4,2,"td",18),t.BQk(),t.ynx(27,19),t.YNc(28,ge,2,0,"th",20)(29,_e,2,1,"td",21),t.BQk(),t.ynx(30,22),t.YNc(31,fe,2,0,"th",23)(32,he,2,1,"td",24),t.BQk(),t.ynx(33,25),t.YNc(34,xe,2,0,"th",26)(35,Ze,3,2,"td",27),t.BQk(),t.ynx(36,28),t.YNc(37,Te,2,0,"th",29)(38,ve,3,4,"td",30),t.BQk(),t.ynx(39,31),t.YNc(40,Ue,3,1,"td",32),t.BQk(),t.ynx(41,33),t.YNc(42,we,2,1,"td",32),t.BQk(),t.YNc(43,Pe,1,0,"tr",34)(44,ke,1,5,"tr",35)(45,ye,1,3,"tr",36)(46,Me,1,3,"tr",36),t.qZA()(),t.TgZ(47,"div"),t._UZ(48,"mat-paginator",37),t.qZA()()(),t.YNc(49,Oe,7,2,"ng-template",null,38,t.W1O)),2&n&&(t.xp6(4),t.Q6J("ngModel",i.searchQuery),t.xp6(1),t.Q6J("ngIf",i.searchQuery),t.xp6(4),t.Q6J("disabled",i.isLoadingPDF),t.xp6(2),t.Q6J("matTooltip","Nuevo Usuario"),t.xp6(5),t.Q6J("ngIf",i.isLoadingPDF),t.xp6(4),t.Q6J("dataSource",i.data),t.xp6(23),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(14,Fe)),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(15,Se)),t.xp6(2),t.Q6J("length",i.resultsLength)("pageSize",i.pageSize)("pageSizeOptions",t.DdM(16,Ie)))},dependencies:[d.mk,d.O5,l.Fj,l.JJ,l.On,h.lW,h.RK,v.Hw,U.Nt,p.KE,p.hX,p.R9,k.a8,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.mD,m.Ke,m.ge,m.ev,m.yh,m.XQ,m.Gk,m.Q2,T.NW,J.gM,w.qn,w.Sv,w.eu,F.pW,I.YE,I.nU,b.G,d.uU],styles:[".data-table-container[_ngcontent-%COMP%]{position:relative}.loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.table-card[_ngcontent-%COMP%]{padding:0}.data-table[_ngcontent-%COMP%]{overflow:auto;background-color:#fff5ee}.avatar-with-status[_ngcontent-%COMP%]{position:relative;height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.extra-data[_ngcontent-%COMP%]{display:block;font-size:small}.status-inactive.status-icon[_ngcontent-%COMP%]{color:#bdbdbd!important;background-color:#4f4f4f!important}.status-active.status-icon[_ngcontent-%COMP%]{--color: 120}.status-blocked.status-icon[_ngcontent-%COMP%]{--color: 52}.status-banned.status-icon[_ngcontent-%COMP%]{--color: 6}.status-icon[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;font-size:medium;width:auto;height:auto;color:hsl(var(--color),100%,75%);background-color:hsl(var(--color),100%,25%);padding:1px;border-radius:9px}.button-container[_ngcontent-%COMP%]{padding-bottom:1.34375em;padding-left:5px}.button-container[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{height:100%}.button-container[_ngcontent-%COMP%]   .thin-button[_ngcontent-%COMP%]{padding:3px;min-width:10px}"]})}return o})(),canActivate:[S.a]}];let Re=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[y.Bz.forChild(Je),y.Bz]})}return o})();var Y=c(6208),Ne=c(1216);function Qe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",21),t.NdJ("click",function(){t.CHM(e),t.oxw();const i=t.MAs(5);return t.KtG(i.value="")}),t._uU(1,"clear"),t.qZA()}}function Ee(o,s){1&o&&(t.TgZ(0,"button",22),t._uU(1,"Sin Distritos Cargados"),t.qZA())}function Ye(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.filtrarPorDistrito())}),t._uU(1,"TODOS"),t.qZA()}}function ze(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.filtrarPorDistrito(a))}),t._uU(1),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(1),t.AsE("",e.clave," - ",e.descripcion,"")}}function Ge(o,s){1&o&&(t.TgZ(0,"div",24),t._uU(1,"Cargando..."),t.qZA())}function He(o,s){1&o&&(t.TgZ(0,"div",24),t._uU(1,"---| Buscar Unidades |---"),t.qZA())}function Be(o,s){1&o&&(t.TgZ(0,"div",24),t._uU(1,"Sin resultados obtenidos"),t.qZA())}function Ke(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",25),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.seleccionar(a))}),t.TgZ(1,"div",26)(2,"div",27)(3,"span"),t._uU(4,"CLUES:"),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"div",28)(7,"span"),t._uU(8),t.qZA(),t._uU(9),t.qZA()(),t.TgZ(10,"div",29),t._uU(11),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(5),t.hij(" ",e.clues,""),t.xp6(3),t.hij("DISTRITO ",e.distrito.clave,":"),t.xp6(1),t.hij(" ",e.distrito.descripcion,""),t.xp6(2),t.hij(" ",e.descripcion," ")}}function We(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",30)(1,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.seleccionarTodos())}),t.TgZ(2,"mat-icon"),t._uU(3,"clear_all"),t.qZA(),t._uU(4," Todos"),t.qZA()()}}function je(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.responseUnidades.length)," Resultados ")}}let $e=(()=>{class o{constructor(e){this.http=e,this.url_unidades=`${Z.N.base_url}/unidades`,this.url_buscador_catalogos=`${Z.N.base_url}/buscador-unidades-catalogos`}buscar(e){return this.http.get(this.url_unidades,{params:e})}getCatalogos(){return this.http.get(this.url_buscador_catalogos,{})}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(L.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Ve=(()=>{class o{constructor(e){this.service=e,this.ctrlNoMostrarUnidades={},this.unidadSeleccionada=new t.vpe,this.unidadesSeleccionadas=new t.vpe}ngOnInit(){this.isLoading=!0,this.listaDistritos=[],this.service.getCatalogos().subscribe({next:e=>{e.data.distritos&&(this.listaDistritos=e.data.distritos),this.isLoading=!1},error:e=>{this.isLoading=!1,console.log(e.error.message)}})}filtrarPorDistrito(e){this.distritoSeleccionado=e||void 0}seleccionarTodos(){this.unidadesSeleccionadas.emit(this.responseUnidades),this.responseUnidades=[]}seleccionar(e){if(e){this.unidadSeleccionada.emit(e);let n=this.responseUnidades.findIndex(i=>i.id==e.id);n>=0&&this.responseUnidades.splice(n,1)}}buscarUnidades(e){if(!this.isLoading){this.isLoading=!0,this.responseUnidades=[];const n=e.value;let i={};n&&(i.query=encodeURIComponent(n)),this.distritoSeleccionado&&(i.distrito_id=this.distritoSeleccionado.id),this.service.buscar(i).subscribe({next:a=>{let r=[];a.data.forEach(u=>{this.ctrlNoMostrarUnidades[u.id]||r.push(u)}),this.responseUnidades=r,this.isLoading=!1},error:a=>{console.log(a),this.isLoading=!1}})}}limpiarBusqueda(){this.responseUnidades=[]}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36($e))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["widget-buscador-unidades"]],inputs:{ctrlNoMostrarUnidades:"ctrlNoMostrarUnidades"},outputs:{unidadSeleccionada:"unidadSeleccionada",unidadesSeleccionadas:"unidadesSeleccionadas"},standalone:!0,features:[t.jDz],decls:32,vars:13,consts:[[1,"flex-column","flex-gap",2,"height","calc(100% - 10px)","padding","5px","background-color","white"],[1,"flex-column","flex-gap"],["appearance","outline","autocomplete","off",1,"flex-fill","small-search-input"],["matInput","","placeholder","Buscar Unidad","autocomplete","off",3,"keyup.enter"],["searchUnidad",""],["matPrefix",""],["matSuffix","","class","action",3,"click",4,"ngIf"],[1,"flex-row","flex-gap"],["mat-stroked-button","",1,"flex-fill",3,"matMenuTriggerFor","disabled"],["menuDistritos","matMenu"],["mat-menu-item","","disabled","",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click"],[1,"flex-fill","lista-resultados",2,"overflow","auto","text-align","center","height","0"],["class","item-resultado",4,"ngIf"],["class","item-resultado",3,"click",4,"ngFor","ngForOf"],[1,"flex-row","total-resultados"],["style","padding: 5px;",4,"ngIf"],[1,"flex-fill"],[4,"ngIf"],["matSuffix","",1,"action",3,"click"],["mat-menu-item","","disabled",""],["mat-menu-item","",3,"click"],[1,"item-resultado"],[1,"item-resultado",3,"click"],[1,"encabezado"],[1,"clues"],[1,"distrito"],[1,"nombre-unidad"],[2,"padding","5px"]],template:function(n,i){if(1&n){const a=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"mat-form-field",2)(4,"input",3,4),t.NdJ("keyup.enter",function(){t.CHM(a);const u=t.MAs(5);return t.KtG(i.buscarUnidades(u))}),t.qZA(),t.TgZ(6,"mat-icon",5),t._uU(7,"search"),t.qZA(),t.YNc(8,Qe,2,0,"mat-icon",6),t.qZA()(),t.TgZ(9,"div",7)(10,"button",8),t._uU(11),t.TgZ(12,"mat-icon"),t._uU(13,"arrow_drop_down"),t.qZA()(),t.TgZ(14,"mat-menu",null,9),t.YNc(16,Ee,2,0,"button",10)(17,Ye,2,0,"button",11)(18,ze,2,2,"button",12),t.qZA(),t.TgZ(19,"button",13),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(5);return t.KtG(i.buscarUnidades(u))}),t.TgZ(20,"mat-icon"),t._uU(21,"search"),t.qZA(),t._uU(22," Buscar"),t.qZA()()(),t.TgZ(23,"div",14),t.YNc(24,Ge,2,0,"div",15)(25,He,2,0,"div",15)(26,Be,2,0,"div",15)(27,Ke,12,4,"div",16),t.qZA(),t.TgZ(28,"div",17),t.YNc(29,We,5,0,"div",18),t._UZ(30,"div",19),t.YNc(31,je,3,3,"div",20),t.qZA()()}if(2&n){const a=t.MAs(5),r=t.MAs(15);t.xp6(8),t.Q6J("ngIf",a.value),t.xp6(2),t.Q6J("matMenuTriggerFor",r)("disabled",i.isLoading),t.xp6(1),t.hij(" ",i.distritoSeleccionado?i.distritoSeleccionado.descripcion:"Seleccionar Distrito"," "),t.xp6(5),t.Q6J("ngIf",0==i.listaDistritos.length),t.xp6(1),t.Q6J("ngIf",i.listaDistritos.length>0),t.xp6(1),t.Q6J("ngForOf",i.listaDistritos),t.xp6(6),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&!i.responseUnidades),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.responseUnidades&&0==i.responseUnidades.length),t.xp6(1),t.Q6J("ngForOf",i.responseUnidades),t.xp6(2),t.Q6J("ngIf",i.responseUnidades&&i.responseUnidades.length>0),t.xp6(2),t.Q6J("ngIf",!i.isLoading&&i.responseUnidades)}},dependencies:[Ne.q,h.lW,v.Hw,U.Nt,p.KE,p.qo,p.R9,q.VK,q.OP,q.p6,d.ez,d.sg,d.O5,d.JJ],styles:[".lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]{width:-webkit-fill-available;padding:5px;cursor:default}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .encabezado[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:inline-block;font-size:x-small;font-weight:500}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]:nth-child(odd){background-color:#0000000d}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .encabezado[_ngcontent-%COMP%]   .clues[_ngcontent-%COMP%]{text-align:left}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .encabezado[_ngcontent-%COMP%]   .distrito[_ngcontent-%COMP%]{text-align:right}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .nombre-unidad[_ngcontent-%COMP%]{padding:5px 0}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid darkgrey}.total-resultados[_ngcontent-%COMP%]{text-align:right;color:#a9a9a9;font-size:small;border-top:1px solid darkgrey}"]})}return o})(),tt=(()=>{class o{constructor(e){this.http=e,this.url=`${Z.N.base_url}/role`,this.url_catalogos=`${Z.N.base_url}/catalogos-generales`}getRolesList(e){return this.http.get(this.url,{params:e}).pipe((0,g.U)(n=>n))}getRole(e){return this.http.get(this.url+"/"+e,{}).pipe((0,g.U)(n=>n))}updateRole(e,n){return this.http.put(this.url+"/"+e,n).pipe((0,g.U)(i=>i))}createRole(e){return this.http.post(this.url,e).pipe((0,g.U)(n=>n))}deleteRole(e){return this.http.delete(this.url+"/"+e,{}).pipe((0,g.U)(n=>n))}obtenerCatalogos(e){return this.http.post(this.url_catalogos,e).pipe((0,g.U)(n=>n))}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(L.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),z=(()=>{class o{constructor(e){this.http=e,this.url=`${Z.N.base_url}/permission`}getPermissionList(e){return this.http.get(this.url,{params:e}).pipe((0,g.U)(n=>n))}getAllPermissions(){return this.http.get(this.url,{}).pipe((0,g.U)(e=>e))}getPermission(e){return this.http.get(this.url+"/"+e,{}).pipe((0,g.U)(n=>n))}updatePermission(e,n){return this.http.put(this.url+"/"+e,n).pipe((0,g.U)(i=>i))}createPermission(e){return this.http.post(this.url,e).pipe((0,g.U)(n=>n))}deletePermission(e){return this.http.delete(this.url+"/"+e,{}).pipe((0,g.U)(n=>n))}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(L.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var et=c(3651);function Xe(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Editar"),t.qZA())}function to(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Nuevo"),t.qZA())}function eo(o,s){if(1&o&&(t.TgZ(0,"mat-list-item",36)(1,"div",37),t._uU(2),t.qZA(),t._UZ(3,"mat-divider"),t.qZA()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.username)}}function oo(o,s){1&o&&(t.TgZ(0,"mat-list-item",36)(1,"div",38),t._uU(2,"No hay Usuarios asignados"),t.qZA()())}function io(o,s){if(1&o&&(t.TgZ(0,"mat-card",32)(1,"mat-list",33),t.YNc(2,eo,4,1,"mat-list-item",34)(3,oo,3,0,"mat-list-item",35),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.rol.users),t.xp6(1),t.Q6J("ngIf",0==e.rol.users.length)}}function no(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",27)(1,"button",28,29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.listaUsuariosIsVisible=!i.listaUsuariosIsVisible)}),t.TgZ(3,"mat-icon"),t._uU(4,"account_circle"),t.qZA(),t.TgZ(5,"span")(6,"span",30),t._uU(7,"Usuarios :"),t.qZA(),t._uU(8),t.qZA()(),t.YNc(9,io,4,2,"ng-template",31),t.NdJ("overlayKeydown",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.listaUsuariosIsVisible=!1)})("overlayOutsideClick",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.listaUsuariosIsVisible=!1)}),t.qZA()}if(2&o){const e=t.MAs(2),n=t.oxw();t.xp6(8),t.hij(" ",n.rol.users.length,""),t.xp6(1),t.Q6J("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",n.listaUsuariosIsVisible)}}function so(o,s){1&o&&t._UZ(0,"mat-progress-bar",39),2&o&&t.Q6J("mode","query")}function ao(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es obligatorio"),t.qZA())}function ro(o,s){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"playlist_add_check"),t.qZA())}function lo(o,s){1&o&&(t.TgZ(0,"span",44),t._uU(1,"--root--"),t.qZA())}function co(o,s){if(1&o&&(t.TgZ(0,"mat-option",40)(1,"div",41)(2,"span",42),t._uU(3),t.qZA(),t.YNc(4,ro,2,0,"mat-icon",3),t._uU(5),t.YNc(6,lo,2,0,"span",43),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw();t.Q6J("value",e)("disabled",n.controlSelPermissions[e.id]),t.xp6(3),t.Oqu(e.group),t.xp6(1),t.Q6J("ngIf",n.controlSelPermissions[e.id]),t.xp6(1),t.hij("\xa0",e.description,"\xa0"),t.xp6(1),t.Q6J("ngIf",e.is_super)}}function mo(o,s){1&o&&(t.TgZ(0,"span",44),t._uU(1,"--root--"),t.qZA())}function uo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item",45)(1,"div",46)(2,"div",47)(3,"span",42),t._uU(4),t.qZA(),t._uU(5),t.YNc(6,mo,2,0,"span",43),t.qZA(),t.TgZ(7,"span",48)(8,"button",49),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.removePermission(a))}),t.TgZ(9,"mat-icon"),t._uU(10,"do_not_disturb_on"),t.qZA()()()()()}if(2&o){const e=s.$implicit;t.xp6(4),t.Oqu(e.group),t.xp6(1),t.hij(" ",e.description,"\xa0"),t.xp6(1),t.Q6J("ngIf",e.is_super)}}function po(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDeleteRole())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t._uU(3," Eliminar"),t.qZA()}}let go=(()=>{class o{constructor(e,n,i,a,r,u){this.rolesService=e,this.permissionsService=n,this.dialogRef=i,this.dialog=a,this.fb=r,this.data=u,this.isLoading=!1,this.rol={},this.catalogPermissions=[],this.selectedPermissions=[],this.controlSelPermissions={},this.catalogos={},this.filteredCatalogs={},this.rolForm=this.fb.group({id:[""],name:["",[l.kI.required]],permissions:[[],[l.kI.required]],nivel_id:[""]})}ngOnInit(){this.listaUsuariosIsVisible=!1,this.isLoading=!0,this.catalogPermissions=[],this.permissionControl=new l.NI,this.permissionsService.getAllPermissions().subscribe({next:e=>{this.catalogPermissions=e.data,this.filteredPermissions=this.permissionControl.valueChanges.pipe((0,N.O)(""),(0,g.U)(n=>{const i="string"==typeof n?n:n?.description;return i?this._filter(i):this.catalogPermissions.slice()})),this.data.id?this.rolesService.getRole(this.data.id).subscribe({next:n=>{this.rol=n.data,this.selectedPermissions=this.rol.permissions;for(let i in this.selectedPermissions)this.controlSelPermissions[this.selectedPermissions[i].id]=!0;this.rol.permissions=Object.keys(this.controlSelPermissions),this.rolForm.patchValue(this.rol),this.isLoading=!1},error:n=>{this.alertPanel.showError(n.error.message),this.isLoading=!1}}):this.isLoading=!1},error:e=>{this.alertPanel.showError(e.error.message),this.isLoading=!1}})}addPermission(e){let n=e.option.value;this.controlSelPermissions[n.id]||(this.selectedPermissions.push(n),this.controlSelPermissions[n.id]=!0),e.option.deselect(),this.permissionControl.setValue(""),this.rolForm.get("permissions").patchValue(Object.keys(this.controlSelPermissions))}removePermission(e){let n=this.selectedPermissions[e];this.selectedPermissions.splice(e,1),delete this.controlSelPermissions[n.id],this.rolForm.get("permissions").patchValue(Object.keys(this.controlSelPermissions))}saveRole(){if(this.rolForm.valid){this.isLoading=!0;let e=this.rolForm.value;this.rol.id?this.rolesService.updateRole(this.rol.id,e).subscribe({next:n=>{this.dialogRef.close(!0),console.log(n),this.isLoading=!1},error:n=>{this.alertPanel.showError(n.error.message),this.isLoading=!1}}):this.rolesService.createRole(e).subscribe({next:n=>{this.dialogRef.close(!0),console.log(n),this.isLoading=!1},error:n=>{this.alertPanel.showError(n.error.message),this.isLoading=!1}})}}confirmDeleteRole(){let e=this.rol.id;this.dialog.open(A.N,{width:"500px",data:{title:"Eliminar Rol",message:"Esta seguro de eliminar este rol?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(i=>{i&&this.rolesService.deleteRole(e).subscribe(a=>{this.dialogRef.close(!0)})})}displayFn(e){return""}_filter(e){const n=e.toLowerCase();return this.catalogPermissions.filter(i=>i.description.toLowerCase().includes(n))}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(tt),t.Y36(z),t.Y36(f.so),t.Y36(f.uw),t.Y36(l.qu),t.Y36(f.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],viewQuery:function(n,i){if(1&n&&t.Gf(b.G,5),2&n){let a;t.iGM(a=t.CRH())&&(i.alertPanel=a.first)}},decls:48,vars:20,consts:[[1,"flex-column","flex-gap",2,"height","100%"],[1,"flex-row","dialog-header"],["mat-dialog-title",""],[4,"ngIf"],["class","user-count",4,"ngIf"],[1,"flex-fill"],[1,"icon-button-container"],["mat-icon-button","",3,"click"],[3,"mode",4,"ngIf"],[1,"form-container","flex-column"],["fxLayout.lt-sm","column",1,"flex-column","flex-gap",3,"formGroup"],["matInput","","id","name","formControlName","name","required","","cdkFocusInitial",""],[1,"flex-fill","flex-column","flex-gap"],["appearance","outline",1,"small-search-input"],["matInput","","type","text","placeholder","Agregar Permisos","autocomplete","off",3,"formControl","matAutocomplete"],["matPrefix",""],["matSuffix",""],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["autoPermissions","matAutocomplete"],["class","permission-item",3,"value","disabled",4,"ngFor","ngForOf"],[1,"flex-fill","permissions-panel"],["role","list","dense",""],["role","listitem","class","permission-item",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",1,"hide-xs",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"user-count"],["mat-stroked-button","","cdkOverlayOrigin","",3,"click"],["btnVerListaUsuario","cdkOverlayOrigin"],[1,"hide-xs"],["cdkConnectedOverlay","","yPosition","below","xPosition","before",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","overlayKeydown","overlayOutsideClick"],[1,"list-users-role"],["dense",""],["class","user",4,"ngFor","ngForOf"],["class","user",4,"ngIf"],[1,"user"],["mat-line","",1,"username"],["mat-line","",1,"no-users"],[3,"mode"],[1,"permission-item",3,"value","disabled"],[1,"label"],[1,"permission-group"],["class","root-access",4,"ngIf"],[1,"root-access"],["role","listitem",1,"permission-item"],[1,"flex-row"],[1,"label","flex-fill"],[1,"action-button"],["mat-icon-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t.YNc(3,Xe,2,0,"span",3)(4,to,2,0,"span",3),t._uU(5," Rol "),t.qZA(),t.YNc(6,no,10,3,"div",4),t._UZ(7,"div",5),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return i.onNoClick()}),t.TgZ(10,"mat-icon"),t._uU(11,"clear"),t.qZA()()()(),t._UZ(12,"alert-panel"),t.TgZ(13,"div",5),t.YNc(14,so,1,1,"mat-progress-bar",8),t.TgZ(15,"div",9)(16,"div",10)(17,"mat-form-field",5)(18,"mat-label"),t._uU(19,"Nombre"),t.qZA(),t._UZ(20,"input",11),t.YNc(21,ao,2,0,"mat-error",3),t.qZA()(),t.TgZ(22,"div",12)(23,"div")(24,"mat-form-field",13),t._UZ(25,"input",14),t.TgZ(26,"mat-icon",15),t._uU(27,"keyboard"),t.qZA(),t.TgZ(28,"span",16),t._uU(29),t.ALo(30,"number"),t.ALo(31,"async"),t.qZA(),t.TgZ(32,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return i.addPermission(r)}),t.YNc(34,co,7,6,"mat-option",19),t.ALo(35,"async"),t.qZA()()(),t.TgZ(36,"div",20)(37,"mat-list",21),t.YNc(38,uo,11,3,"mat-list-item",22),t.qZA()()()()(),t.TgZ(39,"div",23),t.YNc(40,po,4,0,"button",24),t._UZ(41,"span",5),t.TgZ(42,"button",25),t.NdJ("click",function(){return i.onNoClick()}),t._uU(43,"Cancelar"),t.qZA(),t.TgZ(44,"button",26),t.NdJ("click",function(){return i.saveRole()}),t.TgZ(45,"mat-icon"),t._uU(46,"save"),t.qZA(),t._uU(47," Guardar"),t.qZA()()()),2&n){const a=t.MAs(33);let r;t.xp6(3),t.Q6J("ngIf",i.rol.id),t.xp6(1),t.Q6J("ngIf",!i.rol.id),t.xp6(2),t.Q6J("ngIf",i.rol.users),t.xp6(8),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("formGroup",i.rolForm),t.xp6(5),t.Q6J("ngIf",i.rolForm.get("name").hasError("required")),t.xp6(4),t.Q6J("formControl",i.permissionControl)("matAutocomplete",a),t.xp6(4),t.hij("\xa0(",t.lcZ(30,14,null==(r=t.lcZ(31,16,i.filteredPermissions))?null:r.length),")\xa0"),t.xp6(3),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(35,18,i.filteredPermissions)),t.xp6(4),t.Q6J("ngForOf",i.selectedPermissions),t.xp6(2),t.Q6J("ngIf",i.rol.id),t.xp6(4),t.Q6J("disabled",i.rolForm.invalid||i.isLoading)}},dependencies:[d.sg,d.O5,l.Fj,l.JJ,l.JL,l.Q7,h.lW,h.RK,v.Hw,U.Nt,p.KE,p.hX,p.TO,p.qo,p.R9,M.i$,M.Tg,Q.d,k.a8,O.ey,f.uh,f.H8,P.XC,P.ZL,O.X2,et.pI,et.xu,F.pW,l.oH,l.sg,l.u,b.G,d.Ov,d.JJ],styles:[".form-container[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;flex-direction:column;padding:10px}.icon-button-container[_ngcontent-%COMP%]{padding:5px}.dialog-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.25)}.user-count[_ngcontent-%COMP%]{display:flex;align-items:center}.permissions-panel[_ngcontent-%COMP%]{overflow:auto;border:1px solid lightgray;border-radius:1%;padding:8px;flex:1 1 auto;overflow-y:auto;height:0px}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]{height:auto!important;min-height:48px;padding-right:0}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}.permission-group[_ngcontent-%COMP%]{display:block;font-size:small;color:#708090}.permission-item[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid darkgray}.permission-item[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{padding:5px;display:flex;align-items:center}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;white-space:normal!important;width:-moz-fit-content;width:fit-content}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0;line-height:normal;height:20px;width:20px;font-size:24px}.root-access[_ngcontent-%COMP%]{font-size:smaller;text-align:center;font-weight:600;color:#008b8b!important}.list-users-role[_ngcontent-%COMP%]{overflow:auto;max-height:500px}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid darkgray}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}.list-users-role[_ngcontent-%COMP%]   .no-users[_ngcontent-%COMP%]{font-style:italic;color:#a9a9a9}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:small!important;line-height:normal;font-weight:500}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:x-small!important;line-height:normal;font-weight:400;color:#2f4f4f}"]})}return o})();var ot=c(8518);function _o(o,s){1&o&&(t.TgZ(0,"th",26),t._uU(1," ID "),t.qZA())}function fo(o,s){if(1&o&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function ho(o,s){1&o&&(t.TgZ(0,"th",28),t._uU(1," Nombre "),t.qZA())}function xo(o,s){if(1&o&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function Co(o,s){1&o&&(t.TgZ(0,"th",26),t._uU(1," Permisos "),t.qZA())}function bo(o,s){if(1&o&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.total_permissions)," ")}}function Zo(o,s){1&o&&(t.TgZ(0,"th",26),t._uU(1," Usuarios "),t.qZA())}function To(o,s){if(1&o&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.total_users)," ")}}function vo(o,s){1&o&&(t.TgZ(0,"th",28),t._uU(1,"Registro"),t.qZA())}function Uo(o,s){if(1&o&&(t.TgZ(0,"td",29)(1,"span",30),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.updated_at))}}function wo(o,s){if(1&o&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2,"No se encontraron registros"),t.qZA()()),2&o){const e=t.oxw();t.uIk("colspan",e.displayedColumns.length)}}function Po(o,s){if(1&o&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2,"--| Cargando Registros |--"),t.qZA(),t._UZ(3,"mat-progress-bar",32),t.qZA()),2&o){const e=t.oxw();t.uIk("colspan",e.displayedColumns.length)}}function Ao(o,s){1&o&&t._UZ(0,"tr",33)}const ko=o=>({id:o});function yo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDialogForm(a.id))}),t.qZA()}if(2&o){const e=s.$implicit;t.oxw();const n=t.MAs(41);t.Q6J("cdkContextMenuTriggerFor",n)("cdkContextMenuTriggerData",t.VKq(2,ko,e.id))}}const it=o=>({hide:o});function Mo(o,s){if(1&o&&t._UZ(0,"tr",35),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,it,!e.dataSource||e.dataSource.length>0||e.isLoading))}}function qo(o,s){if(1&o&&t._UZ(0,"tr",35),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,it,!e.isLoading))}}function Do(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",36)(1,"button",37),t.NdJ("click",function(){const a=t.CHM(e).id,r=t.oxw();return t.KtG(r.openDialogForm(a))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t._uU(4,"\xa0Editar"),t.qZA(),t.TgZ(5,"button",38),t.NdJ("click",function(){const a=t.CHM(e).id,r=t.oxw();return t.KtG(r.confirmDeleteRole(a))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t._uU(8,"\xa0Eliminar"),t.qZA()()}}const Oo=()=>["noResultsFound"],Fo=()=>["loadingResults"],So=()=>[10,25,50,100],Io=[{path:"roles",component:(()=>{class o{constructor(e,n,i){this.sharedService=e,this.rolesService=n,this.dialog=i,this.isLoading=!1,this.searchQuery="",this.resultsLength=0,this.currentPage=0,this.pageSize=50,this.displayedColumns=["id","name","total_permissions","total_users","updated_at"],this.dataSource=[]}ngOnInit(){this.loadRolesData(null)}loadRolesData(e){let n;return this.isLoading=!0,e?(n={page:e.pageIndex+1,per_page:e.pageSize},this.pageSize=e.pageSize):n={page:1,per_page:this.pageSize},n.query=this.searchQuery,this.dataSource=[],this.rolesService.getRolesList(n).subscribe({next:i=>{i.error?this.sharedService.showSnackBar(i.error.message,null,3e3):i.data.total>0?(this.dataSource=i.data.data,this.resultsLength=i.data.total):(this.dataSource=[],this.resultsLength=0),this.isLoading=!1},error:i=>{var a="Ocurri\xf3 un error.";i.error&&(a=i.error.message),this.alertPanel.showError(a),this.isLoading=!1}}),e}applyFilter(e=!1){this.paginator.pageIndex=0,this.loadRolesData(e?this.pageEvent:null)}openDialogForm(e){let n={width:"500px",height:"80%",data:{autoFocus:!1}};e&&(n.data.id=e),this.dialog.open(go,n).afterClosed().subscribe(a=>{a&&this.applyFilter(!0)})}confirmDeleteRole(e=""){this.dialog.open(A.N,{width:"500px",data:{title:"Eliminar Rol",message:"Esta seguro de eliminar este rol?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(i=>{i&&this.rolesService.deleteRole(e).subscribe(a=>{this.loadRolesData(this.pageEvent)})})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(ot.F),t.Y36(tt),t.Y36(f.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],viewQuery:function(n,i){if(1&n&&(t.Gf(T.NW,5),t.Gf(b.G,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.alertPanel=a.first)}},decls:42,vars:17,consts:[[1,"flex-row","flex-gap","module-search-bar"],["appearance","fill",1,"flex-fill"],["matInput","","placeholder","Buscar","autocomplete","off",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","flexFill","","matSuffix","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"matTooltip","click"],[1,"flex-fill","flex-column"],[1,"main-list-table","left-click-open"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","total_permissions"],["matColumnDef","total_users"],["matColumnDef","updated_at"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","noResultsFound"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","loadingResults"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","no-results-found",3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","",3,"pageSize","pageIndex","length","pageSizeOptions","page"],["paginator",""],["rowMenu",""],["mat-header-cell","","width","1"],["mat-cell",""],["mat-header-cell",""],["mat-cell","",2,"white-space","nowrap"],[1,"extra-data"],["mat-footer-cell",""],["mode","query"],["mat-header-row",""],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click"],["mat-footer-row","",1,"no-results-found",3,"ngClass"],["cdkMenu","",1,"context-menu","mat-elevation-z2"],["cdkMenuItem","",1,"context-menu-item",3,"click"],["cdkMenuItem","",1,"context-menu-item",2,"color","red",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Buscar"),t.qZA(),t.TgZ(4,"input",2),t.NdJ("ngModelChange",function(r){return i.searchQuery=r})("keyup.enter",function(){return i.applyFilter()}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return i.applyFilter()}),t.TgZ(6,"mat-icon"),t._uU(7,"search"),t.qZA()()(),t.TgZ(8,"button",4),t.NdJ("click",function(){return i.openDialogForm()}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()()(),t._UZ(11,"alert-panel"),t.TgZ(12,"mat-card",5)(13,"div",6)(14,"table",7),t.ynx(15,8),t.YNc(16,_o,2,0,"th",9)(17,fo,2,1,"td",10),t.BQk(),t.ynx(18,11),t.YNc(19,ho,2,0,"th",12)(20,xo,2,1,"td",10),t.BQk(),t.ynx(21,13),t.YNc(22,Co,2,0,"th",9)(23,bo,3,3,"td",10),t.BQk(),t.ynx(24,14),t.YNc(25,Zo,2,0,"th",9)(26,To,3,3,"td",10),t.BQk(),t.ynx(27,15),t.YNc(28,vo,2,0,"th",12)(29,Uo,4,3,"td",16),t.BQk(),t.ynx(30,17),t.YNc(31,wo,3,1,"td",18),t.BQk(),t.ynx(32,19),t.YNc(33,Po,4,1,"td",18),t.BQk(),t.YNc(34,Ao,1,0,"tr",20)(35,yo,1,4,"tr",21)(36,Mo,1,3,"tr",22)(37,qo,1,3,"tr",22),t.qZA()(),t.TgZ(38,"mat-paginator",23,24),t.NdJ("page",function(r){return i.pageEvent=i.loadRolesData(r)}),t.qZA()(),t.YNc(40,Do,9,0,"ng-template",null,25,t.W1O)),2&n&&(t.xp6(4),t.Q6J("ngModel",i.searchQuery),t.xp6(1),t.uIk("aria-label","Search")("aria-pressed","Search"),t.xp6(3),t.Q6J("matTooltip","Nuevo Rol"),t.xp6(6),t.Q6J("dataSource",i.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(14,Oo)),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(15,Fo)),t.xp6(1),t.Q6J("pageSize",i.pageSize)("pageIndex",i.currentPage)("length",i.resultsLength)("pageSizeOptions",t.DdM(16,So)))},dependencies:[d.mk,l.Fj,l.JJ,l.On,h.lW,h.RK,v.Hw,U.Nt,p.KE,p.hX,p.R9,k.a8,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.mD,m.Ke,m.ge,m.ev,m.yh,m.XQ,m.Gk,m.Q2,T.NW,J.gM,w.qn,w.Sv,w.eu,F.pW,b.G,d.JJ,d.uU],styles:[".mat-mdc-header-cell.mat-column-id[_ngcontent-%COMP%], .mat-mdc-header-cell.mat-column-updated_at[_ngcontent-%COMP%]{text-align:center}.mat-column-id[_ngcontent-%COMP%], .mat-column-updated_at[_ngcontent-%COMP%], .mat-column-total_users[_ngcontent-%COMP%], .mat-column-total_permissions[_ngcontent-%COMP%]{width:1px}.mat-column-total_users[_ngcontent-%COMP%], .mat-column-total_permissions[_ngcontent-%COMP%]{text-align:center}"]})}return o})(),canActivate:[S.a]}];let Lo=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[y.Bz.forChild(Io),y.Bz]})}return o})();const Jo=(o,s,e)=>{if(0==e||0==s)return`0 de ${e}`;const n=o*s;return`${n+1} - ${n<(e=Math.max(e,0))?Math.min(n+s,e):n+s} de ${e}`};function nt(){const o=new T.ye;return o.itemsPerPageLabel="Registros por p\xe1gina:",o.nextPageLabel="P\xe1gina Siguiente",o.previousPageLabel="P\xe1gina Anterior",o.firstPageLabel="Primer P\xe1gina",o.lastPageLabel="Ultima P\xe1gina",o.getRangeLabel=Jo,o}let Ro=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[{provide:T.ye,useValue:nt()}],imports:[d.ez,Y.m,Lo]})}return o})();var No=c(5986),Qo=c(5940);function Eo(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Editar"),t.qZA())}function Yo(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Nuevo"),t.qZA())}function zo(o,s){1&o&&t._UZ(0,"mat-spinner")}function Go(o,s){if(1&o&&(t.TgZ(0,"div",19),t.YNc(1,zo,1,0,"mat-spinner",3),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function Ho(o,s){1&o&&(t.TgZ(0,"div",19),t._uU(1,"No se encontraron los datos del permiso"),t.qZA())}function Bo(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"El ID es obligatorio"),t.qZA())}function Ko(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"El ID debe tener 32 caracteres"),t.qZA())}function Wo(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"El ID debe tener 32 caracteres"),t.qZA())}function jo(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"El ID debe ser \xfanico"),t.qZA())}function $o(o,s){if(1&o&&(t.TgZ(0,"mat-error"),t.YNc(1,Bo,2,0,"span",3)(2,Ko,2,0,"span",3)(3,Wo,2,0,"span",3)(4,jo,2,0,"span",3),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.permisoForm.get("id").errors.required),t.xp6(1),t.Q6J("ngIf",e.permisoForm.get("id").errors.maxlength),t.xp6(1),t.Q6J("ngIf",e.permisoForm.get("id").errors.minlength),t.xp6(1),t.Q6J("ngIf",e.permisoForm.get("id").errors.notEqualTo&&!e.permisoForm.get("id").errors.required)}}function Vo(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"La descripci\xf3n es obligatoria"),t.qZA())}function Xo(o,s){if(1&o&&(t.TgZ(0,"mat-error"),t.YNc(1,Vo,2,0,"span",3),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.permisoForm.get("description").errors.required)}}function ti(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"El grupo es obligatorio"),t.qZA())}function ei(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDeletePermission())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t._uU(3," Eliminar"),t.qZA()}}let oi=(()=>{class o{constructor(e,n,i,a,r){this.permissionsService=e,this.dialogRef=n,this.fb=i,this.dialog=a,this.data=r,this.isLoading=!1,this.permiso={},this.provideID=!1,this.permisoForm=this.fb.group({id:[{value:"",disabled:!0},[l.kI.maxLength(32),l.kI.minLength(32),l.kI.required,B.w.notEqualToValidator("repeatedId")]],repeatedId:[""],description:["",[l.kI.required]],group:["",[l.kI.required]],is_super:[!1]})}ngOnInit(){let e=this.data.id;e&&(this.isLoading=!0,this.permissionsService.getPermission(e).subscribe({next:n=>{this.permiso=n.data,this.permisoForm.patchValue(this.permiso),this.isLoading=!1},error:n=>{this.isLoading=!1,n.error&&!1===n.error.validacion&&this.manageRepeatedIDError(n)}}))}savePermission(){this.isLoading=!0,this.permiso.id?this.permissionsService.updatePermission(this.permiso.id,this.permisoForm.value).subscribe({next:e=>{this.dialogRef.close(!0),console.log(e),this.isLoading=!1},error:e=>{this.isLoading=!1,e.error&&!1===e.error.validacion&&this.manageRepeatedIDError(e)}}):this.permissionsService.createPermission(this.permisoForm.value).subscribe({next:e=>{this.dialogRef.close(!0),console.log(e),this.isLoading=!1},error:e=>{this.isLoading=!1,e.error&&!1===e.error.validacion&&this.manageRepeatedIDError(e)}})}toggleID(){this.provideID=!this.provideID,this.provideID?(this.permisoForm.get("id").enable(),this.permisoForm.get("id").markAsDirty(),this.permisoForm.get("id").markAsTouched()):this.permisoForm.get("id").disable()}onNoClick(){this.dialogRef.close()}manageRepeatedIDError(e){if(e.error.errores)for(let n in e.error.errores)if("id"==n){let i=e.error.errores[n];for(let a in i)if("El ID debe ser \xfanico"==i[a]){this.permisoForm.get("repeatedId").patchValue(this.permisoForm.get("id").value),this.permisoForm.get("id").enable(),this.permisoForm.get("id").markAsDirty(),this.permisoForm.get("id").markAsTouched();break}break}}confirmDeletePermission(){let e=this.permiso.id;this.dialog.open(A.N,{width:"500px",data:{title:"Eliminar Permiso",message:"Esta seguro de eliminar este permiso?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(i=>{i&&this.permissionsService.deletePermission(e).subscribe(a=>{this.dialogRef.close(!0)})})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(z),t.Y36(f.so),t.Y36(l.qu),t.Y36(f.uw),t.Y36(f.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],decls:46,vars:13,consts:[[1,"flex-column"],[1,"flex-row"],["mat-dialog-title","",1,"flex-fill"],[4,"ngIf"],[1,"icon-button-container"],["mat-icon-button","",3,"click"],[1,"flex-fill"],[1,"form-container","flex-column",3,"formGroup"],["class","form-loading-shade",4,"ngIf"],["matInput","","id","id","formControlName","id","placeholder","ID"],["mat-icon-button","","matPrefix","",3,"click"],["matInput","","id","description","formControlName","description","required",""],["matInput","","id","group","formControlName","group","required",""],[1,"checkbox-section"],["formControlName","is_super"],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",1,"hide-xs",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"form-loading-shade"],["mat-raised-button","","color","warn",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t.YNc(3,Eo,2,0,"span",3)(4,Yo,2,0,"span",3),t._uU(5," Permiso "),t.qZA(),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.onNoClick()}),t.TgZ(8,"mat-icon"),t._uU(9,"clear"),t.qZA()()()(),t._UZ(10,"mat-divider"),t.TgZ(11,"div",6)(12,"div",7),t.YNc(13,Go,2,1,"div",8)(14,Ho,2,0,"div",8),t.TgZ(15,"mat-form-field"),t._UZ(16,"input",9),t.TgZ(17,"button",10),t.NdJ("click",function(){return i.toggleID()}),t.TgZ(18,"mat-icon"),t._uU(19),t.qZA()(),t.TgZ(20,"mat-hint"),t._uU(21,"Seleccione el cuadro para capturar el ID de manera manual"),t.qZA(),t.YNc(22,$o,5,4,"mat-error",3),t.qZA(),t.TgZ(23,"mat-form-field")(24,"mat-label"),t._uU(25,"Descripci\xf3n"),t.qZA(),t._UZ(26,"input",11),t.YNc(27,Xo,2,1,"mat-error",3),t.qZA(),t.TgZ(28,"mat-form-field")(29,"mat-label"),t._uU(30,"Grupo"),t.qZA(),t._UZ(31,"input",12),t.YNc(32,ti,2,0,"mat-error",3),t.qZA(),t.TgZ(33,"section",13)(34,"mat-checkbox",14),t._uU(35,"Permiso de Super-Usuario"),t.qZA()()()(),t._UZ(36,"mat-divider"),t.TgZ(37,"div",15),t.YNc(38,ei,4,0,"button",16),t._UZ(39,"span",6),t.TgZ(40,"button",17),t.NdJ("click",function(){return i.onNoClick()}),t._uU(41,"Cancelar"),t.qZA(),t.TgZ(42,"button",18),t.NdJ("click",function(){return i.savePermission()}),t.TgZ(43,"mat-icon"),t._uU(44,"save"),t.qZA(),t._uU(45," Guardar"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("ngIf",i.permiso.id),t.xp6(1),t.Q6J("ngIf",!i.permiso.id),t.xp6(8),t.Q6J("formGroup",i.permisoForm),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&!i.permiso),t.xp6(3),t.uIk("aria-label","Capturar ID")("aria-pressed",i.provideID),t.xp6(2),t.Oqu(i.provideID?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",i.permisoForm.get("id").invalid&&(i.permisoForm.get("id").dirty||i.permisoForm.get("id").touched)),t.xp6(5),t.Q6J("ngIf",i.permisoForm.get("description").invalid&&(i.permisoForm.get("description").dirty||i.permisoForm.get("description").touched)),t.xp6(5),t.Q6J("ngIf",i.permisoForm.get("group").hasError("required")),t.xp6(6),t.Q6J("ngIf",i.permiso.id),t.xp6(4),t.Q6J("disabled",i.permisoForm.invalid||i.isLoading))},dependencies:[d.O5,l.Fj,l.JJ,l.JL,l.Q7,h.lW,h.RK,v.Hw,U.Nt,p.KE,p.hX,p.bx,p.TO,p.qo,No.oG,Q.d,Qo.Ou,f.uh,f.H8,l.sg,l.u],styles:[".form-container[_ngcontent-%COMP%]{position:relative;min-height:200px;display:flex;flex-direction:column;padding:10px}.form-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.form-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.eit-right-align[_ngcontent-%COMP%]{text-align:right}input.eit-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.eit-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.checkbox-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px;margin:0 10px}.icon-button-container[_ngcontent-%COMP%]{padding:5px}"]})}return o})();function ii(o,s){1&o&&(t.TgZ(0,"th",29),t._uU(1," ID "),t.qZA())}function ni(o,s){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function si(o,s){1&o&&(t.TgZ(0,"th",31),t._uU(1," Descripci\xf3n "),t.qZA())}function ai(o,s){if(1&o&&(t.TgZ(0,"td",32),t._uU(1),t.TgZ(2,"span",33),t._uU(3),t.qZA()()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.description," "),t.xp6(2),t.Oqu(e.group)}}function ri(o,s){1&o&&(t.TgZ(0,"th",34),t._uU(1," Grupo "),t.qZA())}function li(o,s){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.group," ")}}function ci(o,s){1&o&&(t.TgZ(0,"th",31),t._uU(1,"Registro"),t.qZA())}function mi(o,s){1&o&&(t.TgZ(0,"span",39),t._uU(1,"--root--"),t.qZA())}function ui(o,s){if(1&o&&(t.TgZ(0,"td",36),t.YNc(1,mi,2,0,"span",37),t.TgZ(2,"span",38),t._uU(3),t.ALo(4,"date"),t.qZA()()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.is_super),t.xp6(2),t.Oqu(t.lcZ(4,2,e.updated_at))}}function di(o,s){if(1&o&&(t.TgZ(0,"td",40)(1,"span"),t._uU(2,"No se encontraron registros"),t.qZA()()),2&o){const e=t.oxw();t.uIk("colspan",e.displayedColumns.length)}}function pi(o,s){if(1&o&&(t.TgZ(0,"td",40)(1,"span"),t._uU(2,"--| Cargando Registros |--"),t.qZA(),t._UZ(3,"mat-progress-bar",41),t.qZA()),2&o){const e=t.oxw();t.uIk("colspan",e.displayedColumns.length)}}function gi(o,s){1&o&&t._UZ(0,"tr",42)}const _i=o=>({id:o});function fi(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr",43),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDialogForm(a.id))}),t.qZA()}if(2&o){const e=s.$implicit;t.oxw();const n=t.MAs(37);t.Q6J("cdkContextMenuTriggerFor",n)("cdkContextMenuTriggerData",t.VKq(2,_i,e.id))}}const st=o=>({hide:o});function hi(o,s){if(1&o&&t._UZ(0,"tr",44),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,st,!e.dataSource||e.dataSource.length>0||e.isLoading))}}function xi(o,s){if(1&o&&t._UZ(0,"tr",44),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,st,!e.isLoading))}}function Ci(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){const a=t.CHM(e).id,r=t.oxw();return t.KtG(r.openDialogForm(a))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t._uU(4,"\xa0Editar"),t.qZA(),t.TgZ(5,"button",47),t.NdJ("click",function(){const a=t.CHM(e).id,r=t.oxw();return t.KtG(r.confirmDeletePermission(a))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t._uU(8,"\xa0Eliminar"),t.qZA()()}}const bi=()=>["noResultsFound"],Zi=()=>["loadingResults"],Ti=()=>[10,25,50,100],vi=[{path:"permisos",component:(()=>{class o{constructor(e,n,i){this.sharedService=e,this.permissionsService=n,this.dialog=i,this.isLoading=!1,this.searchQuery="",this.resultsLength=0,this.currentPage=0,this.pageSize=50,this.displayedColumns=["id","description","group","updated_at"],this.dataSource=[]}ngOnInit(){this.loadPermissionsData(null)}loadPermissionsData(e){let n;return this.isLoading=!0,e?(n={page:e.pageIndex+1,per_page:e.pageSize},this.pageSize=e.pageSize):n={page:1,per_page:this.pageSize},n.query=this.searchQuery,n.show_hidden=!0,this.dataSource=[],this.permissionsService.getPermissionList(n).subscribe({next:i=>{i.error?this.sharedService.showSnackBar(i.error.message,null,3e3):i.data.total>0?(this.dataSource=i.data.data,this.resultsLength=i.data.total):(this.dataSource=[],this.resultsLength=0),this.isLoading=!1},error:i=>{var a="Ocurri\xf3 un error.";i.error&&(a=i.error.message),this.alertPanel.showError(a),this.isLoading=!1}}),e}applyFilter(e=!1){this.paginator.pageIndex=0,this.loadPermissionsData(e?this.pageEvent:null)}openDialogForm(e=""){this.dialog.open(oi,{width:"500px",autoFocus:!1,data:{id:e}}).afterClosed().subscribe(i=>{console.log(this.pageEvent),i&&this.applyFilter(!0)})}confirmDeletePermission(e){this.dialog.open(A.N,{width:"500px",data:{title:"Eliminar Permiso",message:"Esta seguro de eliminar este permiso?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(i=>{i&&this.permissionsService.deletePermission(e).subscribe(a=>{this.loadPermissionsData(this.pageEvent)})})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(ot.F),t.Y36(z),t.Y36(f.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],viewQuery:function(n,i){if(1&n&&(t.Gf(T.NW,5),t.Gf(b.G,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.alertPanel=a.first)}},decls:38,vars:17,consts:[[1,"flex-row","flex-gap","module-search-bar"],["appearance","fill",1,"flex-fill"],["matInput","","placeholder","Buscar","autocomplete","off",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","flexFill","","matSuffix","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"matTooltip","click"],[1,"flex-fill",2,"height","100%"],[1,"flex-column",2,"height","100%"],[1,"main-list-table","left-click-open","flex-fill"],["mat-table","","multiTemplateDataRows","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","hide-xs",4,"matHeaderCellDef"],["mat-cell","","class","hide-xs",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","group"],["mat-header-cell","","class","hide-xs hide-sm",4,"matHeaderCellDef"],["mat-cell","","class","hide-xs hide-sm",4,"matCellDef"],["matColumnDef","updated_at"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","noResultsFound"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","loadingResults"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","no-results-found",3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","",3,"pageSize","pageIndex","length","pageSizeOptions","page"],["paginator",""],["rowMenu",""],["mat-header-cell","",1,"hide-xs"],["mat-cell","",1,"hide-xs"],["mat-header-cell",""],["mat-cell",""],[1,"extra-data","hide-gt-sm"],["mat-header-cell","",1,"hide-xs","hide-sm"],["mat-cell","",1,"hide-xs","hide-sm"],["mat-cell","",2,"white-space","nowrap"],["class","extra-data root-access",4,"ngIf"],[1,"extra-data"],[1,"extra-data","root-access"],["mat-footer-cell",""],["mode","query"],["mat-header-row",""],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click"],["mat-footer-row","",1,"no-results-found",3,"ngClass"],["cdkMenu","",1,"context-menu","mat-elevation-z2"],["cdkMenuItem","",1,"context-menu-item",3,"click"],["cdkMenuItem","",1,"context-menu-item",2,"color","red",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"input",2),t.NdJ("ngModelChange",function(r){return i.searchQuery=r})("keyup.enter",function(){return i.applyFilter()}),t.qZA(),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.applyFilter()}),t.TgZ(4,"mat-icon"),t._uU(5,"search"),t.qZA()()(),t.TgZ(6,"button",4),t.NdJ("click",function(){return i.openDialogForm()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA()()(),t._UZ(9,"alert-panel"),t.TgZ(10,"mat-card",5)(11,"div",6)(12,"div",7)(13,"table",8),t.ynx(14,9),t.YNc(15,ii,2,0,"th",10)(16,ni,2,1,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,si,2,0,"th",13)(19,ai,4,2,"td",14),t.BQk(),t.ynx(20,15),t.YNc(21,ri,2,0,"th",16)(22,li,2,1,"td",17),t.BQk(),t.ynx(23,18),t.YNc(24,ci,2,0,"th",13)(25,ui,5,4,"td",19),t.BQk(),t.ynx(26,20),t.YNc(27,di,3,1,"td",21),t.BQk(),t.ynx(28,22),t.YNc(29,pi,4,1,"td",21),t.BQk(),t.YNc(30,gi,1,0,"tr",23)(31,fi,1,4,"tr",24)(32,hi,1,3,"tr",25)(33,xi,1,3,"tr",25),t.qZA()(),t.TgZ(34,"mat-paginator",26,27),t.NdJ("page",function(r){return i.pageEvent=i.loadPermissionsData(r)}),t.qZA()()(),t.YNc(36,Ci,9,0,"ng-template",null,28,t.W1O)),2&n&&(t.xp6(2),t.Q6J("ngModel",i.searchQuery),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed","hidePassword"),t.xp6(3),t.Q6J("matTooltip","Nuevo Permiso"),t.xp6(7),t.Q6J("dataSource",i.dataSource),t.xp6(17),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(14,bi)),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(15,Zi)),t.xp6(1),t.Q6J("pageSize",i.pageSize)("pageIndex",i.currentPage)("length",i.resultsLength)("pageSizeOptions",t.DdM(16,Ti)))},dependencies:[d.mk,d.O5,l.Fj,l.JJ,l.On,h.lW,h.RK,v.Hw,U.Nt,p.KE,p.R9,k.a8,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.mD,m.Ke,m.ge,m.ev,m.yh,m.XQ,m.Gk,m.Q2,T.NW,J.gM,w.qn,w.Sv,w.eu,F.pW,I.YE,b.G,d.uU],styles:[".mat-mdc-header-cell.mat-column-id[_ngcontent-%COMP%], .mat-mdc-header-cell.mat-column-updated_at[_ngcontent-%COMP%]{text-align:center}.mat-column-id[_ngcontent-%COMP%], .mat-column-updated_at[_ngcontent-%COMP%]{width:1px}.root-access[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:#b8860b!important}"]})}return o})(),canActivate:[S.a]}];let Ui=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[y.Bz.forChild(vi),y.Bz]})}return o})(),wi=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[{provide:T.ye,useValue:nt()}],imports:[d.ez,Y.m,Ui]})}return o})(),Pi=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.ez,Y.m,Ro,wi,Ve,Re]})}return o})()}}]);