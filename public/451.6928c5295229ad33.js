"use strict";(self.webpackChunkbase_platform=self.webpackChunkbase_platform||[]).push([[451],{2451:(Po,A,m)=>{m.r(A),m.d(A,{ControlAccesoModule:()=>Eo});var u=m(177),T=m(4710),U=m(8444),t=m(4438);let at=(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-index"]],decls:2,vars:0,template:function(s,o){1&s&&(t.j41(0,"p"),t.EFF(1,"index works!"),t.k0s())}})}return i})();var v=m(6695),G=m(2042),c=m(9417),_=m(5351),rt=m(4316);const z={1:{icon:"pending",key:"inactive",description:"Inactivo"},2:{icon:"done_outline",key:"active",description:"Activo"},3:{icon:"lock",key:"blocked",description:"Bloqueado"},4:{icon:"block",key:"banned",description:"Baneado"}};var F=m(2805),C=m(9327),O=m(1413),lt=m(6977),J=m(7091),P=m(2913),N=m(9172),g=m(6354),h=m(8834),R=m(9213),x=m(9631),p=m(2102),I=m(3902),D=m(5596),y=m(6600),E=m(850),ct=m(450);function mt(i,a){1&i&&(t.j41(0,"mat-option",13),t.EFF(1," No se encontraron Permisos "),t.k0s())}function dt(i,a){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"playlist_add_check"),t.k0s())}function ut(i,a){1&i&&(t.j41(0,"mat-icon",19),t.EFF(1,"star"),t.k0s())}function pt(i,a){if(1&i&&(t.j41(0,"mat-option",14)(1,"div",15)(2,"span",16),t.EFF(3),t.k0s(),t.DNE(4,dt,2,0,"mat-icon",17),t.EFF(5),t.DNE(6,ut,2,0,"mat-icon",18),t.k0s()()),2&i){const e=a.$implicit,s=t.XpG();t.Y8G("value",e)("disabled",s.ctrlSelPermissions[e.id]),t.R7$(3),t.JRh(e.group),t.R7$(),t.Y8G("ngIf",s.ctrlSelPermissions[e.id]),t.R7$(),t.SpI("\xa0",e.description,"\xa0"),t.R7$(),t.Y8G("ngIf",e.is_super)}}function gt(i,a){1&i&&(t.j41(0,"mat-icon",19),t.EFF(1,"star"),t.k0s())}function ft(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(e);const o=t.XpG().index,n=t.XpG();return t.Njj(n.removePermission(o))}),t.j41(1,"mat-icon"),t.EFF(2,"do_not_disturb_on"),t.k0s()()}}function _t(i,a){if(1&i){const e=t.RV6();t.j41(0,"mat-slide-toggle",27),t.bIt("change",function(o){t.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return t.Njj(r.toggleActivePermission(n.id,o))}),t.k0s()}if(2&i){const e=t.XpG().$implicit,s=t.XpG();t.Y8G("checked",s.ctrlSelPermissions[e.id].active)}}function ht(i,a){if(1&i&&(t.j41(0,"mat-list-item",20)(1,"div",21)(2,"div",22)(3,"span",16),t.EFF(4),t.k0s(),t.EFF(5),t.DNE(6,gt,2,0,"mat-icon",18),t.k0s(),t.j41(7,"span",23),t.DNE(8,ft,3,0,"button",24)(9,_t,1,1,"mat-slide-toggle",25),t.k0s()()()),2&i){const e=a.$implicit,s=t.XpG();t.R7$(4),t.JRh(e.group),t.R7$(),t.SpI(" ",e.description,"\xa0"),t.R7$(),t.Y8G("ngIf",e.is_super),t.R7$(2),t.Y8G("ngIf",0==s.ctrlSelPermissions[e.id].roles.length),t.R7$(),t.Y8G("ngIf",s.ctrlSelPermissions[e.id].roles.length>0)}}let Q=(()=>{class i{constructor(){this.changeDetected=new t.bkB}ngOnInit(){this.catalogPermissions=[],this.permissionControl=new c.MJ,this.selectedPermissions=[],this.ctrlSelPermissions={}}initCatalogPermisssions(e){e&&(this.catalogPermissions=e),this.filteredPermissions=this.permissionControl.valueChanges.pipe((0,N.Z)(""),(0,g.T)(s=>{const o="string"==typeof s?s:s?.description;return o?this._filter(o):this.catalogPermissions.slice()}))}insertRolePermissions(e){e.permissions.forEach(s=>{this.addPermission(s,e.id)})}removeRolePermissions(e){e.permissions.forEach(s=>{if(this.ctrlSelPermissions[s.id]){let o=this.ctrlSelPermissions[s.id].roles.findIndex(n=>n==e.id);if(o>=0&&this.ctrlSelPermissions[s.id].roles.splice(o,1),0==this.ctrlSelPermissions[s.id].roles.length){let n=this.selectedPermissions.findIndex(r=>r.id==s.id);n>=0&&this.removePermission(n)}}})}loadPermissions(e){this.selectedPermissions=[],this.ctrlSelPermissions={},e.forEach(s=>{this.addPermission(s)})}getSelectedPermissions(){return this.ctrlSelPermissions}toggleActivePermission(e,s){this.ctrlSelPermissions[e].active=s.checked,this.changeDetected.emit(!0)}addPermissionEvent(e){this.addPermission(e.option.value),e.option.deselect(),this.permissionControl.setValue("")}addPermission(e,s){if(!this.ctrlSelPermissions[e.id]){this.selectedPermissions.push(e);let o=!0;e.pivot&&e.pivot.user_id&&(o=1==e.pivot.status),this.ctrlSelPermissions[e.id]={roles:[],active:o},this.changeDetected.emit(!0)}s&&this.ctrlSelPermissions[e.id].roles.findIndex(n=>n==s)<0&&this.ctrlSelPermissions[e.id].roles.push(s)}removePermission(e){let s=this.selectedPermissions[e];s&&(this.selectedPermissions.splice(e,1),delete this.ctrlSelPermissions[s.id],this.changeDetected.emit(!0))}displayFn(e){return""}_filter(e){const s=e.toLowerCase();return this.catalogPermissions.filter(o=>o.description.toLowerCase().includes(s))}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["tab-permissions"]],outputs:{changeDetected:"changeDetected"},decls:18,vars:13,consts:[["autoPermissions","matAutocomplete"],[1,"flex-column","flex-gap",2,"height","100%"],[2,"padding","5px"],["appearance","outline",1,"small-search-input"],["matInput","","type","text","placeholder","Permisos","autocomplete","off",3,"formControl","matAutocomplete"],["matPrefix",""],["matSuffix",""],["autoActiveFirstOption","",3,"optionSelected","displayWith"],["disabled","","class","no-results-found",4,"ngIf"],["class","permission-item",3,"value","disabled",4,"ngFor","ngForOf"],[1,"flex-fill","permissions-panel","mat-elevation-z2"],["role","list","dense",""],["role","listitem","class","permission-item",4,"ngFor","ngForOf"],["disabled","",1,"no-results-found"],[1,"permission-item",3,"value","disabled"],[1,"label"],[1,"permission-group"],[4,"ngIf"],["class","root-access",4,"ngIf"],[1,"root-access"],["role","listitem",1,"permission-item"],[1,"flex-row"],[1,"label","flex-fill"],[1,"action-button"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["color","primary",3,"checked","change",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["color","primary",3,"change","checked"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"mat-card",1)(1,"div",2)(2,"mat-form-field",3),t.nrm(3,"input",4),t.j41(4,"mat-icon",5),t.EFF(5,"keyboard"),t.k0s(),t.j41(6,"span",6),t.EFF(7),t.nI1(8,"async"),t.nI1(9,"number"),t.k0s(),t.j41(10,"mat-autocomplete",7,0),t.bIt("optionSelected",function(l){return t.eBV(n),t.Njj(o.addPermissionEvent(l))}),t.DNE(12,mt,2,0,"mat-option",8)(13,pt,7,6,"mat-option",9),t.nI1(14,"async"),t.k0s()()(),t.j41(15,"div",10)(16,"mat-list",11),t.DNE(17,ht,10,5,"mat-list-item",12),t.k0s()()()}if(2&s){let n;const r=t.sdS(11);t.R7$(3),t.Y8G("formControl",o.permissionControl)("matAutocomplete",r),t.R7$(4),t.SpI("\xa0(",t.bMT(9,9,null==(n=t.bMT(8,7,o.filteredPermissions))?null:n.length),")\xa0"),t.R7$(3),t.Y8G("displayWith",o.displayFn),t.R7$(2),t.Y8G("ngIf",0==o.catalogPermissions.length),t.R7$(),t.Y8G("ngForOf",t.bMT(14,11,o.filteredPermissions)),t.R7$(4),t.Y8G("ngForOf",o.selectedPermissions)}},dependencies:[u.Sq,u.bT,c.me,c.BC,h.iY,R.An,x.fg,p.rl,p.JW,p.yw,I.jt,I.YE,D.RN,y.wT,E.$3,E.pN,ct.sG,c.l_,u.Jj,u.QX],styles:[".permissions-panel[_ngcontent-%COMP%]{overflow:auto;padding:5px}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]{height:auto!important;min-height:48px;padding-right:0}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]:hover{background:#0000000a}.permission-group[_ngcontent-%COMP%]{display:block;font-size:small;color:#708090}.permission-item[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid darkgray}.permission-item[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{padding:5px;display:flex;align-items:center}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;white-space:normal!important;width:-moz-fit-content;width:fit-content}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0;line-height:normal;height:20px;width:20px;font-size:24px}.root-access[_ngcontent-%COMP%]{font-size:smaller!important;text-align:center;font-weight:600;color:gold!important}"]})}return i})();function bt(i,a){1&i&&(t.j41(0,"mat-option",13),t.EFF(1," No se encontraron Roles "),t.k0s())}function Ct(i,a){if(1&i&&(t.j41(0,"span",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.nivel.descripcion)}}function Ft(i,a){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"playlist_add_check"),t.k0s())}function kt(i,a){if(1&i&&(t.j41(0,"mat-option",14)(1,"div",15),t.DNE(2,Ct,2,1,"span",16)(3,Ft,2,0,"mat-icon",17),t.EFF(4),t.k0s()()),2&i){const e=a.$implicit,s=t.XpG();t.Y8G("value",e)("disabled",s.controlSelRoles[e.id]),t.R7$(2),t.Y8G("ngIf",e.nivel),t.R7$(),t.Y8G("ngIf",s.controlSelRoles[e.id]),t.R7$(),t.SpI("\xa0",e.name," ")}}function vt(i,a){if(1&i&&(t.j41(0,"span",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.nivel.descripcion)}}function Rt(i,a){if(1&i){const e=t.RV6();t.j41(0,"mat-list-item",19)(1,"div",20)(2,"div",21),t.DNE(3,vt,2,1,"span",16),t.j41(4,"span")(5,"mat-icon"),t.EFF(6,"admin_panel_settings"),t.k0s(),t.EFF(7),t.k0s()(),t.j41(8,"span",22)(9,"button",23),t.bIt("click",function(){const o=t.eBV(e).index,n=t.XpG();return t.Njj(n.removeRole(o))}),t.j41(10,"mat-icon"),t.EFF(11,"do_not_disturb_on"),t.k0s()()()()()}if(2&i){const e=a.$implicit;t.R7$(3),t.Y8G("ngIf",e.nivel),t.R7$(4),t.SpI("\xa0",e.name,"")}}let q=(()=>{class i{constructor(){this.roleSelected=new t.bkB,this.roleRemoved=new t.bkB,this.changeDetected=new t.bkB}ngOnInit(){this.catalogRoles=[],this.roleControl=new c.MJ,this.selectedRoles=[],this.controlSelRoles={}}initCatalogRoles(e){e&&(this.catalogRoles=e),this.filteredRoles=this.roleControl.valueChanges.pipe((0,N.Z)(""),(0,g.T)(s=>{const o="string"==typeof s?s:s?.name;return o?this._filter(o):this.catalogRoles.slice()}))}loadRoles(e){e.forEach(s=>{this.addRole(s)})}getSelectedRolesIds(){return Object.keys(this.controlSelRoles)}addRoleEvent(e){let s=e.option.value;this.addRole(s),e.option.deselect(),this.roleControl.setValue(""),this.roleSelected.emit(s)}addRole(e){this.controlSelRoles[e.id]||(this.selectedRoles.push(e),this.controlSelRoles[e.id]=!0,this.changeDetected.emit(!0))}removeRole(e){let s=this.selectedRoles[e];s&&(this.selectedRoles.splice(e,1),delete this.controlSelRoles[s.id],this.roleRemoved.emit(s),this.changeDetected.emit(!0))}displayFn(e){return""}_filter(e){const s=e.toLowerCase();return this.catalogRoles.filter(o=>o.name.toLowerCase().includes(s))}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["tab-roles"]],outputs:{roleSelected:"roleSelected",roleRemoved:"roleRemoved",changeDetected:"changeDetected"},decls:18,vars:14,consts:[["autoRoles","matAutocomplete"],[1,"flex-column","flex-gap",2,"height","100%"],[2,"padding","5px"],["appearance","outline",1,"small-search-input"],["matInput","","type","text","placeholder","Roles","autocomplete","off",3,"formControl","matAutocomplete"],["matPrefix",""],["matSuffix",""],["autoActiveFirstOption","",1,"autocomplete-fix",3,"optionSelected","classList","displayWith"],["disabled","","class","no-results-found",4,"ngIf"],["class","role-item",3,"value","disabled",4,"ngFor","ngForOf"],[1,"flex-fill","roles-panel","mat-elevation-z2"],["role","list","dense",""],["role","listitem","class","role-item",4,"ngFor","ngForOf"],["disabled","",1,"no-results-found"],[1,"role-item",3,"value","disabled"],[1,"label"],["class","role-group",4,"ngIf"],[4,"ngIf"],[1,"role-group"],["role","listitem",1,"role-item"],[1,"flex-row"],[1,"flex-fill","label"],[1,"action-button"],["mat-icon-button","","color","warn",3,"click"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"mat-card",1)(1,"div",2)(2,"mat-form-field",3),t.nrm(3,"input",4),t.j41(4,"mat-icon",5),t.EFF(5,"keyboard"),t.k0s(),t.j41(6,"span",6),t.EFF(7),t.nI1(8,"async"),t.nI1(9,"number"),t.k0s(),t.j41(10,"mat-autocomplete",7,0),t.bIt("optionSelected",function(l){return t.eBV(n),t.Njj(o.addRoleEvent(l))}),t.DNE(12,bt,2,0,"mat-option",8)(13,kt,5,5,"mat-option",9),t.nI1(14,"async"),t.k0s()()(),t.j41(15,"div",10)(16,"mat-list",11),t.DNE(17,Rt,12,2,"mat-list-item",12),t.k0s()()()}if(2&s){let n;const r=t.sdS(11);t.R7$(3),t.Y8G("formControl",o.roleControl)("matAutocomplete",r),t.R7$(4),t.SpI("\xa0(",t.bMT(9,10,null==(n=t.bMT(8,8,o.filteredRoles))?null:n.length),")\xa0"),t.R7$(3),t.Y8G("classList","autocomplete-fix")("displayWith",o.displayFn),t.R7$(2),t.Y8G("ngIf",0==o.catalogRoles.length),t.R7$(),t.Y8G("ngForOf",t.bMT(14,12,o.filteredRoles)),t.R7$(4),t.Y8G("ngForOf",o.selectedRoles)}},dependencies:[u.Sq,u.bT,c.me,c.BC,h.iY,R.An,x.fg,p.rl,p.JW,p.yw,I.jt,I.YE,D.RN,y.wT,E.$3,E.pN,c.l_,u.Jj,u.QX],styles:[".roles-panel[_ngcontent-%COMP%]{overflow:auto;padding:5px}.roles-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]{height:auto!important;min-height:48px;padding-right:0}.roles-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]:hover{background:#0000000a}.role-group[_ngcontent-%COMP%]{display:block;font-size:small;color:#708090}.role-item[_ngcontent-%COMP%]{width:100%}.role-item[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid darkgray}.role-item[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{padding:5px;display:flex;align-items:center}.role-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;align-items:center;white-space:normal!important;width:-moz-fit-content;width:fit-content;font-weight:500}.role-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0;line-height:normal;height:20px;width:20px;font-size:24px}"]})}return i})();var k=m(5312),$=m(1626);let W=(()=>{class i{constructor(e){this.http=e,this.url_usuarios=`${k.c.base_url}/user`,this.url_usuarios_catalogos=`${k.c.base_url}/user-catalogs`,this.url_grupo_unidades=`${k.c.base_url}/grupo-cargar-unidades`,this.url_change_status=`${k.c.base_url}/change-user-status/`}obtenerUsuarios(e){return this.http.get(this.url_usuarios,{params:e}).pipe((0,g.T)(s=>s))}verUsuario(e){return this.http.get(this.url_usuarios+"/"+e,{}).pipe((0,g.T)(s=>s))}guardarUsuario(e){return this.http.post(this.url_usuarios,e).pipe((0,g.T)(s=>s))}cambiarStatus(e,s){return this.http.put(this.url_change_status+e,s)}obtenerCatalogosUsuarios(){return this.http.get(this.url_usuarios_catalogos,{}).pipe((0,g.T)(e=>e))}obtenerUnidadesGrupo(e){return this.http.get(this.url_grupo_unidades+"/"+e,{})}enviarCorreoRestaurar(e){return this.http.post(`${k.c.base_url}/send-reset-password`,e)}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO($.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var V=m(1997),B=m(6850),w=m(9115),H=m(6195),L=m(4823),Z=m(3881),M=m(7575),xt=m(3159);const jt=["inputPassword"],Et=i=>({selected:i});function Pt(i,a){if(1&i&&(t.j41(0,"div")(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span",12),t.EFF(4),t.k0s()()),2&i){const e=t.XpG();t.ZvI("label-info status-label status-",e.statusDesc[e.statusUser].key,""),t.R7$(2),t.JRh(e.statusDesc[e.statusUser].icon),t.R7$(2),t.SpI("\xa0Usuario: ",e.statusDesc[e.statusUser].description,"")}}function Dt(i,a){1&i&&(t.j41(0,"div",47),t.EFF(1," Nuevo Usuario "),t.k0s())}function Tt(i,a){if(1&i&&(t.j41(0,"button",48)(1,"mat-icon"),t.EFF(2,"settings"),t.k0s(),t.j41(3,"span",12),t.EFF(4,"Opciones\xa0"),t.k0s(),t.j41(5,"mat-icon"),t.EFF(6,"arrow_drop_down"),t.k0s()()),2&i){const e=t.XpG(),s=t.sdS(7);t.Y8G("matMenuTriggerFor",s)("disabled",e.isLoading||e.isSaving)}}function It(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.enviarCorreo())}),t.j41(1,"mat-icon"),t.EFF(2,"outgoing_mail"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Cambio de Contrase\xf1a"),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("disabled",e.isSendingEmail||e.configPass)}}function wt(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cambiarStatus(2))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4,"Activar Usuario"),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.JRh(e.statusDesc[2].icon)}}function St(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cambiarStatus(4))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4,"Banear Usuario"),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.JRh(e.statusDesc[4].icon)}}function yt(i,a){1&i&&(t.j41(0,"div",51),t.EFF(1," \u27e8\u27e8 root \u27e9\u27e9 "),t.k0s())}function Mt(i,a){1&i&&(t.j41(0,"div",52)(1,"mat-icon"),t.EFF(2,"phone_iphone"),t.k0s()())}function Ut(i,a){if(1&i&&(t.j41(0,"div",53)(1,"span",54),t.EFF(2,"\xdaltimo Inicio de Sesi\xf3n:"),t.k0s(),t.j41(3,"span",55),t.EFF(4),t.nI1(5,"date"),t.k0s()()),2&i){const e=t.XpG();t.R7$(4),t.JRh(e.lastLogin?t.i5U(5,1,e.lastLogin,"dd - MMM - y | h:mm a"):"Nunca")}}function Gt(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",56),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.resizeDialog())}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("matTooltip",e.dialogMaxSize?"Restaurar":"Maximizar")("matTooltipPosition","left"),t.R7$(2),t.JRh(e.dialogMaxSize?"fit_screen":"fullscreen")}}function $t(i,a){if(1&i&&t.nrm(0,"mat-progress-bar",57),2&i){const e=t.XpG();t.Y8G("mode",e.isSaving||e.isSendingEmail?"indeterminate":"query")("color",e.isSaving||e.isSendingEmail?"accent":"primary")}}function Lt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Este campo es obligatorio"),t.k0s())}function Ot(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"El Correo Electr\xf3nico es obligatorio"),t.k0s())}function Nt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Formato incorrecto"),t.k0s())}function Vt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"El Correo Electr\xf3nico esta repetido"),t.k0s())}function Bt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"El Nombre de Usuario es obligatorio"),t.k0s())}function Yt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Debe contener al menos 4 caracteres"),t.k0s())}function Xt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"El Nombre de Usuario esta repetido"),t.k0s())}function At(i,a){1&i&&(t.j41(0,"div",58)(1,"div",59),t.EFF(2,"Se enviar\xe1 un correo de activaci\xf3n"),t.k0s()())}function zt(i,a){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"check_circle"),t.k0s())}function Jt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Debe contener al menos 8 caracteres"),t.k0s())}function Qt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"La Contrase\xf1a es obligatoria"),t.k0s())}function qt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"La Contrase\xf1a no es segura"),t.k0s())}function Wt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"La Contrase\xf1a debe ser diferente"),t.k0s())}function Ht(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Confirmar Contrase\xf1a"),t.k0s())}function Zt(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Las contrase\xf1as no coinciden"),t.k0s())}function Kt(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",23)(1,"mat-form-field",24)(2,"mat-label"),t.DNE(3,zt,2,0,"mat-icon",26),t.EFF(4," Contrase\xf1a:"),t.k0s(),t.nrm(5,"input",60,1),t.j41(7,"button",61),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.hidePassword=!o.hidePassword)}),t.j41(8,"mat-icon"),t.EFF(9),t.k0s()(),t.j41(10,"mat-autocomplete",62,2)(12,"mat-option",63)(13,"strength-checker",64),t.bIt("passwordStrength",function(o){t.eBV(e);const n=t.XpG();return t.Njj(n.passwordValid(o))}),t.k0s()()(),t.j41(14,"mat-hint",31),t.EFF(15),t.k0s(),t.DNE(16,Jt,2,0,"mat-error",26)(17,Qt,2,0,"mat-error",26)(18,qt,2,0,"mat-error",26)(19,Wt,2,0,"mat-error",26),t.k0s(),t.j41(20,"mat-form-field",24)(21,"mat-label"),t.EFF(22,"Confirmar Contrase\xf1a:"),t.k0s(),t.nrm(23,"input",65),t.j41(24,"button",61),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.hideConfirmPassword=!o.hideConfirmPassword)}),t.j41(25,"mat-icon"),t.EFF(26),t.k0s()(),t.j41(27,"mat-hint",31),t.EFF(28),t.k0s(),t.DNE(29,Ht,2,0,"mat-error",26)(30,Zt,2,0,"mat-error",26),t.k0s()()}if(2&i){const e=t.sdS(11),s=t.XpG();t.R7$(3),t.Y8G("ngIf",s.formUsuario.get("valid_password").value),t.R7$(2),t.Y8G("type",s.hidePassword?"password":"text")("matAutocomplete",e),t.R7$(2),t.BMQ("aria-label","Hide password")("aria-pressed",s.hidePassword),t.R7$(2),t.JRh(s.hidePassword?"visibility_off":"visibility"),t.R7$(),t.Y8G("panelWidth","auto"),t.R7$(2),t.Y8G("value",!0),t.R7$(),t.Y8G("passwordToVerify",s.formUsuario.get("password").value),t.R7$(2),t.JRh(s.formUsuario.get("password").value.length||0),t.R7$(),t.Y8G("ngIf",s.formUsuario.get("password").hasError("minlength")),t.R7$(),t.Y8G("ngIf",s.formUsuario.get("password").hasError("required")),t.R7$(),t.Y8G("ngIf",s.formUsuario.get("password").hasError("lowstrenght")),t.R7$(),t.Y8G("ngIf",s.formUsuario.get("password").hasError("samepassword")),t.R7$(4),t.Y8G("type",s.hideConfirmPassword?"password":"text"),t.R7$(),t.BMQ("aria-label","Hide password")("aria-pressed",s.hideConfirmPassword),t.R7$(2),t.JRh(s.hideConfirmPassword?"visibility_off":"visibility"),t.R7$(2),t.JRh(s.formUsuario.get("confirm_password").value.length||0),t.R7$(),t.Y8G("ngIf",s.formUsuario.get("confirm_password").hasError("required")),t.R7$(),t.Y8G("ngIf",s.formUsuario.get("confirm_password").hasError("fieldMatch"))}}function te(i,a){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"security"),t.k0s(),t.j41(2,"span",12),t.EFF(3,"\xa0Acceso / Seguridad"),t.k0s())}function ee(i,a){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"face"),t.k0s(),t.j41(2,"span",12),t.EFF(3,"\xa0Avatar"),t.k0s())}function ie(i,a){if(1&i){const e=t.RV6();t.j41(0,"mat-grid-tile")(1,"div",69)(2,"div",70)(3,"div",71),t.bIt("click",function(){const o=t.eBV(e).$implicit,n=t.XpG(2);return t.Njj(n.selectAvatar(o.file))}),t.nrm(4,"mat-icon",72),t.k0s()()()()}if(2&i){const e=a.$implicit,s=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(2,Et,s.selectedAvatar==e.file)),t.R7$(2),t.FS9("svgIcon",e.id)}}function oe(i,a){if(1&i&&(t.j41(0,"mat-card",66)(1,"mat-grid-list",67),t.DNE(2,ie,5,4,"mat-grid-tile",68),t.k0s()()),2&i){const e=t.XpG();t.R7$(),t.FS9("cols",e.avatarRowCount),t.R7$(),t.Y8G("ngForOf",e.avatarsList)}}let se=(()=>{class i{constructor(e,s,o,n,r,l){this.dialogRef=e,this.inData=s,this.formBuilder=o,this.usuariosService=n,this.breakpointObserver=r,this.dialog=l,this.destroyed=new O.B,this.displayNameMap=new Map([[C.Rp.XSmall,"xs"],[C.Rp.Small,"sm"],[C.Rp.Medium,"md"],[C.Rp.Large,"lg"],[C.Rp.XLarge,"xl"]]),this.statusDesc=z,r.observe([C.Rp.XSmall,C.Rp.Small,C.Rp.Medium,C.Rp.Large,C.Rp.XLarge]).pipe((0,lt.Q)(this.destroyed)).subscribe(f=>{for(const b of Object.keys(f.breakpoints))f.breakpoints[b]&&(this.currentScreenSize=this.displayNameMap.get(b)??"Unknown")})}ngOnInit(){this.savedData=!1,this.isLoading=!0,this.dialogRef.addPanelClass("no-padding-dialog"),this.hidePassword=!0,this.hideConfirmPassword=!0,this.avatarsList=rt.T,this.selectedAvatar=this.avatarsList[0].file,this.avatarRowCount=10,this.changesDetected=!1,this.listaGrupos=[],this.formUsuario=this.formBuilder.group({id:[""],name:["",c.k0.required],email:["",[c.k0.required,c.k0.email]],username:["",[c.k0.required,c.k0.minLength(4)]],avatar:[this.selectedAvatar],status:[""],mail_password:[!0],roles:[[]],permissions:[{}],acceso_unidades:[{}]}),this.usuariosService.obtenerCatalogosUsuarios().subscribe({next:e=>{let s=e.data;this.listaGrupos=e.data.grupos,s.permisos&&this.tabPermissions.initCatalogPermisssions(s.permisos),s.roles&&this.tabRoles.initCatalogRoles(s.roles),this.inData.id?this.usuariosService.verUsuario(this.inData.id).subscribe({next:o=>{if(this.formUsuario.patchValue(o.data),this.isRoot=o.data.is_superuser,o.data.permissions.length>0&&this.tabPermissions.loadPermissions(o.data.permissions),o.data.roles.length>0){let n=[];o.data.roles.forEach(r=>{let l=s.roles.find(f=>f.id==r.id);n.push(l),this.tabPermissions.insertRolePermissions(l)}),this.tabRoles.loadRoles(n)}this.formUsuario.markAllAsTouched(),this.setConfigForm(),this.selectedAvatar=o.data.avatar,this.statusUser=o.data.status,this.lastLogin=o.data.last_login_at,this.isLoading=!1},error:o=>{this.alertPanel.showError(o.error.message),this.isLoading=!1}}):(this.setConfigForm(),this.isLoading=!1)},error:e=>{this.alertPanel.showError(e.error.message),this.isLoading=!1}})}ngAfterViewInit(){("sm"==this.currentScreenSize||"xs"==this.currentScreenSize)&&(this.resizeDialog(),this.avatarRowCount="xs"==this.currentScreenSize?4:8)}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}setConfigForm(){this.formUsuario.valueChanges.subscribe(e=>{this.changesDetected=!0})}toggleConfigPass(){this.configPass?(this.formUsuario.get("password")&&(this.formUsuario.removeControl("confirm_password"),this.formUsuario.removeControl("password"),this.formUsuario.removeControl("valid_password")),this.formUsuario.get("mail_password").patchValue(!0)):(this.formUsuario.get("password")||(this.hidePassword=!0,this.hideConfirmPassword=!0,this.formUsuario.addControl("password",new c.MJ("",[c.k0.required,c.k0.minLength(8)])),this.formUsuario.addControl("confirm_password",new c.MJ("",[c.k0.required,J.k.fieldMatchValidator("password")])),this.formUsuario.addControl("valid_password",new c.MJ(!1,c.k0.requiredTrue)),setTimeout(()=>{this.inputPassword&&this.inputPassword.nativeElement.focus()},10)),this.formUsuario.get("mail_password").patchValue(!1)),this.configPass=!this.configPass}cambiarStatus(e){let s,o,n,r;4==e?(s="Esta seguro de Banear a este usuario?",n="Banear",o="block",r="warn"):(s="Esta seguro de Activar a este usuario?",n="Activar",o="done_outline",r="primary");const l=this.dialog.open(P.e,{width:"500px",data:{title:"Modificar Estatus",message:s,hasOKBtn:!0,btnColor:r,btnText:n,btnIcon:o}});let f={status:e};l.afterClosed().subscribe(b=>{b&&(this.isSaving=!0,this.usuariosService.cambiarStatus(this.inData.id,f).subscribe(S=>{this.isSaving=!1,this.statusUser=S.status,this.savedData=!0}))})}guardarUsuario(e){if(this.alertPanel.closePanel(),this.formUsuario.valid||e){this.isSaving=!0,e&&this.formUsuario.get("status").patchValue(e);let s=this.formUsuario.value,o=this.tabRoles.getSelectedRolesIds();s.roles=o;let n=this.tabPermissions.getSelectedPermissions(),r={};for(const l in n)if(Object.prototype.hasOwnProperty.call(n,l)){const f=n[l];0==f.roles.length?r[l]={status:!0}:f.active||(r[l]={status:!1})}s.permissions=r,this.usuariosService.guardarUsuario(s).subscribe({next:l=>{this.isSaving=!1,this.statusUser=l.data.status,this.inData.id=l.data.id,this.formUsuario.get("id").patchValue(l.data.id),this.formUsuario.get("status").patchValue(l.data.status),this.changesDetected=!1,l.hasOwnProperty("mail_sent")?l.mail_sent?this.alertPanel.showSuccess("Datos Guardados. Se envi\xf3 Correo de Confirmaci\xf3n de cuenta.",3):this.alertPanel.showWarning("Datos Guardados. Ocurrio un error al enviar el Correo de Confirmaci\xf3n de cuenta."):this.alertPanel.showSuccess("Datos guardados con \xe9xito",3),this.savedData=!0},error:l=>{if("form_validation"==l.error.error_type){for(const f in l.error.data)if(Object.prototype.hasOwnProperty.call(l.error.data,f)){let S={};S[l.error.data[f]]=!0,this.formUsuario.get(f).setErrors(S)}this.alertPanel.showError(l.error.message)}else this.alertPanel.showError(l.error.message);this.isSaving=!1}})}}enviarCorreo(){this.formUsuario.get("email").valid&&this.dialog.open(P.e,{data:{message:"Se enviara un correo electronico para que el usuario pueda restaurar su contrase\xf1a",hasOKBtn:!0,btnText:"Enviar Correo",btnIcon:"send"}}).afterClosed().subscribe(o=>{if(o){this.isSendingEmail=!0;let n={user_email:this.formUsuario.get("email").value};this.usuariosService.enviarCorreoRestaurar(n).subscribe({next:r=>{console.log("mailto",r),this.isSendingEmail=!1,this.alertPanel.showInfo("Se envi\xf3 Correo Electr\xf3nico con \xe9xito",3)},error:r=>{this.alertPanel.showError(r.error.message?r.error.message:"Error al enviar Correo Electr\xf3nico"),this.isSendingEmail=!1}})}})}addFromRole(e){this.tabPermissions.insertRolePermissions(e)}removeFromRole(e){this.tabPermissions.removeRolePermissions(e)}selectAvatar(e){this.selectedAvatar=e,this.formUsuario.get("avatar").patchValue(e)}passwordValid(e){this.formUsuario.get("valid_password").patchValue(e),this.formUsuario.get("confirm_password").patchValue(""),e||this.formUsuario.get("password").setErrors({lowstrenght:!0})}resizeDialog(){this.dialogMaxSize?(this.dialogRef.updateSize("80%","60%"),this.dialogMaxSize=!1):(this.dialogRef.updateSize("100%","100%"),this.dialogMaxSize=!0)}cancelarAccion(){this.cerrar()}cerrar(){this.dialogRef.close(this.savedData)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(_.CP),t.rXU(_.Vh),t.rXU(c.ok),t.rXU(W),t.rXU(C.QP),t.rXU(_.bZ))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-dialogo-usuario"]],viewQuery:function(s,o){if(1&s&&(t.GBs(jt,5),t.GBs(F.m,5),t.GBs(Q,5),t.GBs(q,5)),2&s){let n;t.mGM(n=t.lsd())&&(o.inputPassword=n.first),t.mGM(n=t.lsd())&&(o.alertPanel=n.first),t.mGM(n=t.lsd())&&(o.tabPermissions=n.first),t.mGM(n=t.lsd())&&(o.tabRoles=n.first)}},decls:79,vars:36,consts:[["menuUsuario","matMenu"],["inputPassword",""],["autoPass","matAutocomplete"],[1,"flex-column",2,"height","100%","overflow","hidden","flex","1 1 0%",3,"keydown.escape"],[1,"dialog-toolbar"],[1,"flex-row"],[3,"class",4,"ngIf"],["class","label-info",4,"ngIf"],["mat-button","","aria-label","Menu de Usuarios",3,"matMenuTriggerFor","disabled",4,"ngIf"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-button","",3,"click","disabled"],[1,"hide-xs"],[1,"flex-fill"],["class","root-access",4,"ngIf"],["class","label-info screen-size-icon",4,"ngIf"],["class","last-login hide-xs",4,"ngIf"],["mat-button","","class","boton-accion","tabindex","-1",3,"matTooltip","matTooltipPosition","click",4,"ngIf"],["mat-button","","tabindex","-1",1,"boton-accion","boton-cerrar",3,"click"],[3,"mode","color",4,"ngIf"],[1,"flex-fill","flex-column",2,"padding","8px","overflow","auto"],[1,"flex-fill","flex-column","flex-gap"],[1,"flex-column","flex-gap","xs-max-height-user-form",2,"padding","8px",3,"formGroup"],[1,"flex-row","flex-xs-column","flex-fill","flex-gap"],["appearance","fill",1,"flex-fill"],["type","text","matInput","","autocomplete","off","formControlName","name","placeholder","Nombre Completo","required","","cdkFocusInitial",""],[4,"ngIf"],["type","text","matInput","","autocomplete","off","id","email","formControlName","email","placeholder","Correo Electr\xf3nico","required",""],["appearance","fill"],["type","text","matInput","","autocomplete","off","id","username","formControlName","username","placeholder","Nombre de Usuario","required",""],["mat-icon-button","","matSuffix","","tabindex","-1",3,"click","matTooltip"],["align","end"],["class","config-pass flex-fill",4,"ngIf"],["class","flex-row  flex-xs-column flex-fill flex-gap",4,"ngIf"],["animationDuration","0ms",1,"flex-fill","full-height-tabs","user-tabs",3,"color"],["mat-tab-label",""],[1,"flex-row","flex-xs-column",2,"overflow","hidden","height","100%"],[1,"flex-fill","xs-height-50",2,"padding","5px"],[2,"height","100%",3,"roleSelected","roleRemoved","changeDetected"],[2,"height","auto",3,"changeDetected"],[1,"flex-row","flex-gap",2,"overflow-x","hidden","height","calc(100% - 10px)","padding","5px"],[1,"flex-column","flex-fill",2,"padding","3px"],[2,"display","flex","align-items","center"],[1,"avatar-row-count"],[1,"flex-fill",3,"max","min","step","showTickMarks"],["matSliderThumb","",3,"ngModelChange","ngModel"],["class","flex-fill","style","overflow: auto;",4,"ngIf"],[1,"label-info"],["mat-button","","aria-label","Menu de Usuarios",3,"matMenuTriggerFor","disabled"],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",3,"click"],[1,"root-access"],[1,"label-info","screen-size-icon"],[1,"last-login","hide-xs"],[1,"label"],[1,"value"],["mat-button","","tabindex","-1",1,"boton-accion",3,"click","matTooltip","matTooltipPosition"],[3,"mode","color"],[1,"config-pass","flex-fill"],[1,"mensaje"],["matInput","","formControlName","password","placeholder","Contrase\xf1a","required","",3,"type","matAutocomplete"],["mat-icon-button","","matSuffix","","tabindex","-1",3,"click"],[3,"panelWidth"],["disabled","",2,"opacity","1 !important",3,"value"],["barLabel","Fortaleza: ",3,"passwordStrength","passwordToVerify"],["matInput","","formControlName","confirm_password","placeholder","ConfirmarContrase\xf1a","required","",3,"type"],[1,"flex-fill",2,"overflow","auto"],["rowHeight","1:1",2,"overflow","auto",3,"cols"],[4,"ngFor","ngForOf"],[1,"item-tile-wrapper"],[1,"flex-column","flex-fill","flex-gap","avatar-icon",3,"ngClass"],[1,"flex-fill",3,"click"],[2,"width","100%","height","100%",3,"svgIcon"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"section",3),t.bIt("keydown.escape",function(){return t.eBV(n),t.Njj(o.cancelarAccion())},!1,t.EBC),t.j41(1,"section",4)(2,"div",5),t.DNE(3,Pt,5,5,"div",6)(4,Dt,2,0,"div",7)(5,Tt,7,2,"button",8),t.j41(6,"mat-menu",null,0),t.DNE(8,It,5,1,"button",9),t.nrm(9,"mat-divider"),t.DNE(10,wt,5,1,"button",10)(11,St,5,1,"button",10),t.k0s(),t.j41(12,"button",11),t.bIt("click",function(){return t.eBV(n),t.Njj(o.guardarUsuario())}),t.j41(13,"mat-icon"),t.EFF(14),t.k0s(),t.j41(15,"span",12),t.EFF(16,"\xa0Guardar"),t.k0s()(),t.nrm(17,"div",13),t.DNE(18,yt,2,0,"div",14)(19,Mt,3,0,"div",15)(20,Ut,6,4,"div",16)(21,Gt,3,3,"button",17),t.j41(22,"button",18),t.bIt("click",function(){return t.eBV(n),t.Njj(o.cerrar())}),t.j41(23,"mat-icon"),t.EFF(24,"close"),t.k0s()()()(),t.DNE(25,$t,1,2,"mat-progress-bar",19),t.j41(26,"section"),t.nrm(27,"alert-panel"),t.k0s(),t.j41(28,"section",20)(29,"div",21)(30,"mat-card",22)(31,"div",23)(32,"mat-form-field",24)(33,"mat-label"),t.EFF(34,"Nombre Completo: "),t.k0s(),t.nrm(35,"input",25),t.DNE(36,Lt,2,0,"mat-error",26),t.k0s(),t.j41(37,"mat-form-field",24)(38,"mat-label"),t.EFF(39,"Correo Electr\xf3nico: "),t.k0s(),t.nrm(40,"input",27),t.DNE(41,Ot,2,0,"mat-error",26)(42,Nt,2,0,"mat-error",26)(43,Vt,2,0,"mat-error",26),t.k0s()(),t.j41(44,"div",23)(45,"mat-form-field",28)(46,"mat-label"),t.EFF(47,"Usuario: "),t.k0s(),t.nrm(48,"input",29),t.j41(49,"button",30),t.bIt("click",function(){return t.eBV(n),t.Njj(o.toggleConfigPass())}),t.j41(50,"mat-icon"),t.EFF(51),t.k0s()(),t.j41(52,"mat-hint",31),t.EFF(53),t.k0s(),t.DNE(54,Bt,2,0,"mat-error",26)(55,Yt,2,0,"mat-error",26)(56,Xt,2,0,"mat-error",26),t.k0s(),t.DNE(57,At,3,0,"div",32)(58,Kt,31,21,"div",33),t.k0s()(),t.j41(59,"mat-tab-group",34)(60,"mat-tab"),t.DNE(61,te,4,0,"ng-template",35),t.j41(62,"div",36)(63,"div",37)(64,"tab-roles",38),t.bIt("roleSelected",function(l){return t.eBV(n),t.Njj(o.addFromRole(l))})("roleRemoved",function(l){return t.eBV(n),t.Njj(o.removeFromRole(l))})("changeDetected",function(){return t.eBV(n),t.Njj(o.changesDetected=!0)}),t.k0s()(),t.j41(65,"div",37)(66,"tab-permissions",39),t.bIt("changeDetected",function(){return t.eBV(n),t.Njj(o.changesDetected=!0)}),t.k0s()()()(),t.j41(67,"mat-tab"),t.DNE(68,ee,4,0,"ng-template",35),t.j41(69,"div",40)(70,"div",41)(71,"div",5)(72,"div",42)(73,"span",43),t.EFF(74),t.k0s()(),t.j41(75,"mat-slider",44)(76,"input",45),t.mxI("ngModelChange",function(l){return t.eBV(n),t.DH7(o.avatarRowCount,l)||(o.avatarRowCount=l),t.Njj(l)}),t.k0s()(),t.nrm(77,"div",13),t.k0s(),t.DNE(78,oe,3,2,"mat-card",46),t.k0s()()()()()()()}if(2&s){let n;t.R7$(3),t.Y8G("ngIf",o.statusUser),t.R7$(),t.Y8G("ngIf",!o.statusUser),t.R7$(),t.Y8G("ngIf",o.statusUser),t.R7$(3),t.Y8G("ngIf",o.inData.id),t.R7$(2),t.Y8G("ngIf",3==o.statusUser||4==o.statusUser),t.R7$(),t.Y8G("ngIf",4!=o.statusUser),t.R7$(),t.Y8G("disabled",o.isLoading||o.isSaving||!o.formUsuario.valid||o.isSendingEmail),t.R7$(2),t.JRh(o.changesDetected?"save_as":"save"),t.R7$(4),t.Y8G("ngIf",o.isRoot),t.R7$(),t.Y8G("ngIf","xs"==o.currentScreenSize||"sm"==o.currentScreenSize),t.R7$(),t.Y8G("ngIf",o.statusUser),t.R7$(),t.Y8G("ngIf","xs"!=o.currentScreenSize&&"sm"!=o.currentScreenSize),t.R7$(4),t.Y8G("ngIf",o.isLoading||o.isSaving||o.isSendingEmail),t.R7$(5),t.Y8G("formGroup",o.formUsuario),t.R7$(6),t.Y8G("ngIf",o.formUsuario.get("name").hasError("required")),t.R7$(5),t.Y8G("ngIf",o.formUsuario.get("email").hasError("required")),t.R7$(),t.Y8G("ngIf",o.formUsuario.get("email").hasError("email")),t.R7$(),t.Y8G("ngIf",o.formUsuario.get("email").hasError("duplicated")),t.R7$(6),t.Y8G("matTooltip",o.configPass?"":"Escribir Contrase\xf1a"),t.BMQ("aria-label","Config Pass")("aria-pressed",o.configPass),t.R7$(2),t.JRh(o.configPass?"lock_reset":"keyboard"),t.R7$(2),t.JRh((null==(n=o.formUsuario.get("username").value)?null:n.length)||0),t.R7$(),t.Y8G("ngIf",o.formUsuario.get("username").hasError("required")),t.R7$(),t.Y8G("ngIf",o.formUsuario.get("username").hasError("minlength")),t.R7$(),t.Y8G("ngIf",o.formUsuario.get("username").hasError("duplicated")),t.R7$(),t.Y8G("ngIf",!o.inData.id&&!o.configPass),t.R7$(),t.Y8G("ngIf",o.configPass),t.R7$(),t.Y8G("color","primary"),t.R7$(15),t.JRh(o.avatarRowCount),t.R7$(),t.Y8G("max",10)("min",3)("step",1)("showTickMarks",!0),t.R7$(),t.R50("ngModel",o.avatarRowCount),t.R7$(2),t.Y8G("ngIf",o.avatarsList)}},dependencies:[u.YU,u.Sq,u.bT,c.me,c.BC,c.cb,c.YS,c.vS,h.$z,h.iY,R.An,x.fg,p.rl,p.nJ,p.MV,p.TL,p.yw,V.q,B.ES,B.mq,B.T8,D.RN,y.wT,w.kk,w.fb,w.Cp,E.$3,E.pN,H.B_,H.NS,L.oV,Z.IV,Z.OU,M.HM,c.j4,c.JD,F.m,xt.G,Q,q,u.vh],styles:["@media (max-width: 599.98px){.xs-height-50[_ngcontent-%COMP%]{height:50%}.xs-max-height-user-form[_ngcontent-%COMP%]{max-height:20%;overflow:auto}}.root-access[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;font-weight:600;color:gold!important;display:flex;align-items:center;cursor:default}.user-tabs[_ngcontent-%COMP%]{background-color:#e6e6fa}.config-pass[_ngcontent-%COMP%]{padding:8px;border:1px solid lightgray;background-color:#87cefa80;display:flex;align-items:center}.config-pass[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{width:100%;font-weight:400;font-size:large;color:#515050;padding:8px;text-align:center;cursor:default}.item-tile-wrapper[_ngcontent-%COMP%]{padding:8px;position:absolute;inset:0}.avatar-icon[_ngcontent-%COMP%]{padding:5px;border:1px solid rgba(0,0,0,0);border-radius:3px;cursor:pointer}.avatar-icon[_ngcontent-%COMP%]:hover{border:1px solid rgba(0,0,0,.25);background-color:#f5f5f5}.avatar-icon.selected[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.4);background-color:#4053bf}.avatar-row-count[_ngcontent-%COMP%]{padding:8px;text-align:center;border:1px solid rgba(0,0,0,.4);border-radius:15%;margin:5px;width:35px;cursor:default}.last-login[_ngcontent-%COMP%]{padding-right:5px;padding-top:4px}.last-login[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:small}.last-login[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#d3d3d3}.status-label.status-inactive[_ngcontent-%COMP%]{color:#bdbdbd!important;background-color:#4f4f4f!important}.status-label.status-active[_ngcontent-%COMP%]{--color: 120}.status-label.status-blocked[_ngcontent-%COMP%]{--color: 52}.status-label.status-banned[_ngcontent-%COMP%]{--color: 6}.status-label[_ngcontent-%COMP%]{color:hsl(var(--color),100%,75%);background-color:hsl(var(--color),100%,25%)}"]})}return i})();class ne{constructor(){if(this.onMessage=new O.B,this.onError=new O.B,!Worker)throw new Error("WebWorker is not enabled");this.worker=new Worker(m.tu(new URL(m.p+m.u(953),m.b))),this.worker.onmessage=e=>{this.onMessage.next(e)},this.worker.onerror=e=>{this.onError.next(e)}}postMessage(a){this.worker.postMessage(a)}onmessage(){return this.onMessage.asObservable()}onerror(){return this.onError.asObservable()}terminate(){this.worker&&this.worker.terminate()}}var ae=m(2578),re=m(5498),d=m(9159),j=m(8067);const le=()=>["loadingResults"],ce=()=>["noResultsFound"],me=()=>[25,50,100],de=(i,a)=>({id:i,status:a}),K=i=>({hide:i});function ue(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cleanSearch())}),t.j41(1,"mat-icon"),t.EFF(2,"close"),t.k0s()()}2&i&&t.BMQ("aria-label","Clean Query")("aria-pressed","cleanQuery")}function pe(i,a){1&i&&t.nrm(0,"mat-progress-bar",40)}function ge(i,a){1&i&&(t.j41(0,"th",41),t.EFF(1,"Estatus"),t.k0s())}function fe(i,a){if(1&i&&(t.j41(0,"td",42)(1,"div",43),t.nrm(2,"img",44),t.j41(3,"mat-icon"),t.EFF(4),t.k0s()()()),2&i){const e=a.$implicit,s=t.XpG();t.R7$(2),t.FS9("src",e.avatar,t.B4B),t.R7$(),t.ZvI("status-",s.statusDesc[e.status].key," status-icon"),t.R7$(),t.JRh(s.statusDesc[e.status].icon)}}function _e(i,a){1&i&&(t.j41(0,"th",45),t.EFF(1,"Usuario"),t.k0s())}function he(i,a){if(1&i&&(t.j41(0,"td",46),t.EFF(1),t.j41(2,"span",47),t.EFF(3),t.k0s()()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.username," "),t.R7$(2),t.JRh(e.email)}}function be(i,a){1&i&&(t.j41(0,"th",48),t.EFF(1,"Nombre Completo"),t.k0s())}function Ce(i,a){if(1&i&&(t.j41(0,"td",49),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.JRh(e.name)}}function Fe(i,a){1&i&&(t.j41(0,"th",50),t.EFF(1,"Correo"),t.k0s())}function ke(i,a){if(1&i&&(t.j41(0,"td",51),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.JRh(e.email)}}function ve(i,a){1&i&&(t.j41(0,"th",52),t.EFF(1,"Ultima Sesi\xf3n"),t.k0s())}function Re(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"Nunca"),t.k0s())}function xe(i,a){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.nrm(3,"br"),t.EFF(4),t.nI1(5,"date"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,2,e.last_login_at,"dd - MMM - y"),""),t.R7$(3),t.SpI(" ",t.i5U(5,5,e.last_login_at,"h:mm a")," ")}}function je(i,a){if(1&i&&(t.j41(0,"td",53),t.DNE(1,Re,2,0,"span",54)(2,xe,6,8,"span",54),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.Y8G("ngIf",!e.last_login_at),t.R7$(),t.Y8G("ngIf",e.last_login_at)}}function Ee(i,a){1&i&&(t.j41(0,"th",55),t.EFF(1," Actualizado "),t.k0s())}function Pe(i,a){if(1&i&&(t.j41(0,"td",56),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.updated_at,"dd - MMM - y"))}}function De(i,a){if(1&i&&(t.j41(0,"td",57),t.EFF(1," --| Cargando Registros |-- "),t.nrm(2,"mat-progress-bar",40),t.k0s()),2&i){const e=t.XpG();t.BMQ("colspan",e.displayedColumns.length)}}function Te(i,a){if(1&i&&(t.j41(0,"td",57),t.EFF(1," No se encontraron registros "),t.k0s()),2&i){const e=t.XpG();t.BMQ("colspan",e.displayedColumns.length)}}function Ie(i,a){1&i&&t.nrm(0,"tr",58)}function we(i,a){if(1&i){const e=t.RV6();t.j41(0,"tr",59),t.bIt("click",function(){const o=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.openDialogUser(o.id))}),t.k0s()}if(2&i){const e=a.$implicit;t.XpG();const s=t.sdS(50);t.Y8G("cdkContextMenuTriggerFor",s)("cdkContextMenuTriggerData",t.l_i(2,de,e.id,e.status))}}function Se(i,a){if(1&i&&t.nrm(0,"tr",60),2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(1,K,!e.isLoadingResults))}}function ye(i,a){if(1&i&&t.nrm(0,"tr",60),2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(1,K,!(null!=e.data&&0==e.data.length&&!e.isLoadingResults)))}}function Me(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const o=t.XpG().id,n=t.XpG();return t.Njj(n.changeStatusUser(o,2))}),t.j41(1,"mat-icon"),t.EFF(2,"done_outline"),t.k0s(),t.EFF(3,"\xa0Activar Usuario"),t.k0s()}}function Ue(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",66),t.bIt("click",function(){t.eBV(e);const o=t.XpG().id,n=t.XpG();return t.Njj(n.changeStatusUser(o,4))}),t.j41(1,"mat-icon"),t.EFF(2,"block"),t.k0s(),t.EFF(3,"\xa0Banear Usuario"),t.k0s()}}function Ge(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",61)(1,"button",62),t.bIt("click",function(){const o=t.eBV(e).id,n=t.XpG();return t.Njj(n.openDialogUser(o))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s(),t.EFF(4,"\xa0Editar"),t.k0s(),t.DNE(5,Me,4,0,"button",63)(6,Ue,4,0,"button",64),t.k0s()}if(2&i){const e=a.status;t.R7$(5),t.Y8G("ngIf",4==e),t.R7$(),t.Y8G("ngIf",4!=e)}}const Le=[{path:"",component:at,canActivate:[U.q]},{path:"usuarios",component:(()=>{class i{constructor(e,s,o){this.usuariosService=e,this.authService=s,this.dialog=o,this.statusDesc=z,this.pageSize=50,this.displayedColumns=["status","username","name","email","last_login_at","updated_at"],this.resultsLength=0}ngOnInit(){this.data=[],this.searchQuery="",setTimeout(()=>{this.applySearch()},10)}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.applySearch()}),this.paginator.page.subscribe(()=>{this.pageSize!=this.paginator.pageSize&&(this.paginator.pageIndex=0,this.pageSize=this.paginator.pageSize),this.applySearch()})}cleanSearch(){this.searchQuery=""}applySearch(){this.isLoadingResults=!0;let e={sort:this.sort.active,direction:this.sort.direction,page:this.paginator.pageIndex+1,per_page:this.paginator.pageSize,query:this.searchQuery};return this.data=[],this.usuariosService.obtenerUsuarios(e).subscribe({next:s=>{this.isLoadingResults=!1,this.resultsLength=s.data.total,this.data=s.data.data},error:s=>{this.alertPanel.showError(s.error.message),this.isLoadingResults=!1}})}changeStatusUser(e,s){let o,n,r,l;4==s?(o="Esta seguro de Banear a este usuario?",r="Banear",n="block",l="warn"):(o="Esta seguro de Activar a este usuario?",r="Activar",n="done_outline",l="primary");const f=this.dialog.open(P.e,{width:"500px",data:{title:"Modificar Estatus",message:o,hasOKBtn:!0,btnColor:l,btnText:r,btnIcon:n}});let b={status:s};f.afterClosed().subscribe(S=>{S&&this.usuariosService.cambiarStatus(e,b).subscribe(Io=>{this.applySearch()})})}openDialogUser(e){let s={maxWidth:"100%",width:"80%",height:"60%",disableClose:!0,data:{}};e&&(s.data.id=e),this.dialog.open(se,s).afterClosed().subscribe(n=>{console.log(`Dialog result: ${n}`),n&&this.applySearch()})}exportPDF(){if(!this.isLoadingPDF)return this.isLoadingPDF=!0,this.usuariosService.obtenerUsuarios({sort:this.sort.active,direction:this.sort.direction,query:this.searchQuery}).subscribe({next:s=>{if(s.data.length>0){let o=new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date);const n=new ne;n.onmessage().subscribe(b=>{ae.saveAs(b.data,"Reporte-Usuarios ("+o+")"),n.terminate(),this.isLoadingPDF=!1}),n.onerror().subscribe(b=>{this.alertPanel.showError(b.message),this.isLoadingPDF=!1,n.terminate()});let r={},l=this.authService.getUserData();r.firmas=[{etiqueta:"REALIZ\xd3",nombre:l.name,cargo:"Usuario del Sistema"},{etiqueta:"REVIS\xd3",nombre:"",cargo:"Responsable del Sistema"}],n.postMessage({data:{items:s.data,config:r},reporte:"control-acceso/usuarios"})}else this.alertPanel.showInfo("No se encontraron resultados"),this.isLoadingPDF=!1},error:s=>{this.alertPanel.showError(s.error.message),this.isLoadingPDF=!1}})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(W),t.rXU(re.u),t.rXU(_.bZ))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-lista-usuarios"]],viewQuery:function(s,o){if(1&s&&(t.GBs(v.iy,5),t.GBs(G.B4,5),t.GBs(F.m,5)),2&s){let n;t.mGM(n=t.lsd())&&(o.paginator=n.first),t.mGM(n=t.lsd())&&(o.sort=n.first),t.mGM(n=t.lsd())&&(o.alertPanel=n.first)}},decls:51,vars:17,consts:[["rowMenu",""],[1,"flex-row","flex-gap","module-search-bar"],["appearance","fill",1,"flex-fill"],["matInput","","placeholder","Buscar usuario","autocomplete","off",3,"ngModelChange","keyup.escape","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],["mat-icon-button","",3,"click","disabled"],["svgIcon","pdf-icon"],["mat-raised-button","","color","primary",3,"click","matTooltip"],["mode","query",4,"ngIf"],[1,"table-card","flex-fill"],[1,"flex-column",2,"height","100%"],[1,"main-list-table","left-click-open","flex-fill"],["mat-table","","matSort","","matSortActive","updated_at","matSortDirection","desc",3,"dataSource"],["matColumnDef","status"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","width","1","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","width","1",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","hide-xs",4,"matHeaderCellDef"],["mat-cell","","class","hide-xs",4,"matCellDef"],["matColumnDef","email"],["mat-header-cell","","width","1","class","hide-sm hide-xs",4,"matHeaderCellDef"],["mat-cell","","width","1","class","hide-sm hide-xs",4,"matCellDef"],["matColumnDef","last_login_at"],["width","1","style","white-space: nowrap;","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap; text-align: center;",4,"matCellDef"],["matColumnDef","updated_at"],["width","1","mat-header-cell","","mat-sort-header","","disableClear","","class","hide-sm hide-xs",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap; text-align: center;","class","hide-sm hide-xs",4,"matCellDef"],["matColumnDef","loadingResults"],["mat-footer-cell","","class","no-results-found",4,"matFooterCellDef"],["matColumnDef","noResultsFound"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","","aria-label","Selecciona una p\xe1gina",3,"length","pageSize","pageSizeOptions"],["matSuffix","","mat-icon-button","",3,"click"],["mode","query"],["mat-header-cell","","width","1"],["mat-cell",""],[1,"avatar-with-status"],["alt","",2,"width","auto","margin","auto",3,"src"],["mat-header-cell","","width","1","mat-sort-header",""],["mat-cell","","width","1"],[1,"extra-data","hide-gt-sm",2,"white-space","nowrap"],["mat-header-cell","",1,"hide-xs"],["mat-cell","",1,"hide-xs"],["mat-header-cell","","width","1",1,"hide-sm","hide-xs"],["mat-cell","","width","1",1,"hide-sm","hide-xs"],["width","1","mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],["mat-cell","",2,"white-space","nowrap","text-align","center"],[4,"ngIf"],["width","1","mat-header-cell","","mat-sort-header","","disableClear","",1,"hide-sm","hide-xs"],["mat-cell","",1,"hide-sm","hide-xs",2,"white-space","nowrap","text-align","center"],["mat-footer-cell","",1,"no-results-found"],["mat-header-row",""],["mat-row","",3,"click","cdkContextMenuTriggerFor","cdkContextMenuTriggerData"],["mat-footer-row","",3,"ngClass"],["cdkMenu","",1,"context-menu","mat-elevation-z2"],["cdkMenuItem","",1,"context-menu-item",3,"click"],["class","context-menu-item","cdkMenuItem","","style","color: green;",3,"click",4,"ngIf"],["class","context-menu-item","cdkMenuItem","","style","color: red;",3,"click",4,"ngIf"],["cdkMenuItem","",1,"context-menu-item",2,"color","green",3,"click"],["cdkMenuItem","",1,"context-menu-item",2,"color","red",3,"click"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),t.EFF(3,"Buscar"),t.k0s(),t.j41(4,"input",3),t.mxI("ngModelChange",function(l){return t.eBV(n),t.DH7(o.searchQuery,l)||(o.searchQuery=l),t.Njj(l)}),t.bIt("keyup.escape",function(){return t.eBV(n),t.Njj(o.cleanSearch())})("keyup.enter",function(){return t.eBV(n),t.Njj(o.applySearch())}),t.k0s(),t.DNE(5,ue,3,2,"button",4),t.j41(6,"button",5),t.bIt("click",function(){return t.eBV(n),t.Njj(o.applySearch())}),t.j41(7,"mat-icon"),t.EFF(8,"search"),t.k0s()()(),t.j41(9,"button",6),t.bIt("click",function(){return t.eBV(n),t.Njj(o.exportPDF())}),t.nrm(10,"mat-icon",7),t.k0s(),t.j41(11,"button",8),t.bIt("click",function(){return t.eBV(n),t.Njj(o.openDialogUser())}),t.j41(12,"mat-icon"),t.EFF(13,"add"),t.k0s()()(),t.j41(14,"div"),t.nrm(15,"alert-panel"),t.DNE(16,pe,1,0,"mat-progress-bar",9),t.k0s(),t.j41(17,"mat-card",10)(18,"div",11)(19,"div",12)(20,"table",13),t.qex(21,14),t.DNE(22,ge,2,0,"th",15)(23,fe,5,5,"td",16),t.bVm(),t.qex(24,17),t.DNE(25,_e,2,0,"th",18)(26,he,4,2,"td",19),t.bVm(),t.qex(27,20),t.DNE(28,be,2,0,"th",21)(29,Ce,2,1,"td",22),t.bVm(),t.qex(30,23),t.DNE(31,Fe,2,0,"th",24)(32,ke,2,1,"td",25),t.bVm(),t.qex(33,26),t.DNE(34,ve,2,0,"th",27)(35,je,3,2,"td",28),t.bVm(),t.qex(36,29),t.DNE(37,Ee,2,0,"th",30)(38,Pe,3,4,"td",31),t.bVm(),t.qex(39,32),t.DNE(40,De,3,1,"td",33),t.bVm(),t.qex(41,34),t.DNE(42,Te,2,1,"td",33),t.bVm(),t.DNE(43,Ie,1,0,"tr",35)(44,we,1,5,"tr",36)(45,Se,1,3,"tr",37)(46,ye,1,3,"tr",37),t.k0s()(),t.j41(47,"div"),t.nrm(48,"mat-paginator",38),t.k0s()()(),t.DNE(49,Ge,7,2,"ng-template",null,0,t.C5r)}2&s&&(t.R7$(4),t.R50("ngModel",o.searchQuery),t.R7$(),t.Y8G("ngIf",o.searchQuery),t.R7$(4),t.Y8G("disabled",o.isLoadingPDF),t.R7$(2),t.Y8G("matTooltip","Nuevo Usuario"),t.R7$(5),t.Y8G("ngIf",o.isLoadingPDF),t.R7$(4),t.Y8G("dataSource",o.data),t.R7$(23),t.Y8G("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("matFooterRowDef",t.lJ4(14,le)),t.R7$(),t.Y8G("matFooterRowDef",t.lJ4(15,ce)),t.R7$(2),t.Y8G("length",o.resultsLength)("pageSize",o.pageSize)("pageSizeOptions",t.lJ4(16,me)))},dependencies:[u.YU,u.bT,c.me,c.BC,c.vS,h.$z,h.iY,R.An,x.fg,p.rl,p.nJ,p.yw,D.RN,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.Zq,d.xW,d.KS,d.$R,d.Qo,d.YZ,d.NB,d.iF,v.iy,L.oV,j.CS,j.p$,j.v2,M.HM,G.B4,G.aE,F.m,u.vh],styles:[".data-table-container[_ngcontent-%COMP%]{position:relative}.loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000026;z-index:1;display:flex;align-items:center;justify-content:center}.table-card[_ngcontent-%COMP%]{padding:0}.data-table[_ngcontent-%COMP%]{overflow:auto;background-color:#fff5ee}.avatar-with-status[_ngcontent-%COMP%]{position:relative;height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.extra-data[_ngcontent-%COMP%]{display:block;font-size:small}.status-inactive.status-icon[_ngcontent-%COMP%]{color:#bdbdbd!important;background-color:#4f4f4f!important}.status-active.status-icon[_ngcontent-%COMP%]{--color: 120}.status-blocked.status-icon[_ngcontent-%COMP%]{--color: 52}.status-banned.status-icon[_ngcontent-%COMP%]{--color: 6}.status-icon[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;font-size:medium;width:auto;height:auto;color:hsl(var(--color),100%,75%);background-color:hsl(var(--color),100%,25%);padding:1px;border-radius:9px}.button-container[_ngcontent-%COMP%]{padding-bottom:1.34375em;padding-left:5px}.button-container[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{height:100%}.button-container[_ngcontent-%COMP%]   .thin-button[_ngcontent-%COMP%]{padding:3px;min-width:10px}"]})}return i})(),canActivate:[U.q]}];let Oe=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[T.iI.forChild(Le),T.iI]})}return i})();var Y=m(3887),Ne=m(2092);function Ve(i,a){if(1&i){const e=t.RV6();t.j41(0,"mat-icon",21),t.bIt("click",function(){t.eBV(e),t.XpG();const o=t.sdS(5);return t.Njj(o.value="")}),t.EFF(1,"clear"),t.k0s()}}function Be(i,a){1&i&&(t.j41(0,"button",22),t.EFF(1,"Sin Distritos Cargados"),t.k0s())}function Ye(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.filtrarPorDistrito())}),t.EFF(1,"TODOS"),t.k0s()}}function Xe(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){const o=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.filtrarPorDistrito(o))}),t.EFF(1),t.k0s()}if(2&i){const e=a.$implicit;t.R7$(),t.Lme("",e.clave," - ",e.descripcion,"")}}function Ae(i,a){1&i&&(t.j41(0,"div",24),t.EFF(1,"Cargando..."),t.k0s())}function ze(i,a){1&i&&(t.j41(0,"div",24),t.EFF(1,"---| Buscar Unidades |---"),t.k0s())}function Je(i,a){1&i&&(t.j41(0,"div",24),t.EFF(1,"Sin resultados obtenidos"),t.k0s())}function Qe(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",25),t.bIt("click",function(){const o=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.seleccionar(o))}),t.j41(1,"div",26)(2,"div",27)(3,"span"),t.EFF(4,"CLUES:"),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"div",28)(7,"span"),t.EFF(8),t.k0s(),t.EFF(9),t.k0s()(),t.j41(10,"div",29),t.EFF(11),t.k0s()()}if(2&i){const e=a.$implicit;t.R7$(5),t.SpI(" ",e.clues,""),t.R7$(3),t.SpI("DISTRITO ",e.distrito.clave,":"),t.R7$(),t.SpI(" ",e.distrito.descripcion,""),t.R7$(2),t.SpI(" ",e.descripcion," ")}}function qe(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",30)(1,"button",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.seleccionarTodos())}),t.j41(2,"mat-icon"),t.EFF(3,"clear_all"),t.k0s(),t.EFF(4," Todos"),t.k0s()()}}function We(i,a){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.SpI(" ",t.bMT(2,1,e.responseUnidades.length)," Resultados ")}}let He=(()=>{class i{constructor(e){this.http=e,this.url_unidades=`${k.c.base_url}/unidades`,this.url_buscador_catalogos=`${k.c.base_url}/buscador-unidades-catalogos`}buscar(e){return this.http.get(this.url_unidades,{params:e})}getCatalogos(){return this.http.get(this.url_buscador_catalogos,{})}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO($.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ze=(()=>{class i{constructor(e){this.service=e,this.ctrlNoMostrarUnidades={},this.unidadSeleccionada=new t.bkB,this.unidadesSeleccionadas=new t.bkB}ngOnInit(){this.isLoading=!0,this.listaDistritos=[],this.service.getCatalogos().subscribe({next:e=>{e.data.distritos&&(this.listaDistritos=e.data.distritos),this.isLoading=!1},error:e=>{this.isLoading=!1,console.log(e.error.message)}})}filtrarPorDistrito(e){this.distritoSeleccionado=e||void 0}seleccionarTodos(){this.unidadesSeleccionadas.emit(this.responseUnidades),this.responseUnidades=[]}seleccionar(e){if(e){this.unidadSeleccionada.emit(e);let s=this.responseUnidades.findIndex(o=>o.id==e.id);s>=0&&this.responseUnidades.splice(s,1)}}buscarUnidades(e){if(!this.isLoading){this.isLoading=!0,this.responseUnidades=[];const s=e.value;let o={};s&&(o.query=encodeURIComponent(s)),this.distritoSeleccionado&&(o.distrito_id=this.distritoSeleccionado.id),this.service.buscar(o).subscribe({next:n=>{let r=[];n.data.forEach(l=>{this.ctrlNoMostrarUnidades[l.id]||r.push(l)}),this.responseUnidades=r,this.isLoading=!1},error:n=>{console.log(n),this.isLoading=!1}})}}limpiarBusqueda(){this.responseUnidades=[]}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(He))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["widget-buscador-unidades"]],inputs:{ctrlNoMostrarUnidades:"ctrlNoMostrarUnidades"},outputs:{unidadSeleccionada:"unidadSeleccionada",unidadesSeleccionadas:"unidadesSeleccionadas"},standalone:!0,features:[t.aNF],decls:32,vars:13,consts:[["searchUnidad",""],["menuDistritos","matMenu"],[1,"flex-column","flex-gap",2,"height","calc(100% - 10px)","padding","5px","background-color","white"],[1,"flex-column","flex-gap"],["appearance","outline","autocomplete","off",1,"flex-fill","small-search-input"],["matInput","","placeholder","Buscar Unidad","autocomplete","off",3,"keyup.enter"],["matPrefix",""],["matSuffix","","class","action",3,"click",4,"ngIf"],[1,"flex-row","flex-gap"],["mat-stroked-button","",1,"flex-fill",3,"matMenuTriggerFor","disabled"],["mat-menu-item","","disabled","",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click"],[1,"flex-fill","lista-resultados",2,"overflow","auto","text-align","center","height","0"],["class","item-resultado",4,"ngIf"],["class","item-resultado",3,"click",4,"ngFor","ngForOf"],[1,"flex-row","total-resultados"],["style","padding: 5px;",4,"ngIf"],[1,"flex-fill"],[4,"ngIf"],["matSuffix","",1,"action",3,"click"],["mat-menu-item","","disabled",""],["mat-menu-item","",3,"click"],[1,"item-resultado"],[1,"item-resultado",3,"click"],[1,"encabezado"],[1,"clues"],[1,"distrito"],[1,"nombre-unidad"],[2,"padding","5px"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div")(3,"mat-form-field",4)(4,"input",5,0),t.bIt("keyup.enter",function(){t.eBV(n);const l=t.sdS(5);return t.Njj(o.buscarUnidades(l))}),t.k0s(),t.j41(6,"mat-icon",6),t.EFF(7,"search"),t.k0s(),t.DNE(8,Ve,2,0,"mat-icon",7),t.k0s()(),t.j41(9,"div",8)(10,"button",9),t.EFF(11),t.j41(12,"mat-icon"),t.EFF(13,"arrow_drop_down"),t.k0s()(),t.j41(14,"mat-menu",null,1),t.DNE(16,Be,2,0,"button",10)(17,Ye,2,0,"button",11)(18,Xe,2,2,"button",12),t.k0s(),t.j41(19,"button",13),t.bIt("click",function(){t.eBV(n);const l=t.sdS(5);return t.Njj(o.buscarUnidades(l))}),t.j41(20,"mat-icon"),t.EFF(21,"search"),t.k0s(),t.EFF(22," Buscar"),t.k0s()()(),t.j41(23,"div",14),t.DNE(24,Ae,2,0,"div",15)(25,ze,2,0,"div",15)(26,Je,2,0,"div",15)(27,Qe,12,4,"div",16),t.k0s(),t.j41(28,"div",17),t.DNE(29,qe,5,0,"div",18),t.nrm(30,"div",19),t.DNE(31,We,3,3,"div",20),t.k0s()()}if(2&s){const n=t.sdS(5),r=t.sdS(15);t.R7$(8),t.Y8G("ngIf",n.value),t.R7$(2),t.Y8G("matMenuTriggerFor",r)("disabled",o.isLoading),t.R7$(),t.SpI(" ",o.distritoSeleccionado?o.distritoSeleccionado.descripcion:"Seleccionar Distrito"," "),t.R7$(5),t.Y8G("ngIf",0==o.listaDistritos.length),t.R7$(),t.Y8G("ngIf",o.listaDistritos.length>0),t.R7$(),t.Y8G("ngForOf",o.listaDistritos),t.R7$(6),t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",!o.isLoading&&!o.responseUnidades),t.R7$(),t.Y8G("ngIf",!o.isLoading&&o.responseUnidades&&0==o.responseUnidades.length),t.R7$(),t.Y8G("ngForOf",o.responseUnidades),t.R7$(2),t.Y8G("ngIf",o.responseUnidades&&o.responseUnidades.length>0),t.R7$(2),t.Y8G("ngIf",!o.isLoading&&o.responseUnidades)}},dependencies:[Ne.G,h.$z,R.An,x.fg,p.rl,p.JW,p.yw,w.kk,w.fb,w.Cp,u.MD,u.Sq,u.bT,u.QX],styles:[".lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]{width:-webkit-fill-available;padding:5px;cursor:default}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .encabezado[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:inline-block;font-size:x-small;font-weight:500}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]:nth-child(odd){background-color:#0000000d}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .encabezado[_ngcontent-%COMP%]   .clues[_ngcontent-%COMP%]{text-align:left}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .encabezado[_ngcontent-%COMP%]   .distrito[_ngcontent-%COMP%]{text-align:right}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]   .nombre-unidad[_ngcontent-%COMP%]{padding:5px 0}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.lista-resultados[_ngcontent-%COMP%]   .item-resultado[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid darkgrey}.total-resultados[_ngcontent-%COMP%]{text-align:right;color:#a9a9a9;font-size:small;border-top:1px solid darkgrey}"]})}return i})(),tt=(()=>{class i{constructor(e){this.http=e,this.url=`${k.c.base_url}/role`,this.url_catalogos=`${k.c.base_url}/catalogos-generales`}getRolesList(e){return this.http.get(this.url,{params:e}).pipe((0,g.T)(s=>s))}getRole(e){return this.http.get(this.url+"/"+e,{}).pipe((0,g.T)(s=>s))}updateRole(e,s){return this.http.put(this.url+"/"+e,s).pipe((0,g.T)(o=>o))}createRole(e){return this.http.post(this.url,e).pipe((0,g.T)(s=>s))}deleteRole(e){return this.http.delete(this.url+"/"+e,{}).pipe((0,g.T)(s=>s))}obtenerCatalogos(e){return this.http.post(this.url_catalogos,e).pipe((0,g.T)(s=>s))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO($.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),X=(()=>{class i{constructor(e){this.http=e,this.url=`${k.c.base_url}/permission`}getPermissionList(e){return this.http.get(this.url,{params:e}).pipe((0,g.T)(s=>s))}getAllPermissions(){return this.http.get(this.url,{}).pipe((0,g.T)(e=>e))}getPermission(e){return this.http.get(this.url+"/"+e,{}).pipe((0,g.T)(s=>s))}updatePermission(e,s){return this.http.put(this.url+"/"+e,s).pipe((0,g.T)(o=>o))}createPermission(e){return this.http.post(this.url,e).pipe((0,g.T)(s=>s))}deletePermission(e){return this.http.delete(this.url+"/"+e,{}).pipe((0,g.T)(s=>s))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO($.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var et=m(7987);function Ke(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"Editar"),t.k0s())}function ti(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"Nuevo"),t.k0s())}function ei(i,a){if(1&i&&(t.j41(0,"mat-list-item",36)(1,"div",37),t.EFF(2),t.k0s(),t.nrm(3,"mat-divider"),t.k0s()),2&i){const e=a.$implicit;t.R7$(2),t.JRh(e.username)}}function ii(i,a){1&i&&(t.j41(0,"mat-list-item",36)(1,"div",38),t.EFF(2,"No hay Usuarios asignados"),t.k0s()())}function oi(i,a){if(1&i&&(t.j41(0,"mat-card",32)(1,"mat-list",33),t.DNE(2,ei,4,1,"mat-list-item",34)(3,ii,3,0,"mat-list-item",35),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.rol.users),t.R7$(),t.Y8G("ngIf",0==e.rol.users.length)}}function si(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",28)(1,"button",29,1),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.listaUsuariosIsVisible=!o.listaUsuariosIsVisible)}),t.j41(3,"mat-icon"),t.EFF(4,"account_circle"),t.k0s(),t.j41(5,"span")(6,"span",30),t.EFF(7,"Usuarios :"),t.k0s(),t.EFF(8),t.k0s()(),t.DNE(9,oi,4,2,"ng-template",31),t.bIt("overlayKeydown",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.listaUsuariosIsVisible=!1)})("overlayOutsideClick",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.listaUsuariosIsVisible=!1)}),t.k0s()}if(2&i){const e=t.sdS(2),s=t.XpG();t.R7$(8),t.SpI(" ",s.rol.users.length,""),t.R7$(),t.Y8G("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",s.listaUsuariosIsVisible)}}function ni(i,a){1&i&&t.nrm(0,"mat-progress-bar",39),2&i&&t.Y8G("mode","query")}function ai(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Este campo es obligatorio"),t.k0s())}function ri(i,a){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"playlist_add_check"),t.k0s())}function li(i,a){1&i&&(t.j41(0,"span",44),t.EFF(1,"--root--"),t.k0s())}function ci(i,a){if(1&i&&(t.j41(0,"mat-option",40)(1,"div",41)(2,"span",42),t.EFF(3),t.k0s(),t.DNE(4,ri,2,0,"mat-icon",5),t.EFF(5),t.DNE(6,li,2,0,"span",43),t.k0s()()),2&i){const e=a.$implicit,s=t.XpG();t.Y8G("value",e)("disabled",s.controlSelPermissions[e.id]),t.R7$(3),t.JRh(e.group),t.R7$(),t.Y8G("ngIf",s.controlSelPermissions[e.id]),t.R7$(),t.SpI("\xa0",e.description,"\xa0"),t.R7$(),t.Y8G("ngIf",e.is_super)}}function mi(i,a){1&i&&(t.j41(0,"span",44),t.EFF(1,"--root--"),t.k0s())}function di(i,a){if(1&i){const e=t.RV6();t.j41(0,"mat-list-item",45)(1,"div",46)(2,"div",47)(3,"span",42),t.EFF(4),t.k0s(),t.EFF(5),t.DNE(6,mi,2,0,"span",43),t.k0s(),t.j41(7,"span",48)(8,"button",49),t.bIt("click",function(){const o=t.eBV(e).index,n=t.XpG();return t.Njj(n.removePermission(o))}),t.j41(9,"mat-icon"),t.EFF(10,"do_not_disturb_on"),t.k0s()()()()()}if(2&i){const e=a.$implicit;t.R7$(4),t.JRh(e.group),t.R7$(),t.SpI(" ",e.description,"\xa0"),t.R7$(),t.Y8G("ngIf",e.is_super)}}function ui(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.confirmDeleteRole())}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Eliminar"),t.k0s()}}let pi=(()=>{class i{constructor(e,s,o,n,r,l){this.rolesService=e,this.permissionsService=s,this.dialogRef=o,this.dialog=n,this.fb=r,this.data=l,this.isLoading=!1,this.rol={},this.catalogPermissions=[],this.selectedPermissions=[],this.controlSelPermissions={},this.catalogos={},this.filteredCatalogs={},this.rolForm=this.fb.group({id:[""],name:["",[c.k0.required]],permissions:[[],[c.k0.required]],nivel_id:[""]})}ngOnInit(){this.listaUsuariosIsVisible=!1,this.isLoading=!0,this.catalogPermissions=[],this.permissionControl=new c.MJ,this.permissionsService.getAllPermissions().subscribe({next:e=>{this.catalogPermissions=e.data,this.filteredPermissions=this.permissionControl.valueChanges.pipe((0,N.Z)(""),(0,g.T)(s=>{const o="string"==typeof s?s:s?.description;return o?this._filter(o):this.catalogPermissions.slice()})),this.data.id?this.rolesService.getRole(this.data.id).subscribe({next:s=>{this.rol=s.data,this.selectedPermissions=this.rol.permissions;for(let o in this.selectedPermissions)this.controlSelPermissions[this.selectedPermissions[o].id]=!0;this.rol.permissions=Object.keys(this.controlSelPermissions),this.rolForm.patchValue(this.rol),this.isLoading=!1},error:s=>{this.alertPanel.showError(s.error.message),this.isLoading=!1}}):this.isLoading=!1},error:e=>{this.alertPanel.showError(e.error.message),this.isLoading=!1}})}addPermission(e){let s=e.option.value;this.controlSelPermissions[s.id]||(this.selectedPermissions.push(s),this.controlSelPermissions[s.id]=!0),e.option.deselect(),this.permissionControl.setValue(""),this.rolForm.get("permissions").patchValue(Object.keys(this.controlSelPermissions))}removePermission(e){let s=this.selectedPermissions[e];this.selectedPermissions.splice(e,1),delete this.controlSelPermissions[s.id],this.rolForm.get("permissions").patchValue(Object.keys(this.controlSelPermissions))}saveRole(){if(this.rolForm.valid){this.isLoading=!0;let e=this.rolForm.value;this.rol.id?this.rolesService.updateRole(this.rol.id,e).subscribe({next:s=>{this.dialogRef.close(!0),console.log(s),this.isLoading=!1},error:s=>{this.alertPanel.showError(s.error.message),this.isLoading=!1}}):this.rolesService.createRole(e).subscribe({next:s=>{this.dialogRef.close(!0),console.log(s),this.isLoading=!1},error:s=>{this.alertPanel.showError(s.error.message),this.isLoading=!1}})}}confirmDeleteRole(){let e=this.rol.id;this.dialog.open(P.e,{width:"500px",data:{title:"Eliminar Rol",message:"Esta seguro de eliminar este rol?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(o=>{o&&this.rolesService.deleteRole(e).subscribe(n=>{this.dialogRef.close(!0)})})}displayFn(e){return""}_filter(e){const s=e.toLowerCase();return this.catalogPermissions.filter(o=>o.description.toLowerCase().includes(s))}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(tt),t.rXU(X),t.rXU(_.CP),t.rXU(_.bZ),t.rXU(c.ok),t.rXU(_.Vh))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-form"]],viewQuery:function(s,o){if(1&s&&t.GBs(F.m,5),2&s){let n;t.mGM(n=t.lsd())&&(o.alertPanel=n.first)}},decls:48,vars:20,consts:[["autoPermissions","matAutocomplete"],["btnVerListaUsuario","cdkOverlayOrigin"],[1,"flex-column","flex-gap",2,"height","100%"],[1,"flex-row","dialog-header"],["mat-dialog-title",""],[4,"ngIf"],["class","user-count",4,"ngIf"],[1,"flex-fill"],[1,"icon-button-container"],["mat-icon-button","",3,"click"],[3,"mode",4,"ngIf"],[1,"form-container","flex-column"],["fxLayout.lt-sm","column",1,"flex-column","flex-gap",3,"formGroup"],["matInput","","id","name","formControlName","name","required","","cdkFocusInitial",""],[1,"flex-fill","flex-column","flex-gap"],["appearance","outline",1,"small-search-input"],["matInput","","type","text","placeholder","Agregar Permisos","autocomplete","off",3,"formControl","matAutocomplete"],["matPrefix",""],["matSuffix",""],["autoActiveFirstOption","",3,"optionSelected","displayWith"],["class","permission-item",3,"value","disabled",4,"ngFor","ngForOf"],[1,"flex-fill","permissions-panel"],["role","list","dense",""],["role","listitem","class","permission-item",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",1,"hide-xs",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"user-count"],["mat-stroked-button","","cdkOverlayOrigin","",3,"click"],[1,"hide-xs"],["cdkConnectedOverlay","","yPosition","below","xPosition","before",3,"overlayKeydown","overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen"],[1,"list-users-role"],["dense",""],["class","user",4,"ngFor","ngForOf"],["class","user",4,"ngIf"],[1,"user"],["mat-line","",1,"username"],["mat-line","",1,"no-users"],[3,"mode"],[1,"permission-item",3,"value","disabled"],[1,"label"],[1,"permission-group"],["class","root-access",4,"ngIf"],[1,"root-access"],["role","listitem",1,"permission-item"],[1,"flex-row"],[1,"label","flex-fill"],[1,"action-button"],["mat-icon-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"section",2)(1,"div",3)(2,"div",4),t.DNE(3,Ke,2,0,"span",5)(4,ti,2,0,"span",5),t.EFF(5," Rol "),t.k0s(),t.DNE(6,si,10,3,"div",6),t.nrm(7,"div",7),t.j41(8,"div",8)(9,"button",9),t.bIt("click",function(){return t.eBV(n),t.Njj(o.onNoClick())}),t.j41(10,"mat-icon"),t.EFF(11,"clear"),t.k0s()()()(),t.nrm(12,"alert-panel"),t.j41(13,"div",7),t.DNE(14,ni,1,1,"mat-progress-bar",10),t.j41(15,"div",11)(16,"div",12)(17,"mat-form-field",7)(18,"mat-label"),t.EFF(19,"Nombre"),t.k0s(),t.nrm(20,"input",13),t.DNE(21,ai,2,0,"mat-error",5),t.k0s()(),t.j41(22,"div",14)(23,"div")(24,"mat-form-field",15),t.nrm(25,"input",16),t.j41(26,"mat-icon",17),t.EFF(27,"keyboard"),t.k0s(),t.j41(28,"span",18),t.EFF(29),t.nI1(30,"async"),t.nI1(31,"number"),t.k0s(),t.j41(32,"mat-autocomplete",19,0),t.bIt("optionSelected",function(l){return t.eBV(n),t.Njj(o.addPermission(l))}),t.DNE(34,ci,7,6,"mat-option",20),t.nI1(35,"async"),t.k0s()()(),t.j41(36,"div",21)(37,"mat-list",22),t.DNE(38,di,11,3,"mat-list-item",23),t.k0s()()()()(),t.j41(39,"div",24),t.DNE(40,ui,4,0,"button",25),t.nrm(41,"span",7),t.j41(42,"button",26),t.bIt("click",function(){return t.eBV(n),t.Njj(o.onNoClick())}),t.EFF(43,"Cancelar"),t.k0s(),t.j41(44,"button",27),t.bIt("click",function(){return t.eBV(n),t.Njj(o.saveRole())}),t.j41(45,"mat-icon"),t.EFF(46,"save"),t.k0s(),t.EFF(47," Guardar"),t.k0s()()()}if(2&s){let n;const r=t.sdS(33);t.R7$(3),t.Y8G("ngIf",o.rol.id),t.R7$(),t.Y8G("ngIf",!o.rol.id),t.R7$(2),t.Y8G("ngIf",o.rol.users),t.R7$(8),t.Y8G("ngIf",o.isLoading),t.R7$(2),t.Y8G("formGroup",o.rolForm),t.R7$(5),t.Y8G("ngIf",o.rolForm.get("name").hasError("required")),t.R7$(4),t.Y8G("formControl",o.permissionControl)("matAutocomplete",r),t.R7$(4),t.SpI("\xa0(",t.bMT(31,16,null==(n=t.bMT(30,14,o.filteredPermissions))?null:n.length),")\xa0"),t.R7$(3),t.Y8G("displayWith",o.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(35,18,o.filteredPermissions)),t.R7$(4),t.Y8G("ngForOf",o.selectedPermissions),t.R7$(2),t.Y8G("ngIf",o.rol.id),t.R7$(4),t.Y8G("disabled",o.rolForm.invalid||o.isLoading)}},dependencies:[u.Sq,u.bT,c.me,c.BC,c.cb,c.YS,h.$z,h.iY,R.An,x.fg,p.rl,p.nJ,p.TL,p.JW,p.yw,I.jt,I.YE,V.q,D.RN,y.wT,_.BI,_.E7,E.$3,E.pN,y.vu,et.WB,et.$Q,M.HM,c.l_,c.j4,c.JD,F.m,u.Jj,u.QX],styles:[".form-container[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;flex-direction:column;padding:10px}.icon-button-container[_ngcontent-%COMP%]{padding:5px}.dialog-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.25)}.user-count[_ngcontent-%COMP%]{display:flex;align-items:center}.permissions-panel[_ngcontent-%COMP%]{overflow:auto;border:1px solid lightgray;border-radius:1%;padding:8px;flex:1 1 auto;overflow-y:auto;height:0px}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]{height:auto!important;min-height:48px;padding-right:0}.permissions-panel[_ngcontent-%COMP%]   .mdc-list-item[_ngcontent-%COMP%]:hover{background:#0000000a}.permission-group[_ngcontent-%COMP%]{display:block;font-size:small;color:#708090}.permission-item[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid darkgray}.permission-item[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{padding:5px;display:flex;align-items:center}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;white-space:normal!important;width:-moz-fit-content;width:fit-content}.permission-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0;line-height:normal;height:20px;width:20px;font-size:24px}.root-access[_ngcontent-%COMP%]{font-size:smaller;text-align:center;font-weight:600;color:#008b8b!important}.list-users-role[_ngcontent-%COMP%]{overflow:auto;max-height:500px}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid darkgray}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:hover{background:#0000000a}.list-users-role[_ngcontent-%COMP%]   .no-users[_ngcontent-%COMP%]{font-style:italic;color:#a9a9a9}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:small!important;line-height:normal;font-weight:500}.list-users-role[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:x-small!important;line-height:normal;font-weight:400;color:#2f4f4f}"]})}return i})();var it=m(2616);const gi=()=>["noResultsFound"],fi=()=>["loadingResults"],_i=()=>[10,25,50,100],hi=i=>({id:i}),ot=i=>({hide:i});function bi(i,a){1&i&&(t.j41(0,"th",26),t.EFF(1," ID "),t.k0s())}function Ci(i,a){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.id," ")}}function Fi(i,a){1&i&&(t.j41(0,"th",28),t.EFF(1," Nombre "),t.k0s())}function ki(i,a){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.name,"")}}function vi(i,a){1&i&&(t.j41(0,"th",26),t.EFF(1," Permisos "),t.k0s())}function Ri(i,a){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.total_permissions)," ")}}function xi(i,a){1&i&&(t.j41(0,"th",26),t.EFF(1," Usuarios "),t.k0s())}function ji(i,a){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.total_users)," ")}}function Ei(i,a){1&i&&(t.j41(0,"th",28),t.EFF(1,"Registro"),t.k0s())}function Pi(i,a){if(1&i&&(t.j41(0,"td",29)(1,"span",30),t.EFF(2),t.nI1(3,"date"),t.k0s()()),2&i){const e=a.$implicit;t.R7$(2),t.JRh(t.bMT(3,1,e.updated_at))}}function Di(i,a){if(1&i&&(t.j41(0,"td",31)(1,"span"),t.EFF(2,"No se encontraron registros"),t.k0s()()),2&i){const e=t.XpG();t.BMQ("colspan",e.displayedColumns.length)}}function Ti(i,a){if(1&i&&(t.j41(0,"td",31)(1,"span"),t.EFF(2,"--| Cargando Registros |--"),t.k0s(),t.nrm(3,"mat-progress-bar",32),t.k0s()),2&i){const e=t.XpG();t.BMQ("colspan",e.displayedColumns.length)}}function Ii(i,a){1&i&&t.nrm(0,"tr",33)}function wi(i,a){if(1&i){const e=t.RV6();t.j41(0,"tr",34),t.bIt("click",function(){const o=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.openDialogForm(o.id))}),t.k0s()}if(2&i){const e=a.$implicit;t.XpG();const s=t.sdS(41);t.Y8G("cdkContextMenuTriggerFor",s)("cdkContextMenuTriggerData",t.eq3(2,hi,e.id))}}function Si(i,a){if(1&i&&t.nrm(0,"tr",35),2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(1,ot,!e.dataSource||e.dataSource.length>0||e.isLoading))}}function yi(i,a){if(1&i&&t.nrm(0,"tr",35),2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(1,ot,!e.isLoading))}}function Mi(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",36)(1,"button",37),t.bIt("click",function(){const o=t.eBV(e).id,n=t.XpG();return t.Njj(n.openDialogForm(o))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s(),t.EFF(4,"\xa0Editar"),t.k0s(),t.j41(5,"button",38),t.bIt("click",function(){const o=t.eBV(e).id,n=t.XpG();return t.Njj(n.confirmDeleteRole(o))}),t.j41(6,"mat-icon"),t.EFF(7,"delete"),t.k0s(),t.EFF(8,"\xa0Eliminar"),t.k0s()()}}const Ui=[{path:"roles",component:(()=>{class i{constructor(e,s,o){this.sharedService=e,this.rolesService=s,this.dialog=o,this.isLoading=!1,this.searchQuery="",this.resultsLength=0,this.currentPage=0,this.pageSize=50,this.displayedColumns=["id","name","total_permissions","total_users","updated_at"],this.dataSource=[]}ngOnInit(){this.loadRolesData(null)}loadRolesData(e){let s;return this.isLoading=!0,e?(s={page:e.pageIndex+1,per_page:e.pageSize},this.pageSize=e.pageSize):s={page:1,per_page:this.pageSize},s.query=this.searchQuery,this.dataSource=[],this.rolesService.getRolesList(s).subscribe({next:o=>{o.error?this.sharedService.showSnackBar(o.error.message,null,3e3):o.data.total>0?(this.dataSource=o.data.data,this.resultsLength=o.data.total):(this.dataSource=[],this.resultsLength=0),this.isLoading=!1},error:o=>{var n="Ocurri\xf3 un error.";o.error&&(n=o.error.message),this.alertPanel.showError(n),this.isLoading=!1}}),e}applyFilter(e=!1){this.paginator.pageIndex=0,this.loadRolesData(e?this.pageEvent:null)}openDialogForm(e){let s={width:"500px",height:"80%",data:{autoFocus:!1}};e&&(s.data.id=e),this.dialog.open(pi,s).afterClosed().subscribe(n=>{n&&this.applyFilter(!0)})}confirmDeleteRole(e=""){this.dialog.open(P.e,{width:"500px",data:{title:"Eliminar Rol",message:"Esta seguro de eliminar este rol?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(o=>{o&&this.rolesService.deleteRole(e).subscribe(n=>{this.loadRolesData(this.pageEvent)})})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(it.d),t.rXU(tt),t.rXU(_.bZ))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-list"]],viewQuery:function(s,o){if(1&s&&(t.GBs(v.iy,5),t.GBs(F.m,5)),2&s){let n;t.mGM(n=t.lsd())&&(o.paginator=n.first),t.mGM(n=t.lsd())&&(o.alertPanel=n.first)}},decls:42,vars:17,consts:[["paginator",""],["rowMenu",""],[1,"flex-row","flex-gap","module-search-bar"],["appearance","fill",1,"flex-fill"],["matInput","","placeholder","Buscar","autocomplete","off",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","flexFill","","matSuffix","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click","matTooltip"],[1,"flex-fill","flex-column"],[1,"main-list-table","left-click-open"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","total_permissions"],["matColumnDef","total_users"],["matColumnDef","updated_at"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","noResultsFound"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","loadingResults"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","no-results-found",3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","",3,"page","pageSize","pageIndex","length","pageSizeOptions"],["mat-header-cell","","width","1"],["mat-cell",""],["mat-header-cell",""],["mat-cell","",2,"white-space","nowrap"],[1,"extra-data"],["mat-footer-cell",""],["mode","query"],["mat-header-row",""],["mat-row","",3,"click","cdkContextMenuTriggerFor","cdkContextMenuTriggerData"],["mat-footer-row","",1,"no-results-found",3,"ngClass"],["cdkMenu","",1,"context-menu","mat-elevation-z2"],["cdkMenuItem","",1,"context-menu-item",3,"click"],["cdkMenuItem","",1,"context-menu-item",2,"color","red",3,"click"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"div",2)(1,"mat-form-field",3)(2,"mat-label"),t.EFF(3,"Buscar"),t.k0s(),t.j41(4,"input",4),t.mxI("ngModelChange",function(l){return t.eBV(n),t.DH7(o.searchQuery,l)||(o.searchQuery=l),t.Njj(l)}),t.bIt("keyup.enter",function(){return t.eBV(n),t.Njj(o.applyFilter())}),t.k0s(),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(n),t.Njj(o.applyFilter())}),t.j41(6,"mat-icon"),t.EFF(7,"search"),t.k0s()()(),t.j41(8,"button",6),t.bIt("click",function(){return t.eBV(n),t.Njj(o.openDialogForm())}),t.j41(9,"mat-icon"),t.EFF(10,"add"),t.k0s()()(),t.nrm(11,"alert-panel"),t.j41(12,"mat-card",7)(13,"div",8)(14,"table",9),t.qex(15,10),t.DNE(16,bi,2,0,"th",11)(17,Ci,2,1,"td",12),t.bVm(),t.qex(18,13),t.DNE(19,Fi,2,0,"th",14)(20,ki,2,1,"td",12),t.bVm(),t.qex(21,15),t.DNE(22,vi,2,0,"th",11)(23,Ri,3,3,"td",12),t.bVm(),t.qex(24,16),t.DNE(25,xi,2,0,"th",11)(26,ji,3,3,"td",12),t.bVm(),t.qex(27,17),t.DNE(28,Ei,2,0,"th",14)(29,Pi,4,3,"td",18),t.bVm(),t.qex(30,19),t.DNE(31,Di,3,1,"td",20),t.bVm(),t.qex(32,21),t.DNE(33,Ti,4,1,"td",20),t.bVm(),t.DNE(34,Ii,1,0,"tr",22)(35,wi,1,4,"tr",23)(36,Si,1,3,"tr",24)(37,yi,1,3,"tr",24),t.k0s()(),t.j41(38,"mat-paginator",25,0),t.bIt("page",function(l){return t.eBV(n),t.Njj(o.pageEvent=o.loadRolesData(l))}),t.k0s()(),t.DNE(40,Mi,9,0,"ng-template",null,1,t.C5r)}2&s&&(t.R7$(4),t.R50("ngModel",o.searchQuery),t.R7$(),t.BMQ("aria-label","Search")("aria-pressed","Search"),t.R7$(3),t.Y8G("matTooltip","Nuevo Rol"),t.R7$(6),t.Y8G("dataSource",o.dataSource),t.R7$(20),t.Y8G("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("matFooterRowDef",t.lJ4(14,gi)),t.R7$(),t.Y8G("matFooterRowDef",t.lJ4(15,fi)),t.R7$(),t.Y8G("pageSize",o.pageSize)("pageIndex",o.currentPage)("length",o.resultsLength)("pageSizeOptions",t.lJ4(16,_i)))},dependencies:[u.YU,c.me,c.BC,c.vS,h.$z,h.iY,R.An,x.fg,p.rl,p.nJ,p.yw,D.RN,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.Zq,d.xW,d.KS,d.$R,d.Qo,d.YZ,d.NB,d.iF,v.iy,L.oV,j.CS,j.p$,j.v2,M.HM,F.m,u.QX,u.vh],styles:[".mat-mdc-header-cell.mat-column-id[_ngcontent-%COMP%], .mat-mdc-header-cell.mat-column-updated_at[_ngcontent-%COMP%]{text-align:center}.mat-column-id[_ngcontent-%COMP%], .mat-column-updated_at[_ngcontent-%COMP%], .mat-column-total_users[_ngcontent-%COMP%], .mat-column-total_permissions[_ngcontent-%COMP%]{width:1px}.mat-column-total_users[_ngcontent-%COMP%], .mat-column-total_permissions[_ngcontent-%COMP%]{text-align:center}"]})}return i})(),canActivate:[U.q]}];let Gi=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[T.iI.forChild(Ui),T.iI]})}return i})();const $i=(i,a,e)=>{if(0==e||0==a)return`0 de ${e}`;const s=i*a;return`${s+1} - ${s<(e=Math.max(e,0))?Math.min(s+a,e):s+a} de ${e}`};function st(){const i=new v.xX;return i.itemsPerPageLabel="Registros por p\xe1gina:",i.nextPageLabel="P\xe1gina Siguiente",i.previousPageLabel="P\xe1gina Anterior",i.firstPageLabel="Primer P\xe1gina",i.lastPageLabel="Ultima P\xe1gina",i.getRangeLabel=$i,i}let Li=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[{provide:v.xX,useValue:st()}],imports:[u.MD,Y.G,Gi]})}return i})();var Oi=m(2765),Ni=m(9183);function Vi(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"Editar"),t.k0s())}function Bi(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"Nuevo"),t.k0s())}function Yi(i,a){1&i&&t.nrm(0,"mat-spinner")}function Xi(i,a){if(1&i&&(t.j41(0,"div",19),t.DNE(1,Yi,1,0,"mat-spinner",3),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.isLoading)}}function Ai(i,a){1&i&&(t.j41(0,"div",19),t.EFF(1,"No se encontraron los datos del permiso"),t.k0s())}function zi(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"El ID es obligatorio"),t.k0s())}function Ji(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"El ID debe tener 32 caracteres"),t.k0s())}function Qi(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"El ID debe tener 32 caracteres"),t.k0s())}function qi(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"El ID debe ser \xfanico"),t.k0s())}function Wi(i,a){if(1&i&&(t.j41(0,"mat-error"),t.DNE(1,zi,2,0,"span",3)(2,Ji,2,0,"span",3)(3,Qi,2,0,"span",3)(4,qi,2,0,"span",3),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.permisoForm.get("id").errors.required),t.R7$(),t.Y8G("ngIf",e.permisoForm.get("id").errors.maxlength),t.R7$(),t.Y8G("ngIf",e.permisoForm.get("id").errors.minlength),t.R7$(),t.Y8G("ngIf",e.permisoForm.get("id").errors.notEqualTo&&!e.permisoForm.get("id").errors.required)}}function Hi(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"La descripci\xf3n es obligatoria"),t.k0s())}function Zi(i,a){if(1&i&&(t.j41(0,"mat-error"),t.DNE(1,Hi,2,0,"span",3),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.permisoForm.get("description").errors.required)}}function Ki(i,a){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"El grupo es obligatorio"),t.k0s())}function to(i,a){if(1&i){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.confirmDeletePermission())}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Eliminar"),t.k0s()}}let eo=(()=>{class i{constructor(e,s,o,n,r){this.permissionsService=e,this.dialogRef=s,this.fb=o,this.dialog=n,this.data=r,this.isLoading=!1,this.permiso={},this.provideID=!1,this.permisoForm=this.fb.group({id:[{value:"",disabled:!0},[c.k0.maxLength(32),c.k0.minLength(32),c.k0.required,J.k.notEqualToValidator("repeatedId")]],repeatedId:[""],description:["",[c.k0.required]],group:["",[c.k0.required]],is_super:[!1]})}ngOnInit(){let e=this.data.id;e&&(this.isLoading=!0,this.permissionsService.getPermission(e).subscribe({next:s=>{this.permiso=s.data,this.permisoForm.patchValue(this.permiso),this.isLoading=!1},error:s=>{this.isLoading=!1,s.error&&!1===s.error.validacion&&this.manageRepeatedIDError(s)}}))}savePermission(){this.isLoading=!0,this.permiso.id?this.permissionsService.updatePermission(this.permiso.id,this.permisoForm.value).subscribe({next:e=>{this.dialogRef.close(!0),console.log(e),this.isLoading=!1},error:e=>{this.isLoading=!1,e.error&&!1===e.error.validacion&&this.manageRepeatedIDError(e)}}):this.permissionsService.createPermission(this.permisoForm.value).subscribe({next:e=>{this.dialogRef.close(!0),console.log(e),this.isLoading=!1},error:e=>{this.isLoading=!1,e.error&&!1===e.error.validacion&&this.manageRepeatedIDError(e)}})}toggleID(){this.provideID=!this.provideID,this.provideID?(this.permisoForm.get("id").enable(),this.permisoForm.get("id").markAsDirty(),this.permisoForm.get("id").markAsTouched()):this.permisoForm.get("id").disable()}onNoClick(){this.dialogRef.close()}manageRepeatedIDError(e){if(e.error.errores)for(let s in e.error.errores)if("id"==s){let o=e.error.errores[s];for(let n in o)if("El ID debe ser \xfanico"==o[n]){this.permisoForm.get("repeatedId").patchValue(this.permisoForm.get("id").value),this.permisoForm.get("id").enable(),this.permisoForm.get("id").markAsDirty(),this.permisoForm.get("id").markAsTouched();break}break}}confirmDeletePermission(){let e=this.permiso.id;this.dialog.open(P.e,{width:"500px",data:{title:"Eliminar Permiso",message:"Esta seguro de eliminar este permiso?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(o=>{o&&this.permissionsService.deletePermission(e).subscribe(n=>{this.dialogRef.close(!0)})})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(X),t.rXU(_.CP),t.rXU(c.ok),t.rXU(_.bZ),t.rXU(_.Vh))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-form"]],decls:46,vars:13,consts:[[1,"flex-column"],[1,"flex-row"],["mat-dialog-title","",1,"flex-fill"],[4,"ngIf"],[1,"icon-button-container"],["mat-icon-button","",3,"click"],[1,"flex-fill"],[1,"form-container","flex-column",3,"formGroup"],["class","form-loading-shade",4,"ngIf"],["matInput","","id","id","formControlName","id","placeholder","ID"],["mat-icon-button","","matPrefix","",3,"click"],["matInput","","id","description","formControlName","description","required",""],["matInput","","id","group","formControlName","group","required",""],[1,"checkbox-section"],["formControlName","is_super"],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",1,"hide-xs",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"form-loading-shade"],["mat-raised-button","","color","warn",3,"click"]],template:function(s,o){1&s&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2),t.DNE(3,Vi,2,0,"span",3)(4,Bi,2,0,"span",3),t.EFF(5," Permiso "),t.k0s(),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return o.onNoClick()}),t.j41(8,"mat-icon"),t.EFF(9,"clear"),t.k0s()()()(),t.nrm(10,"mat-divider"),t.j41(11,"div",6)(12,"div",7),t.DNE(13,Xi,2,1,"div",8)(14,Ai,2,0,"div",8),t.j41(15,"mat-form-field"),t.nrm(16,"input",9),t.j41(17,"button",10),t.bIt("click",function(){return o.toggleID()}),t.j41(18,"mat-icon"),t.EFF(19),t.k0s()(),t.j41(20,"mat-hint"),t.EFF(21,"Seleccione el cuadro para capturar el ID de manera manual"),t.k0s(),t.DNE(22,Wi,5,4,"mat-error",3),t.k0s(),t.j41(23,"mat-form-field")(24,"mat-label"),t.EFF(25,"Descripci\xf3n"),t.k0s(),t.nrm(26,"input",11),t.DNE(27,Zi,2,1,"mat-error",3),t.k0s(),t.j41(28,"mat-form-field")(29,"mat-label"),t.EFF(30,"Grupo"),t.k0s(),t.nrm(31,"input",12),t.DNE(32,Ki,2,0,"mat-error",3),t.k0s(),t.j41(33,"section",13)(34,"mat-checkbox",14),t.EFF(35,"Permiso de Super-Usuario"),t.k0s()()()(),t.nrm(36,"mat-divider"),t.j41(37,"div",15),t.DNE(38,to,4,0,"button",16),t.nrm(39,"span",6),t.j41(40,"button",17),t.bIt("click",function(){return o.onNoClick()}),t.EFF(41,"Cancelar"),t.k0s(),t.j41(42,"button",18),t.bIt("click",function(){return o.savePermission()}),t.j41(43,"mat-icon"),t.EFF(44,"save"),t.k0s(),t.EFF(45," Guardar"),t.k0s()()()),2&s&&(t.R7$(3),t.Y8G("ngIf",o.permiso.id),t.R7$(),t.Y8G("ngIf",!o.permiso.id),t.R7$(8),t.Y8G("formGroup",o.permisoForm),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",!o.isLoading&&!o.permiso),t.R7$(3),t.BMQ("aria-label","Capturar ID")("aria-pressed",o.provideID),t.R7$(2),t.JRh(o.provideID?"check_box":"check_box_outline_blank"),t.R7$(3),t.Y8G("ngIf",o.permisoForm.get("id").invalid&&(o.permisoForm.get("id").dirty||o.permisoForm.get("id").touched)),t.R7$(5),t.Y8G("ngIf",o.permisoForm.get("description").invalid&&(o.permisoForm.get("description").dirty||o.permisoForm.get("description").touched)),t.R7$(5),t.Y8G("ngIf",o.permisoForm.get("group").hasError("required")),t.R7$(6),t.Y8G("ngIf",o.permiso.id),t.R7$(4),t.Y8G("disabled",o.permisoForm.invalid||o.isLoading))},dependencies:[u.bT,c.me,c.BC,c.cb,c.YS,h.$z,h.iY,R.An,x.fg,p.rl,p.nJ,p.MV,p.TL,p.JW,Oi.So,V.q,Ni.LG,_.BI,_.E7,c.j4,c.JD],styles:[".form-container[_ngcontent-%COMP%]{position:relative;min-height:200px;display:flex;flex-direction:column;padding:10px}.form-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.form-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000026;z-index:1;display:flex;align-items:center;justify-content:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.eit-right-align[_ngcontent-%COMP%]{text-align:right}input.eit-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.eit-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.checkbox-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px;margin:0 10px}.icon-button-container[_ngcontent-%COMP%]{padding:5px}"]})}return i})();const io=()=>["noResultsFound"],oo=()=>["loadingResults"],so=()=>[10,25,50,100],no=i=>({id:i}),nt=i=>({hide:i});function ao(i,a){1&i&&(t.j41(0,"th",29),t.EFF(1," ID "),t.k0s())}function ro(i,a){if(1&i&&(t.j41(0,"td",30),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.id," ")}}function lo(i,a){1&i&&(t.j41(0,"th",31),t.EFF(1," Descripci\xf3n "),t.k0s())}function co(i,a){if(1&i&&(t.j41(0,"td",32),t.EFF(1),t.j41(2,"span",33),t.EFF(3),t.k0s()()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.description," "),t.R7$(2),t.JRh(e.group)}}function mo(i,a){1&i&&(t.j41(0,"th",34),t.EFF(1," Grupo "),t.k0s())}function uo(i,a){if(1&i&&(t.j41(0,"td",35),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.group," ")}}function po(i,a){1&i&&(t.j41(0,"th",31),t.EFF(1,"Registro"),t.k0s())}function go(i,a){1&i&&(t.j41(0,"span",39),t.EFF(1,"--root--"),t.k0s())}function fo(i,a){if(1&i&&(t.j41(0,"td",36),t.DNE(1,go,2,0,"span",37),t.j41(2,"span",38),t.EFF(3),t.nI1(4,"date"),t.k0s()()),2&i){const e=a.$implicit;t.R7$(),t.Y8G("ngIf",e.is_super),t.R7$(2),t.JRh(t.bMT(4,2,e.updated_at))}}function _o(i,a){if(1&i&&(t.j41(0,"td",40)(1,"span"),t.EFF(2,"No se encontraron registros"),t.k0s()()),2&i){const e=t.XpG();t.BMQ("colspan",e.displayedColumns.length)}}function ho(i,a){if(1&i&&(t.j41(0,"td",40)(1,"span"),t.EFF(2,"--| Cargando Registros |--"),t.k0s(),t.nrm(3,"mat-progress-bar",41),t.k0s()),2&i){const e=t.XpG();t.BMQ("colspan",e.displayedColumns.length)}}function bo(i,a){1&i&&t.nrm(0,"tr",42)}function Co(i,a){if(1&i){const e=t.RV6();t.j41(0,"tr",43),t.bIt("click",function(){const o=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.openDialogForm(o.id))}),t.k0s()}if(2&i){const e=a.$implicit;t.XpG();const s=t.sdS(37);t.Y8G("cdkContextMenuTriggerFor",s)("cdkContextMenuTriggerData",t.eq3(2,no,e.id))}}function Fo(i,a){if(1&i&&t.nrm(0,"tr",44),2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(1,nt,!e.dataSource||e.dataSource.length>0||e.isLoading))}}function ko(i,a){if(1&i&&t.nrm(0,"tr",44),2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(1,nt,!e.isLoading))}}function vo(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",45)(1,"button",46),t.bIt("click",function(){const o=t.eBV(e).id,n=t.XpG();return t.Njj(n.openDialogForm(o))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s(),t.EFF(4,"\xa0Editar"),t.k0s(),t.j41(5,"button",47),t.bIt("click",function(){const o=t.eBV(e).id,n=t.XpG();return t.Njj(n.confirmDeletePermission(o))}),t.j41(6,"mat-icon"),t.EFF(7,"delete"),t.k0s(),t.EFF(8,"\xa0Eliminar"),t.k0s()()}}const Ro=[{path:"permisos",component:(()=>{class i{constructor(e,s,o){this.sharedService=e,this.permissionsService=s,this.dialog=o,this.isLoading=!1,this.searchQuery="",this.resultsLength=0,this.currentPage=0,this.pageSize=50,this.displayedColumns=["id","description","group","updated_at"],this.dataSource=[]}ngOnInit(){this.loadPermissionsData(null)}loadPermissionsData(e){let s;return this.isLoading=!0,e?(s={page:e.pageIndex+1,per_page:e.pageSize},this.pageSize=e.pageSize):s={page:1,per_page:this.pageSize},s.query=this.searchQuery,s.show_hidden=!0,this.dataSource=[],this.permissionsService.getPermissionList(s).subscribe({next:o=>{o.error?this.sharedService.showSnackBar(o.error.message,null,3e3):o.data.total>0?(this.dataSource=o.data.data,this.resultsLength=o.data.total):(this.dataSource=[],this.resultsLength=0),this.isLoading=!1},error:o=>{var n="Ocurri\xf3 un error.";o.error&&(n=o.error.message),this.alertPanel.showError(n),this.isLoading=!1}}),e}applyFilter(e=!1){this.paginator.pageIndex=0,this.loadPermissionsData(e?this.pageEvent:null)}openDialogForm(e=""){this.dialog.open(eo,{width:"500px",autoFocus:!1,data:{id:e}}).afterClosed().subscribe(o=>{console.log(this.pageEvent),o&&this.applyFilter(!0)})}confirmDeletePermission(e){this.dialog.open(P.e,{width:"500px",data:{title:"Eliminar Permiso",message:"Esta seguro de eliminar este permiso?",hasOKBtn:!0,btnColor:"warn",btnText:"Eliminar",btnIcon:"delete"}}).afterClosed().subscribe(o=>{o&&this.permissionsService.deletePermission(e).subscribe(n=>{this.loadPermissionsData(this.pageEvent)})})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(it.d),t.rXU(X),t.rXU(_.bZ))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-list"]],viewQuery:function(s,o){if(1&s&&(t.GBs(v.iy,5),t.GBs(F.m,5)),2&s){let n;t.mGM(n=t.lsd())&&(o.paginator=n.first),t.mGM(n=t.lsd())&&(o.alertPanel=n.first)}},decls:38,vars:17,consts:[["paginator",""],["rowMenu",""],[1,"flex-row","flex-gap","module-search-bar"],["appearance","fill",1,"flex-fill"],["matInput","","placeholder","Buscar","autocomplete","off",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","flexFill","","matSuffix","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click","matTooltip"],[1,"flex-fill",2,"height","100%"],[1,"flex-column",2,"height","100%"],[1,"main-list-table","left-click-open","flex-fill"],["mat-table","","multiTemplateDataRows","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","hide-xs",4,"matHeaderCellDef"],["mat-cell","","class","hide-xs",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","group"],["mat-header-cell","","class","hide-xs hide-sm",4,"matHeaderCellDef"],["mat-cell","","class","hide-xs hide-sm",4,"matCellDef"],["matColumnDef","updated_at"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","noResultsFound"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","loadingResults"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"cdkContextMenuTriggerFor","cdkContextMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","no-results-found",3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","",3,"page","pageSize","pageIndex","length","pageSizeOptions"],["mat-header-cell","",1,"hide-xs"],["mat-cell","",1,"hide-xs"],["mat-header-cell",""],["mat-cell",""],[1,"extra-data","hide-gt-sm"],["mat-header-cell","",1,"hide-xs","hide-sm"],["mat-cell","",1,"hide-xs","hide-sm"],["mat-cell","",2,"white-space","nowrap"],["class","extra-data root-access",4,"ngIf"],[1,"extra-data"],[1,"extra-data","root-access"],["mat-footer-cell",""],["mode","query"],["mat-header-row",""],["mat-row","",3,"click","cdkContextMenuTriggerFor","cdkContextMenuTriggerData"],["mat-footer-row","",1,"no-results-found",3,"ngClass"],["cdkMenu","",1,"context-menu","mat-elevation-z2"],["cdkMenuItem","",1,"context-menu-item",3,"click"],["cdkMenuItem","",1,"context-menu-item",2,"color","red",3,"click"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"div",2)(1,"mat-form-field",3)(2,"input",4),t.mxI("ngModelChange",function(l){return t.eBV(n),t.DH7(o.searchQuery,l)||(o.searchQuery=l),t.Njj(l)}),t.bIt("keyup.enter",function(){return t.eBV(n),t.Njj(o.applyFilter())}),t.k0s(),t.j41(3,"button",5),t.bIt("click",function(){return t.eBV(n),t.Njj(o.applyFilter())}),t.j41(4,"mat-icon"),t.EFF(5,"search"),t.k0s()()(),t.j41(6,"button",6),t.bIt("click",function(){return t.eBV(n),t.Njj(o.openDialogForm())}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s()()(),t.nrm(9,"alert-panel"),t.j41(10,"mat-card",7)(11,"div",8)(12,"div",9)(13,"table",10),t.qex(14,11),t.DNE(15,ao,2,0,"th",12)(16,ro,2,1,"td",13),t.bVm(),t.qex(17,14),t.DNE(18,lo,2,0,"th",15)(19,co,4,2,"td",16),t.bVm(),t.qex(20,17),t.DNE(21,mo,2,0,"th",18)(22,uo,2,1,"td",19),t.bVm(),t.qex(23,20),t.DNE(24,po,2,0,"th",15)(25,fo,5,4,"td",21),t.bVm(),t.qex(26,22),t.DNE(27,_o,3,1,"td",23),t.bVm(),t.qex(28,24),t.DNE(29,ho,4,1,"td",23),t.bVm(),t.DNE(30,bo,1,0,"tr",25)(31,Co,1,4,"tr",26)(32,Fo,1,3,"tr",27)(33,ko,1,3,"tr",27),t.k0s()(),t.j41(34,"mat-paginator",28,0),t.bIt("page",function(l){return t.eBV(n),t.Njj(o.pageEvent=o.loadPermissionsData(l))}),t.k0s()()(),t.DNE(36,vo,9,0,"ng-template",null,1,t.C5r)}2&s&&(t.R7$(2),t.R50("ngModel",o.searchQuery),t.R7$(),t.BMQ("aria-label","Hide password")("aria-pressed","hidePassword"),t.R7$(3),t.Y8G("matTooltip","Nuevo Permiso"),t.R7$(7),t.Y8G("dataSource",o.dataSource),t.R7$(17),t.Y8G("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("matFooterRowDef",t.lJ4(14,io)),t.R7$(),t.Y8G("matFooterRowDef",t.lJ4(15,oo)),t.R7$(),t.Y8G("pageSize",o.pageSize)("pageIndex",o.currentPage)("length",o.resultsLength)("pageSizeOptions",t.lJ4(16,so)))},dependencies:[u.YU,u.bT,c.me,c.BC,c.vS,h.$z,h.iY,R.An,x.fg,p.rl,p.yw,D.RN,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.Zq,d.xW,d.KS,d.$R,d.Qo,d.YZ,d.NB,d.iF,v.iy,L.oV,j.CS,j.p$,j.v2,M.HM,G.B4,F.m,u.vh],styles:[".mat-mdc-header-cell.mat-column-id[_ngcontent-%COMP%], .mat-mdc-header-cell.mat-column-updated_at[_ngcontent-%COMP%]{text-align:center}.mat-column-id[_ngcontent-%COMP%], .mat-column-updated_at[_ngcontent-%COMP%]{width:1px}.root-access[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:#b8860b!important}"]})}return i})(),canActivate:[U.q]}];let xo=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[T.iI.forChild(Ro),T.iI]})}return i})(),jo=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[{provide:v.xX,useValue:st()}],imports:[u.MD,Y.G,xo]})}return i})(),Eo=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[u.MD,Y.G,Li,jo,Ze,Oe]})}return i})()}}]);