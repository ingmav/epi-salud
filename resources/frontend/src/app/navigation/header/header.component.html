<mat-toolbar class="bg-dark" style="height: 38px !important;">
    <button mat-icon-button aria-label="Ir al inicio" routerLink="/">
      <mat-icon style="color: white;">home</mat-icon>
    </button>
    <span class="header-links, font-header-elements" *ngIf="selectedApp">
      <a *ngIf="selectedAppLink" routerLink="{{selectedAppLink.route}}">
        {{selectedAppLink.name | uppercase}}
      </a>
    </span>
    <span class="header-links, font-header-elements" *ngIf="!selectedApp"  style="color:whitesmoke;">
      SISTEMA DE ASISTENCIA
    </span>

    <div class="hide-gt-xs" *ngIf="menus && menus.length > 0" style="color: white;">
      <button mat-icon-button [matMenuTriggerFor]="appMainMenu" xPosition="before"><mat-icon>arrow_drop_down</mat-icon></button>
      <mat-menu #appMainMenu="matMenu">
        <button mat-menu-item *ngFor="let item of menus" [matMenuTriggerFor]="navAppMenu" [matMenuTriggerData]="{identificador:item.identificador}"><mat-icon>{{ item.icon }}</mat-icon>{{ item.name }}</button>
      </mat-menu>
    </div>

    <div class="hide-xs" style="color: white;">
      <button mat-button *ngFor="let item of menus" [matMenuTriggerFor]="navAppMenu" [matMenuTriggerData]="{identificador:item.identificador}" class="menu-plataforma"><mat-icon>{{ item.icon }}</mat-icon><span fxShow.lt-sm="false">{{ item.name }}</span></button>
    </div>
    
    <mat-menu #navAppMenu="matMenu">
      <ng-template matMenuContent let-identificador="identificador">
        <button mat-menu-item *ngFor="let item of modulos[identificador]" routerLink="{{item.route}}"><mat-icon>{{ item.icon }}</mat-icon> {{ item.name }}</button>
      </ng-template>
    </mat-menu>


    <span class="spacer"></span>
    <!--span  class="font-header-elements" style="color:whitesmoke;">Plataforma</span-->
    <span class="spacer"></span>

    <ng-template [ngIf]="isAuthenticated">

      <button mat-icon-button aria-label="Mostrar Sidenav" (click)="toggleSidenav()" class="hide-gt-xs">
        <img src="{{user.avatar}}" alt="" style="width:auto; margin:auto">
      </button>

      <button mat-icon-button [matMenuTriggerFor]="menuAccount" class="hide-xs">
        <img src="{{user.avatar}}" alt=""  style="width:auto; margin:auto">
      </button>

      <mat-menu #menuAccount="matMenu" class="account-menu">
        <div style="width:280px; display:flex; justify-content: start center">
          <img src="{{user.avatar}}" alt="" style="width:80px; margin:5px; background-color: whitesmoke;">
          <div style="width:160px; margin:5px; padding-left: 5px;  display: flex; flex-direction:column; justify-content: center; font-size:0.9em; border-left: 1px solid rgba(0,0,0,.12);;">
            <strong>{{user.username}}</strong>
            <small style="font-weight: 500;">{{user.name}}</small>
            <small>{{user.email}}</small>
            <button mat-stroked-button color="accent" (click)="openEditProfile()" style="width: 100%;">
                <mat-icon>account_circle</mat-icon> 
                <span>&nbsp;Editar Perfil</span>
            </button>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div>
          <div class="apps" fxLayout="row">
            <figure routerLink="/apps">
              <mat-icon>home</mat-icon>
              <figcaption class="ellipsis">Inicio</figcaption>
            </figure>
            <ng-container *ngFor="let app of apps; let i = index">
                <figure [routerLink]="['/'+app.route]">
                    <img src="{{ app.icon }}" alt="Icon">
                    <figcaption class="ellipsis">{{ app.name }}</figcaption>
                </figure>
            </ng-container>
          </div>
        </div>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="logout()" style="text-align: center;">
          <mat-icon>exit_to_app</mat-icon>
          <span>Cerrar sesi√≥n</span>
        </button>
      </mat-menu>
    </ng-template>
  </mat-toolbar>